webpackJsonp([0],[,,,,function(t,e,s){"use strict";var n=s(35),i=s.n(n),a=s(77),o=s.n(a),r=s(7),l=s.n(r),c=s(0),u=s.n(c),d=s(1),h=s.n(d),f=s(10),p=s.n(f),m=s(9),v=s.n(m),g=s(23),_=s(20),b=s(5),y=s(57),k=s(48),x=s(17),w=(s(25),function(t){function e(t){u()(this,e);var s=p()(this,(e.__proto__||l()(e)).call(this,t));return s.name="",s.school="",s.email="",s.grade="",s.classes={},s.sessions={},s.assignments={},s}return v()(e,t),h()(e,[{key:"addClass",value:function(t,e,s){return this.classes[t]=e,x.a.updateField(this,"classes/"+t,e,s)}},{key:"removeClass",value:function(t,e){return delete this.classes[t],this.setAssignment(t,null,function(t){if(t)return console.error(t)}),x.a.deleteField(this,"classes/"+t,e)}},{key:"addAssignment",value:function(t,e,s){var n=this;return x.a.setField(this,"assignments/"+t,e,function(i){i?console.error("@/model/student.js/.addAssignment",i):n.assignments[t]=e,s(i)})}},{key:"removeAssignment",value:function(t,e){var s=this;return x.a.deleteField(this,"assignments/"+t,function(n){n?console.error("@/model/student.js/.removeAssignment",n):delete s.assignments[t],e(n)})}},{key:"setAssignment",value:function(t,e,s){var n=this,i=this.assignments[t];e?this.assignments[t]=e:delete this.assignments[t];var a=function(e){e&&(n.assignments[t]=i,console.error("@/model/student.js/.setAssignment",e)),s(e)};return e?x.a.setField(this,"assignments/"+t,e,a):x.a.deleteField(this,"assignments/"+t,a)}},{key:"loadAssignments",value:function(t){var s=[];if(e.MULTICLASS)for(var n in this.assignments)s.push(n);else for(var i in this.assignments)s.push(this.assignments[i]);return x.a.getFromIDs(b.a,s,function(e,s){if(e)return t(e);var n=[],i=[];s.forEach(function(t){i.push(x.a.get(_.a,t.cls,function(e,s){if(e)return console.error("@/model/student.js/.loadAssignments db.get Class",e);n.push({cls:s,task:t})}))}),o.a.all(i).then(function(e){t(null,n)})})}},{key:"loadSessions",value:function(t){var e=[];for(var s in this.sessions)e.push(s);return x.a.getFromIDs(y.a,e,function(e,s){if(e)return t(e);var n=new i.a;s.forEach(function(t){n.set(t,{cls:{},task:{},session:null,data:null})});var a=[];s.forEach(function(t){a.push(x.a.get(_.a,t.cls,function(e,s){if(e)return console.error("@/model/student.js/.loadSessions db.get Class",e);n.get(t).cls=s})),a.push(x.a.get(b.a,t.task,function(e,s){if(e)return console.error("@/model/student.js/.loadSessions db.get Task",e);n.get(t).task=s})),a.push(x.a.get(k.a,t.data,function(e,s){if(e)return console.error("@/model/student.js/.loadSessions db.get Data",e);n.get(t).data=s}))}),o.a.all(a).then(function(e){var s=[];n.forEach(function(t,e){t.session=e,s.push(t)}),t(null,s)})})}},{key:"loadTask",value:function(t,e){return x.a.get(b.a,t,e)}},{key:"taskDone",value:function(t,e,s){return this.sessions[e]=t,x.a.updateField(this,"sessions/"+e,t,function(t){if(t)return s(t);s()})}},{key:"addQuestionnaire",value:function(t,e,s){return x.a.update("/"+k.a.db+"/"+t+"/questionnaire",e,function(t){if(t)return s(t);s()})}},{key:"getSessions",value:function(t){return x.a.getFromIDs(y.a,this.sessions,t)}},{key:"deleteSession",value:function(t,e){return this.sessions[t]?(delete this.sessions[t],x.a.deleteField(this,"sessions/"+t,function(s){if(s)return e(s);x.a.get(y.a,t,function(s,n){if(s)return e(s);var i=[];i.push(x.a.deleteItems(k.a,[n.data])),i.push(x.a.deleteItems(y.a,[t])),o.a.all(i).then(function(){e(null)})})})):e(new Error("Session does not exist"))}}],[{key:"list",value:function(t){return x.a.getAll(e,t)}},{key:"getData",value:function(t,e){return x.a.getFromIDs(k.a,t,e)}},{key:"db",get:function(){return"students"}},{key:"MULTICLASS",get:function(){return!0}},{key:"isLogged",get:function(){return x.a.user&&x.a.user.isStudent}},{key:"instance",get:function(){return x.a.user&&x.a.user.isStudent?x.a.user.ref:null}}]),e}(g.a));e.a=w,g.a.apply(w)},function(t,e,s){"use strict";var n=s(77),i=s.n(n),a=s(7),o=s.n(a),r=s(0),l=s.n(r),c=s(1),u=s.n(c),d=s(10),h=s.n(d),f=s(9),p=s.n(f),m=s(23),v=s(92),g=s(11),_=s(6),b=s(18),y=s(17),k=(s(25),function(t){function e(t){l()(this,e);var s=h()(this,(e.__proto__||o()(e)).call(this,t));return s.name="",s.owner="",s.cls="",s.type="",s.alignment="",s.fontname="Calibri",s.intro="",s.pages=[],s.syllab=e.defaultSyllab,s.speech=e.defaultSpeech,s.questionnaire=[],s}return p()(e,t),u()(e,[{key:"update",value:function(t,s){var n={alignment:t.alignment,fontname:t.fontname,intro:t.intro,pages:e.textToPages(t.text),syllab:t.syllab,speech:t.speech,questionnaire:t.questionnaire};return e.embedImagesIntoPages(n.pages,t.images),n.syllab.exceptions=e.textToSyllabs(t.syllab.exceptions),y.a.updateFields(this,n,s)}},{key:"getIntro",value:function(t){return this.intro?y.a.get(b.a,this.intro,t):i.a.resolve(t())}},{key:"deleteAllImages",value:function(t){var e=[];return this.pages.forEach(function(t){t.images&&t.images.forEach(function(t){e.push(y.a.deleteFile(t.src,function(t){}))})}),i.a.all(e).then(function(e){t()})}}],[{key:"get",value:function(t,s){return y.a.get(e,t,s)}},{key:"textToPages",value:function(t){if(!t)return[];var e=0,s=new v.a(e),n=[s];return t.split("\n").forEach(function(t){if(!(t=t.trim()))return void(s.lines.length>0&&(s=new v.a(++e),n.push(s)));s.lines.push(t)}),s.lines.length||n.pop(),n}},{key:"pagesToText",value:function(t){if(!t.length)return"";var e=void 0;if("lines"in t[0]){e=t.map(function(t){return t.lines.join("\n")})}else{e=t.map(function(t){return t.join("\n")})}return e.join("\n\n")}},{key:"textToSyllabs",value:function(t){if(!t)return{};var s={};return t.split("\n").forEach(function(t){t=t.trim();var n=t.split(e.wordSyllabSeparator);if(2===n.length){var i=n[0].trim(),a=n[1].trim();!i||!a||i.split(e.syllabSeparator).length>1||(s[i]=a.split(e.syllabSeparator).filter(function(t){return t.length}).join(e.syllabSeparator))}}),s}},{key:"syllabsToText",value:function(t){var s=[];for(var n in t)s.push(""+n+e.wordSyllabSeparator+t[n]);return s.join("\n")}},{key:"embedImagesIntoPages",value:function(t,e){e&&(t.forEach(function(t){t.images=[]}),e.forEach(function(e){if(e.page<0)t.forEach(function(t){t.images.find(function(t){return t.src===e.src})||t.images.push(new g.a(e))});else{var s=t[e.page];if(!s)return;s.images.push(new g.a(e))}}))}},{key:"uploadImage",value:function(t,e,s,n){var i=g.a.generatePrefix();return y.a.uploadFile(t,i,e,s,n)}},{key:"deleteImage",value:function(t,e){return y.a.deleteFile(t.src,e)}},{key:"db",get:function(){return"tasks"}},{key:"wordSyllabSeparator",get:function(){return"="}},{key:"syllabSeparator",get:function(){return" "}},{key:"defaultSyllab",get:function(){return{language:"",exceptions:{},mode:"colors",temporary:!1,threshold:new _.a(3e3,!1,1500,3e3,!1)}}},{key:"defaultSpeech",get:function(){return{language:"",threshold:new _.a(4e3,!1,3e3,4e3,!1)}}}]),e}(m.a));e.a=k,m.a.apply(k)},function(t,e,s){"use strict";s.d(e,"b",function(){return r}),s.d(e,"c",function(){return l}),s.d(e,"a",function(){return c});var n=s(1),i=s.n(n),a=s(0),o=s.n(a),r=(s(91),s(122),function t(e,s){o()(this,t),this.speech=e,this.syllabification=s}),l=function(){function t(){o()(this,t),this.language="",this.exceptions={},this.mode="",this.temporary=!1,this.threshold=null}return i()(t,null,[{key:"from",value:function(e){var s=new t;return s.language=e.language,s.mode=e.mode,s.threshold=e.threshold,s.temporary=e.temporary,s.exceptions=e.exceptions,s}}]),t}(),c=function t(e,s,n,i,a){o()(this,t),this.value=e,this.smart=s,this.min=n,this.max=i,this.adjustForWordLength=a}},,,,,function(t,e,s){"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}s.d(e,"b",function(){return y}),s.d(e,"c",function(){return k}),s.d(e,"d",function(){return x}),s.d(e,"e",function(){return w}),s.d(e,"a",function(){return C});var i=s(7),a=s.n(i),o=s(10),r=s.n(o),l=s(9),c=s.n(l),u=s(43),d=s.n(u),h=s(227),f=s.n(h),p=s(99),m=s.n(p),v=s(0),g=s.n(v),_=s(1),b=s.n(_),y=(s(49),function(){function t(e,s){g()(this,t),this.text=e,this.id=s}return b()(t,[{key:"isEqual",value:function(t){return this.text===t.text&&(!t.id||this.id===t.id)}}]),t}()),k=function(){function t(e){g()(this,t),this.name=e}return b()(t,[{key:"setMeta",value:function(t,e){}},{key:"_isGreaterThanInt",value:function(t,e){if(""===t||null===t||void 0===t)return!1;var s=+t;return!(m()(s)||!f()(s))&&s>e}},{key:"isValid",get:function(){return!0}}],[{key:"hasParameters",value:function(t){return d()(t).length>1}}]),t}(),x=function(t){function e(t,s){g()(this,e);var n=r()(this,(e.__proto__||a()(e)).call(this,C.EVENT.fixation));return n.words=t,n.duration=s,n}return c()(e,t),b()(e,[{key:"isValid",get:function(){return this.words&&this.words.length>0&&this._isGreaterThanInt(this.duration,100)}}]),e}(k),w=function(t){function e(t){g()(this,e);var s=r()(this,(e.__proto__||a()(e)).call(this,C.EVENT.delay));return s.duration=t,s}return c()(e,t),b()(e,[{key:"isValid",get:function(){return this._isGreaterThanInt(this.duration,0)}}]),e}(k),C=function(){function t(e){var s=e.src,n=e.page,i=e.location,a=e.offset,o=e.keepOriginalSize,r=e.on,l=e.off;g()(this,t),this.src=s,this.page=n,this.location=i,this.offset=a||0,this.keepOriginalSize=!!o,this.on=r,this.off=l,this.file=null}return b()(t,[{key:"meta",get:function(){var t={page:this.page,location:this.location,offset:this.offset,keepOriginalSize:this.keepOriginalSize};return this.on.setMeta(t,"on"),this.off.setMeta(t,"off"),t}}],[{key:"getNameFromSource",value:function(t){var e=t.split("_");return e.shift(),e.join("_").split("?")[0]}},{key:"generatePrefix",value:function(){return n()+"_"}},{key:"from",value:function(e,s){return s=s||{ignoreDisplayCondition:!1},new t({src:e.src,page:-1,location:e.location,offset:e.offset,keepOriginalSize:e.keepOriginalSize,on:new k(s.ignoreDisplayCondition?t.EVENT.none:e.on),off:new k(e.off)})}},{key:"EVENT",get:function(){return{none:"none",fixation:"fixation",image:"image",delay:"delay"}}}]),t}()},,function(t,e,s){"use strict";function n(t){var e=""+t;return e.length<2&&(e="0"+e),e}var i=s(0),a=s.n(i),o=s(1),r=s.n(o),l=function(){function t(){a()(this,t)}return r()(t,null,[{key:"toArray",value:function(t){var e=[];for(var s in t)e.push({id:s,name:t[s]});return e}},{key:"byName",value:function(t,e){return t.name.toLowerCase()>e.name.toLowerCase()?1:-1}},{key:"displayCount",value:function(t,e){return null===t?"":(t.length?t.length:"No")+" "+e+(1!==t.length?"s":"")}},{key:"sessionDate",value:function(t){var e=new Date(t),s=n(e.getHours()),i=n(e.getMinutes());return e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()+" "+s+":"+i+" "}}]),t}();e.a=l},,function(t,e,s){"use strict";e.a={data:function(){return{showError:0,errorMessage:""}},methods:{setError:function(t,e){t.message&&(t=t.message),this.errorMessage=e?e+":\n\n"+t:t,this.showError=Math.random()}}}},function(t,e,s){s(339);var n=s(2)(s(201),s(426),"data-v-8df17170",null);t.exports=n.exports},function(t,e,s){"use strict";function n(t){return m()(t).constructor}var i=s(52),a=s.n(i),o=s(77),r=s.n(o),l=s(76),c=s.n(l),u=s(0),d=s.n(u),h=s(1),f=s.n(h),p=s(7),m=s.n(p),v=s(215),g=s(41),_=s(19),b=(s(32),s(23),s(157)("./db.development.js").config);console.log("Connecting to "+b.projectId);var y=function(){function t(){var e=this;if(d()(this,t),this._connected=!1,this.fb=null,this.storage=null,this.auth=null,this._user=null,this.ignoreUserSwitch=!1,this.currentPassword="",!window.firebase)return void window.alert("Cannot access Firebase");firebase.apps.length?firebase.apps[0].delete().then(function(){e._init(firebase.initializeApp(b))}).catch(function(t){console.log("@/db/db.js/.ctor firebase.App.delete",t)}):this._init(firebase.initializeApp(b))}return f()(t,[{key:"_init",value:function(t){this.fb=firebase.database(t).ref(),this.storage=firebase.storage().ref(),this.auth=firebase.auth(),this.auth.onAuthStateChanged(this._onUserChanged.bind(this))}},{key:"logIn",value:function(t,e,s){var n=this;return this.fb||s(new Error("Not connected to the database")),t.indexOf("@")<0&&(t+=this.FAKE_EMAIL_DOMAIN),this.auth.signInWithEmailAndPassword(t,e).then(function(t){n.currentPassword=e,s(null,t)}).catch(function(t){s(t)})}},{key:"logOut",value:function(){this.auth&&this.auth.signOut()}},{key:"resetPassword",value:function(t,e){return this.auth.sendPasswordResetEmail(t).then(function(t){e(null)}).catch(function(t){e(t)})}},{key:"add",value:function(t,e,s){var n=this;if(t.validate&&!t.validate(e)){var i=c()(e);return i=i.substr(0,Math.min(i.length,50)),s(new Error('"'+i+"\" is not of a class '"+t.name+"'"))}if(e.email){this.ignoreUserSwitch=!0;var a=e.password||"gdfvgdfv";delete e.password,this.auth.createUserWithEmailAndPassword(e.email,a).then(function(i){e.email.indexOf("@")>0&&e.email.indexOf(n.FAKE_EMAIL_DOMAIN)<0&&setTimeout(function(){n.auth.sendPasswordResetEmail(e.email)},1e3);var a=n.fb.child(t.db).push(e),o={};o[i.uid]={path:t.db,id:a.key,prefs:new g.a},n.fb.child("users").update(o),s(null,a.key)}).catch(function(t){s(t)})}else{var o=this.fb.child(t.db).push(e);s(null,o.key)}}},{key:"update",value:function(t,e,s){var n={};return n[t]=e,this.fb.update(n,s)}},{key:"updateField",value:function(t,e,s,i){var a={};return a["/"+n(t).db+"/"+t.id+"/"+e]=s,this.fb.update(a,i)}},{key:"updateFields",value:function(t,e,s){var i={};if(e instanceof Array)e.forEach(function(e){i["/"+n(t).db+"/"+t.id+"/"+e.field]=e.value});else for(var a in e)i["/"+n(t).db+"/"+t.id+"/"+a]=e[a];return this.fb.update(i,s)}},{key:"setField",value:function(t,e,s,i){return this.fb.child("/"+n(t).db+"/"+t.id).child(e).set(s,i)}},{key:"get",value:function(t,e,s){return this.fb.child(t.db+"/"+e).once("value",function(n){if(!n.exists())return s(new Error(t.db+"/"+e+" do not exist"));s(null,t.from(n))},function(t){s(t)})}},{key:"getFromIDs",value:function(t,e,s){var n=this,i=[],a=[],o=[];return this._toArray(e).forEach(function(e){var s=n.fb.child(t.db+"/"+e);a.push(s.once("value",function(s){if(!s.exists())return void o.push(t.db+"/"+e);i.push(t.from(s))},function(t){o.push(t)}))}),r.a.all(a).then(function(t){s(o.join(", "),i)})}},{key:"getFieldAll",value:function(t,e,s){return this.fb.child(t).once("value",function(t){var n=[];t.forEach(function(t){n.push(e.from(t))}),s(null,n)},function(t){s(t)})}},{key:"getAll",value:function(t,e){return this.fb.child(t.db).once("value",function(s){if(!s.exists())return e(null,[]);var n=[];s.forEach(function(e){n.push(t.from(e))}),e(null,n)},function(t){e(t)})}},{key:"deleteItems",value:function(t,e){var s=this,n=[];return this._toArray(e).forEach(function(e){var i=s.fb.child(t.db+"/"+e);n.push(i.remove())}),r.a.all(n)}},{key:"delete",value:function(t,e){return this.fb.child(n(t).db+"/"+t.id).remove().then(function(){return e()}).catch(function(t){return e(t)})}},{key:"deleteField",value:function(t,e,s){return this.fb.child(n(t).db+"/"+t.id+"/"+e).remove().then(function(){return s()}).catch(function(t){return s(t)})}},{key:"deleteUser",value:function(t){return this.fb.child("users").orderByChild("id").equalTo(t).once("value",function(t){t.exists()&&t.forEach(function(t){t.ref.remove()})},function(t){console.log("@/db/db.js/.deleteUser firebase.Query.once",t)})}},{key:"uploadFile",value:function(t,e,s,n,i){var a=/image\//.test(t.type)?"image":"file",o={customMetadata:s},r=this.storage.child(a+"/"+e+t.name).put(t,o);return r.on("state_changed",function(t){t.state===firebase.storage.TaskState.RUNNING&&n(t.bytesTransferred/t.totalBytes*100)},function(t){i(t)},function(t){i(null,r.snapshot.downloadURL)}),r.then()}},{key:"deleteFile",value:function(t,e){var s=new window.URL(t).pathname.split("/"),n=s[s.length-1];return n?this.storage.child(decodeURIComponent(n)).delete().then(function(t){return e()}).catch(function(t){return e(t)}):e(new Error("invalid url"))}},{key:"_onUserChanged",value:function(t){var e=this;if(_.a.$emit("connected",{user:t}),this._connected=!0,t){if(this.ignoreUserSwitch)return this.ignoreUserSwitch=!1,void setTimeout(function(){e.auth.signInWithEmailAndPassword(e.user.email,e.currentPassword).catch(function(t){t&&console.log("@/db/db.js/._onUserChanged firebase.Auth.signInWithEmailAndPassword",t),e.logOut()})},100);this.fb.child("users/"+t.uid).once("value",function(s){var n=new g.b(s.val(),t.uid,"d1wjPNPQ0CVOssWFwqSm1r1inC62"===t.uid);v.a.create(t,n,function(t,s){t&&e.logOut(),e._user=s,_.a.$emit("login")})})}else this._user&&(this._user=null,_.a.$emit("logout"))}},{key:"_toArray",value:function(t){var e=void 0;if(t instanceof Array)e=t;else if("object"===(void 0===t?"undefined":a()(t))){e=[];for(var s in t)e.push(s)}else e="boolean"==typeof t||"number"==typeof t||"string"==typeof t?[t]:[];return e}},{key:"FAKE_EMAIL_DOMAIN",get:function(){return"@fake.com"}},{key:"user",get:function(){return this._user}},{key:"isConnected",get:function(){return this._connected}}]),t}(),k=new y;e.a=k},function(t,e,s){"use strict";var n=s(7),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=s(10),u=s.n(c),d=s(9),h=s.n(d),f=s(23),p=s(17),m=(s(56),function(t){function e(t){o()(this,e);var s=u()(this,(e.__proto__||i()(e)).call(this,t));return s.owner="",s.name="",s.calibInstruction="",s.calibStart="Calibrate",s.calibSkip="Skip",s.startInstruction="",s.startRun="Start",s.startCancel="Cancel",s.firstPage=[],s.next="Next",s.finish="Finish",s.finished="Thank you!",s}return h()(e,t),l()(e,[{key:"textsSummary",value:function(){function t(t){t=t.replace(/\n/g," ");var e=t.length;if(e>i){var a=t.indexOf(" ",s),o=t.slice(0,-n).lastIndexOf(" ");t=t.substr(0,a)+" ... "+t.slice(-e+o)}return t}var e=[],s=40,n=20,i=s+n;return this.calibInstruction&&e.push(t(this.calibInstruction)),this.startInstruction&&e.push(t(this.startInstruction)),this.firstPage&&this.firstPage[0]&&e.push(t(this.firstPage.join(" "))),e.join("\n")}},{key:"firstPageAsText",value:function(){return this.firstPage?this.firstPage.join("\n"):""}},{key:"update",value:function(t,s,n){this.name=t;var i=e.validateTexts(s);return this.calibInstruction=i.calibInstruction,this.calibStart=i.calibStart,this.calibSkip=i.calibSkip,this.startInstruction=i.startInstruction,this.startRun=i.startRun,this.startCancel=i.startCancel,this.firstPage=i.firstPage,this.next=i.next,this.finish=i.finish,this.finished=i.finished,i.name=t,p.a.updateFields(this,i,n)}}],[{key:"validateTexts",value:function(t){return t?{calibInstruction:t.calibInstruction||"",calibStart:t.calibStart||"",calibSkip:t.calibSkip||"",startInstruction:t.startInstruction||"",startRun:t.startRun||"",startCancel:t.startCancel||"",firstPage:t.firstPage?t.firstPage.split("\n").map(function(t){return t.trim()}):[],next:t.next||"",finish:t.finish||"",finished:t.finished||""}:{calibInstruction:"",calibStart:"",calibSkip:"",startInstruction:"",startRun:"",startCancel:"",firstPage:[],next:"",finish:"",finished:""}}},{key:"db",get:function(){return"intros"}}]),e}(f.a));e.a=m,f.a.apply(m)},function(t,e,s){"use strict";var n=s(40),i=new n.a;e.a=i},function(t,e,s){"use strict";var n=s(61),i=s.n(n),a=s(7),o=s.n(a),r=s(0),l=s.n(r),c=s(1),u=s.n(c),d=s(10),h=s.n(d),f=s(9),p=s.n(f),m=s(23),v=(s(56),s(5)),g=s(4),_=s(17),b=function(t){function e(t){l()(this,e);var s=h()(this,(e.__proto__||o()(e)).call(this,t));return s.name="",s.owner="",s.tasks={},s.students={},s}return p()(e,t),u()(e,[{key:"createTask",value:function(t,e,s){var n=this;t.syllab.exceptions=v.a.textToSyllabs(t.syllabExceptions);var i={name:t.name,owner:this.owner,cls:this.id,type:e,alignment:t.alignment,fontname:t.fontname,intro:t.intro,pages:v.a.textToPages(t.text),syllab:t.syllab,speech:t.speech,questionnaire:t.questionnaire};return v.a.embedImagesIntoPages(i.pages,t.images),_.a.add(v.a,i,function(e,i){if(e)return s(e);n.tasks[i]=t.name,_.a.updateField(n,"tasks/"+i,t.name,function(t){t&&delete n.tasks[i],s(t,i)})})}},{key:"getTasks",value:function(t){return _.a.getFromIDs(v.a,this.tasks,t)}},{key:"deleteTask",value:function(t,e){var s=this;delete this.tasks[t.id],_.a.deleteField(this,"tasks/"+t.id,e),_.a.getFromIDs(g.a,this.students,function(e,n){if(e)return console.error(e);n.forEach(function(e){g.a.MULTICLASS?t.id in e.assignments&&e.removeAssignment(t.id,function(t){if(t)return console.error(t)}):e.assignments[s.id]===t.id&&e.setAssignment(s.id,null,function(t){if(t)return console.error(t)})})}),t.deleteAllImages(function(t){t&&console.error(t)}),_.a.delete(t,function(t){t&&console.error(t)})}},{key:"getStudents",value:function(t){return _.a.getFromIDs(g.a,this.students,t)}},{key:"addStudents",value:function(t,e){var s=this,n=i()({},this.students,t);return _.a.updateField(this,"students",n,function(i){i||(s.students=n,_.a.getFromIDs(g.a,t,function(t,e){if(t)return console.error(t);e.forEach(function(t){t.addClass(s.id,s.name,function(t){if(t)return console.error(t)})})})),e(i)})}},{key:"removeStudent",value:function(t,e){var s=this;return delete this.students[t.id],_.a.deleteField(this,"students/"+t.id,e),_.a.get(g.a,t.id,function(e,n){if(e)return console.error(e);t.removeClass(s.id,function(t){if(t)return console.error(t)}),t.setAssignment(s.id,null,function(t){if(t)return console.error(t)})})}}],[{key:"list",value:function(t){return _.a.getAll(e,t)}},{key:"get",value:function(t,s){return _.a.get(e,t,s)}},{key:"db",get:function(){return"classes"}}]),e}(m.a);e.a=b,m.a.apply(b)},function(t,e,s){"use strict";var n=s(7),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=s(10),u=s.n(c),d=s(9),h=s.n(d),f=s(23),p=s(24),m=s(4),v=s(18),g=s(20),_=s(5),b=s(17),y=(s(56),function(t){function e(t){o()(this,e);var s=u()(this,(e.__proto__||i()(e)).call(this,t));return s.name="",s.email="",s.school="",s.intros={},s.classes={},s}return h()(e,t),l()(e,[{key:"getSchool",value:function(t){return b.a.get(p.a,this.school,t)}},{key:"createStudent",value:function(t,e){var s=this,n=t.name,i=void 0===n?"":n,a=t.email,o=void 0===a?"":a,r=t.password,l=void 0===r?"":r,c=t.grade,u=void 0===c?"":c;return b.a.add(m.a,{name:i,email:o,password:l,grade:u,school:this.school,classes:{},sessions:{},assignments:{}},function(t,n){if(t)return e(t);b.a.get(p.a,s.school,function(t,s){if(t)return e(t);s.students[n]=i,b.a.updateField(s,"students/"+n,i,function(e){t=e}),e(t,n)})})}},{key:"createIntro",value:function(t,e,s){var n=this,i=v.a.validateTexts(e);return b.a.add(v.a,{name:t,owner:this.id,calibInstruction:i.calibInstruction,calibStart:i.calibStart,calibSkip:i.calibSkip,startInstruction:i.startInstruction,startRun:i.startRun,startCancel:i.startCancel,firstPage:i.firstPage,next:i.next,finish:i.finish,finished:i.finished},function(e,i){if(e)return s(e);n.intros[i]=t,b.a.updateField(n,"intros/"+i,t,function(t){t&&delete n.intros[i],s(t)})})}},{key:"getIntros",value:function(t){return b.a.getFromIDs(v.a,this.intros,t)}},{key:"deleteIntro",value:function(t,e){delete this.intros[t.id],b.a.deleteField(this,"intros/"+t.id,e),b.a.getFromIDs(g.a,this.classes,function(e,s){if(e)return console.error(e);s.forEach(function(e){b.a.getFromIDs(_.a,e.tasks,function(e,s){if(e)return console.error(e);s.forEach(function(e){e.intro===t.id&&(e.intro="",b.a.updateField(e,"intro",e.intro,function(t){if(t)return console.error(t)}))})})})}),b.a.delete(t,function(t){t&&console.error(t)})}},{key:"createClass",value:function(t,e){var s=this;return b.a.add(g.a,{name:t,owner:this.id,tasks:{},students:{}},function(n,i){if(n)return e(n);s.classes[i]=t,b.a.updateField(s,"classes/"+i,t,function(t){t&&delete s.classes[i],e(t)})})}},{key:"getClasses",value:function(t){return b.a.getFromIDs(g.a,this.classes,t)}},{key:"deleteClass",value:function(t,e){delete this.classes[t.id],b.a.deleteField(this,"classes/"+t.id,e),b.a.deleteItems(_.a,t.tasks),b.a.getFromIDs(m.a,t.students,function(e,s){if(e)return console.error(e);s.forEach(function(e){e.removeClass(t.id,function(t){if(t)return console.error(t)})})}),b.a.delete(t,function(t){t&&console.error(t)})}}],[{key:"list",value:function(t){return b.a.getAll(e,t)}},{key:"db",get:function(){return"teachers"}},{key:"isLogged",get:function(){return b.a.user&&b.a.user.isTeacher}},{key:"instance",get:function(){return b.a.user&&b.a.user.isTeacher?b.a.user.ref:null}}]),e}(f.a));e.a=y,f.a.apply(y)},,function(t,e,s){"use strict";var n=s(28),i=s.n(n),a=s(229),o=s.n(a),r=s(0),l=s.n(r),c=s(1),u=s.n(c),d=function(){function t(e){l()(this,t),this.id=e}return u()(t,null,[{key:"validate",value:function(t){return!1}},{key:"from",value:function(t){return null}},{key:"apply",value:function(t){t.validate=function(e){return o()(new t.prototype.constructor).every(function(t){return"id"===t||!!e.hasOwnProperty(t)})},t.from=function(e){var s=e.val(),n=new t(e.key);return i()(n,s)}}},{key:"db",get:function(){return""}}]),t}();e.a=d},function(t,e,s){"use strict";var n=s(77),i=s.n(n),a=s(43),o=s.n(a),r=s(7),l=s.n(r),c=s(0),u=s.n(c),d=s(1),h=s.n(d),f=s(10),p=s.n(f),m=s(9),v=s.n(m),g=s(23),_=s(21),b=s(4),y=s(20),k=s(17),x=(s(56),function(t){function e(t){u()(this,e);var s=p()(this,(e.__proto__||l()(e)).call(this,t));return s.name="",s.email="",s.teachers={},s.students={},s}return v()(e,t),h()(e,[{key:"createTeacher",value:function(t,e,s){var n=this;return k.a.add(_.a,{name:t,email:e,school:this.id,intros:{},classes:{}},function(e,i){e||(n.teachers[i]=t,k.a.updateField(n,"teachers/"+i,t,function(t){t&&delete n.teachers[i],e=t})),s(e,i)})}},{key:"getTeachers",value:function(t){return k.a.getFromIDs(_.a,this.teachers,function(e,s){if(e)return t(e);t(null,s)})}},{key:"createStudent",value:function(t,e){var s=this,n=t.name,i=void 0===n?"":n,a=t.email,o=void 0===a?"":a,r=t.password,l=void 0===r?"":r,c=t.grade,u=void 0===c?"":c;return k.a.add(b.a,{name:i,email:o,password:l,grade:u,school:this.id,classes:{},sessions:{},assignments:{}},function(t,n){t||(s.students[n]=i,k.a.updateField(s,"students/"+n,i,function(e){e&&delete s.students[n],t=e})),e(t,n)})}},{key:"getStudents",value:function(t){return k.a.getFromIDs(b.a,this.students,function(e,s){if(e)return t(e);t(null,s)})}},{key:"deleteStudent",value:function(t,e){delete this.students[t.id];var s=function(t){t&&console.log("@/model/school.js/.deleteStudent db.updateField",t)};return k.a.updateField(this,"students",this.students,function(n){if(n)return e(n);if(k.a.updateField(t,"deleted",!0,s),t.assignments&&(t.assignments={},k.a.updateField(t,"assignments",{},s)),t.classes){var a=[];o()(t.classes).map(function(e){a.push(y.a.get(e,function(e,n){e||(delete n.students[t.id],k.a.updateField(n,"students",n.students,s))}))}),t.classes={},k.a.updateField(t,"classes",{},s),i.a.all(a).then(function(){e(null)}).catch(function(t){e(t)})}})}}],[{key:"list",value:function(t){return k.a.getAll(e,t)}},{key:"get",value:function(t,s){return k.a.get(e,t,s)}},{key:"db",get:function(){return"schools"}},{key:"isLogged",get:function(){return k.a.user&&k.a.user.isSchool}},{key:"instance",get:function(){return k.a.user&&k.a.user.isSchool?k.a.user.ref:null}}]),e}(g.a));e.a=x,g.a.apply(x)},function(t,e,s){"use strict";s.d(e,"a",function(){return c});var n=s(1),i=s.n(n),a=s(0),o=s.n(a),r=function t(e,s){o()(this,t),this.name=e,this.text=s},l={text:new r("text","whole text"),word:new r("word","long-gazed word")},c=function(){function t(e,s,n,i){o()(this,t),this.type=e,this.word=s,this.question=n,this.answers=i,this.answer=null}return i()(t,null,[{key:"types",get:function(){return l}}]),t}()},,function(t,e,s){s(300);var n=s(2)(s(189),s(390),"data-v-0c2f8a1e",null);t.exports=n.exports},,,,function(t,e,s){"use strict";e.a={data:function(){return{showSuccess:0,successMessage:""}},methods:{setSuccess:function(t){this.successMessage=t,this.showSuccess=Math.random()}}}},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=(s(41),s(47),s(24),s(21),s(4),function(){function t(e,s){i()(this,t),e&&(this._user=s,this.name=e.displayName||e.email,this.email=e.email,this._ref=null)}return o()(t,[{key:"update",value:function(t){this._user.update(t)}},{key:"ref",get:function(){return this._ref}},{key:"prefs",get:function(){return this._user.prefs}},{key:"isAdmin",get:function(){return!1}},{key:"isSchool",get:function(){return!1}},{key:"isTeacher",get:function(){return!1}},{key:"isStudent",get:function(){return!1}}]),t}());e.a=r},function(t,e,s){"use strict";var n=s(75),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=s(87),u=(s(86),s(70),s(88),s(49),".word"),d=function(){function t(){o()(this,t),this.text=c.a.fromAll(u),this.words=[],this.fixations=[],this.syllabifications=[],this.speech=[],this.images=[],this.isIntro=!1}return l()(t,[{key:"filterFixations",value:function(t){var e=[],s=null,n=0,i=0,a=!0;this.fixations.forEach(function(o){s&&s.ts!==o.ts&&(s.tsSync=i,e.push(s),s=null),!a&&o.duration>=t&&(s=o),n!==o.ts&&(o.duration<t&&(a=!1),n=o.ts,i=o.tsSync)}),s&&(s.tsSync=i,e.push(s)),this.fixations=e}},{key:"setWords",value:function(t){var e=[],s=!0,n=!1,a=void 0;try{for(var o,r=i()(t.values());!(s=(o=r.next()).done);s=!0){var l=o.value;e.push(l)}}catch(t){n=!0,a=t}finally{try{!s&&r.return&&r.return()}finally{if(n)throw a}}this.words=e}}]),t}();e.a=d},,,,,,,,function(t,e,s){"use strict";s.d(e,"a",function(){return m}),s.d(e,"b",function(){return v});var n=s(7),i=s.n(n),a=s(1),o=s.n(a),r=s(10),l=s.n(r),c=s(9),u=s.n(c),d=s(0),h=s.n(d),f=s(23),p=s(17),m=function t(e){h()(this,t),this.lang=e?e.lang:"en"},v=function(t){function e(t,s,n){h()(this,e);var a=l()(this,(e.__proto__||i()(e)).call(this,t?t.id:n?"admin":""));return a.uid=s,a.path=t?t.path:"",a.prefs=t?t.prefs:null,a.prefs||(a.prefs=new m),a}return u()(e,t),o()(e,[{key:"update",value:function(t){p.a.update("/"+e.db+"/"+this.uid+"/prefs",this.prefs,t)}}],[{key:"db",get:function(){return"users"}}]),e}(f.a)},function(t,e,s){"use strict";function n(t,e){return function(s){var n=t.split(".");if(void 0===s){var i=e;return n.forEach(function(e){i||console.error("Option GET: Path '"+t+" has no match in receiver"),i=i[e]}),i}for(var a=e,o=0;o<n.length-1;o++)a||console.error("Option SET: Path '"+t+" has no match in receiver"),a=a[n[o]];a[n[n.length-1]]=s}}function i(t,e,s,n){var a=e[s];for(var o in a)if("object"===a[o])i(t,a,s+"."+o,n);else{var r="_"===o[0]?o.substr(1):o,l="_"===s[0]?s.substr(1):s;n&&(l=n+"."+l),t[l+"."+r]=a[o]}}function a(t,e){for(var s in t)"object"===r()(t[s])?a(t[s],e[s]):e[s].ref(t[s])}s.d(e,"c",function(){return h}),s.d(e,"b",function(){return f}),s.d(e,"a",function(){return p});var o=s(52),r=s.n(o),l=s(1),c=s.n(l),u=s(0),d=s.n(u),h=function t(e){var s=e.type,n=e.label,i=e.items,a=void 0===i?[""]:i,o=e.step,r=void 0===o?0:o;d()(this,t),this.type=s,this.label=n,this.items=a,this.step=r,this.min=void 0,this.max=void 0,this.ref=void 0},f=function t(e){var s=e.id,n=void 0===s?"":s,i=e.title,a=void 0===i?"":i,o=e.options,r=void 0===o?{}:o,l=e.defaults,c=void 0===l?[{}]:l;d()(this,t),this.title=a,this.options=r,this.defaults=c,this.id=n},p=function(){function t(){d()(this,t)}return c()(t,null,[{key:"createOptions",value:function(e,s){var i=void 0;if(e instanceof Array)i=e.map(function(e){return new f({title:e.title,options:t.createOptions(e.options,s),defaults:e.defaults})});else{for(var a in e)e[a].ref=n(a,s);i=e}return i}},{key:"createDefaults",value:function(t,e,s){var n={};for(var a in t){var o="_"===a[0]?a.substr(1):a;e&&!e.includes(o)||("object"===r()(t[a])?i(n,t,a,s):(s&&(o=s+"."+o),n[o]=t[a]))}return n}},{key:"restoreDefaults",value:function(e){var s=function(e){e.defaults?a(e.defaults,e.options):Array.isArray(e.options)&&t.restoreDefaults(e.options)};if(Array.isArray(e))e.forEach(s);else for(var n in e)s(e[n])}}]),t}()},,,,,function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=s(24),l=s(17),c=(s(4),s(21),function(){function t(){i()(this,t),this.name="Admin"}return o()(t,null,[{key:"createSchool",value:function(t,e,s){return l.a.add(r.a,{name:t,email:e,teachers:{},students:{}},function(t,e){s(t,e)})}},{key:"moveStudent",value:function(e,s,n,i){return t.move(e,s,n,"students",i)}},{key:"moveTeacher",value:function(e,s,n,i){return t.move(e,s,n,"teachers",i)}},{key:"move",value:function(t,e,s,n,i){var a=t.school;return t.school=e,l.a.updateField(t,"school",e,function(o){if(o)return t.school=a,i(o);var r=s.find(function(t){return t.id===a}),c=s.find(function(t){return t.id===e});delete r[n][t.id],c[n][t.id]=t.name,l.a.updateField(c,n+"/"+t.id,t.name,function(e){if(e)return i(e);l.a.deleteField(r,n+"/"+t.id,function(t){if(t)return i(t);i(null)})})})}},{key:"isLogged",get:function(){return l.a.user&&l.a.user.isAdmin}}]),t}());e.a=c},function(t,e,s){"use strict";var n=s(7),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=s(10),u=s.n(c),d=s(9),h=s.n(d),f=s(23),p=(s(33),s(25),function(t){function e(t){o()(this,e);var s=u()(this,(e.__proto__||i()(e)).call(this,t));return s.task=null,s.student=null,s.pages=null,s.questionnaire=null,s}return h()(e,t),l()(e,null,[{key:"db",get:function(){return"data"}}]),e}(f.a));e.a=p,f.a.apply(p)},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=(s(11),function(){function t(e,s){i()(this,t),this.src=e.src,this.location=e.location,this.offset=e.offset||0,this.keepOriginalSize=!!e.keepOriginalSize,this.on=e.on.name,this.off=e.off.name,this.shown=s,this.hidden=0}return o()(t,[{key:"hide",value:function(t){this.hidden=t}},{key:"isCurrent",get:function(){return!this.hidden}}]),t}());e.a=r},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=(s(96),s(127),function t(e,s,n){i()(this,t),this.name=e,this.records=s,this.params=n});e.a=a},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=(s(57),s(4),s(20),s(74),function t(e,s,n,a){i()(this,t),this.ref=e,this.student=s,this.task=n,this.cls=a});e.a=a},,,,,function(t,e,s){"use strict";var n=s(0);s.n(n),s(6),s(11)},function(t,e,s){"use strict";var n=s(7),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=s(10),u=s.n(c),d=s(9),h=s.n(d),f=s(23),p=(s(72),s(6),s(90),function(t){function e(t){o()(this,e);var s=u()(this,(e.__proto__||i()(e)).call(this,t));return s.date=(new Date).toJSON(),s.student="",s.cls="",s.task="",s.font=null,s.feedbacks=null,s.screen=null,s.data="",s}return h()(e,t),l()(e,null,[{key:"db",get:function(){return"sessions"}}]),e}(f.a));e.a=p,f.a.apply(p)},function(t,e,s){"use strict";var n=s(34),i=s.n(n),a=s(43),o=s.n(a),r=s(61),l=s.n(r),c=s(0),u=s.n(c),d=s(1),h=s.n(d),f=s(122),p=s(222),m=(s(93),s(6),s.i(p.a)("syllabifier")),v=function(){function t(e){u()(this,t),this._options=l()({},e),this._options.threshold.factor=4,this._hyphen=t.MODES.hyphen,this._hyphenHtml='<span class="hyphen">'+this._hyphen+"</span>",this._rule=g[this._options.language],this._exceptions={};for(var s in this._options.exceptions)this._exceptions[s.toLowerCase()]=this._options.exceptions[s].replace(/ /g,this._hyphen).toLowerCase();m.info("created",e)}return h()(t,[{key:"prepareWord",value:function(t){if(!t||!this._rule||"hyphen"!==this._options.mode)return t;m.info("preparing");var e=this.syllabifyWord(t,this._hyphen),s=e.length-t.length,n=Math.round(s/2);return'<span class="hyphens">'+Array(n+1).join(this._hyphen)+"</span>"+t+'<span class="hyphens">'+Array(s-n+1).join(this._hyphen)+"</span>"}},{key:"prepareText",value:function(t){var e=this;return this._rule&&"hyphen"===this._options.mode?t.map(function(t){return t.split(" ").map(function(t){return t.toLowerCase()}).map(e.prepareWord).join(" ")}):t}},{key:"unprepare",value:function(t){return t.replace(new RegExp(this._hyphen,"g"),"")}},{key:"inspect",value:function(t,e){var s=this;if(!this._rule)return!1;var n=this._options.threshold.value;return this._options.threshold.adjustForWordLength&&(n*=Math.max(1,1+.05*(e.word.length-7))),!e.syllabified&&e.accumulatedTime>n&&(e.syllabified=!0,t.innerHTML=this.syllabifyWord(e.word,this._hyphenHtml),this._options.temporary&&setTimeout(function(){s._restore(t)},3e3),!0)}},{key:"syllabifyElementText",value:function(t,e){return!!this._rule&&(t.innerHTML=this.syllabifyWord(e,this._hyphenHtml),!0)}},{key:"setAvgWordReadingDuration",value:function(t){this._options.threshold.smart&&t&&(this._options.threshold.value=Math.max(this._options.threshold.min,Math.min(this._options.threshold.max,t*this._options.threshold.factor)))}},{key:"syllabifyWord",value:function(t,e){var s=this;m.info("syllabifying",t),"colors"===this._options.mode&&(e=this._hyphen);var n=void 0,i=o()(this._exceptions).find(function(e){return s._isException(t,e)});if(i?(m.info("is exception"),n=this._formatException(t,i,this._exceptions[i],e)):n=this._rule(t,e),"colors"===this._options.mode){var a=n.split(this._hyphen);n=this._colorize(a)}return n}},{key:"getSyllabCount",value:function(t){var e=this;if(!this._rule)return 0;m.info("counting syllab");var s=function(t,s){if(!s)return t;var n=void 0,i=o()(e._exceptions).find(function(t){return e._isException(s,t)});return n=i?e._exceptions[i]:e._rule(s," "),t+n.split(" ").length};return t instanceof Array?t.reduce(function(t,e){return e.split(" ").map(function(t){return t.toLowerCase()}).reduce(s,t)},0):t.split(" ").reduce(s,0)}},{key:"_restore",value:function(t){var e=null;try{e=t.textContent}catch(t){m.error("restoring: element do not exist")}if(m.info("restoring",e),e){var s=e.split(this._hyphen);t.innerHTML=s.join("")}}},{key:"_isException",value:function(t,e){return t.toLowerCase().indexOf(e)>=0}},{key:"_formatException",value:function(t,e,s,n){m.info("params:",t,e,s,n);var a=t.toLowerCase().indexOf(e),o=e.length,r=t.substr(0,a),l=t.substr(a+o),c=i()(s);m.info("info:",a,o,r,l);for(var u=a,d=0;u<a+o;u++){var h=t.charAt(u);for(h===h.toUpperCase()&&(c[d]=h);c[++d]===this._hyphen;);}var f=c.join("");if(this._hyphen!==n){var p=new RegExp(this._hyphen,"g");f=f.replace(p,n)}return r+f+l}},{key:"_colorize",value:function(e){var s=t.MODES.colors,n=0;return e.map(function(t){var e='<span style="color: '+s[n]+'">'+t+"</span>";return++n===s.length&&(n=0),e}).join("")}},{key:"enabled",get:function(){return!!this._rule}},{key:"setup",get:function(){return new f.a(l()({},this._options,{hyphen:this._hyphen,enabled:!!this._rule}))}}],[{key:"getPrefixAndSuffix",value:function(t,e){for(var s=i()(t),n=[],a=[],o=0;o<s.length&&s[o++]===e;)n.push(e);for(o=s.length-1;o>=0&&s[o--]===e;)a.push(e);return[n.join(""),a.join("")]}},{key:"MODES",get:function(){return{hyphen:String.fromCharCode(183),colors:["black","red"]}}},{key:"LANGS",get:function(){return o()(g)}}]),t}();e.a=v;var g={Finnish:function(t,e){for(var s=["a","o","u","i","e","ä","ö","y"],n=["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","z"],i=["ai","ei","oi","ui","yi","äi","öi","au","eu","iu","ou","ey","iy","äy","öy","ie","uo","yö"],a=function(t){return s.includes(t)?"V":n.includes(t)?"C":"_"},o=[],r=!1,l=0,c=t.length-1;c>=0;c--){var u=!1,d=t[c],h=a(d),f=c>0?t[c-1]:null,p=f?a(f):"_";if("V"===h){if(r=!0,l++,c<t.length-1){var m=t[c+1],v=a(m);m===d||v!==h||i.includes(d+m)?"i"===d&&"e"===o[0]&&"n"===o[1]?(o.unshift(e),l=0):3===l&&(o.unshift(e),l=0):(o.unshift(e),l=0)}}else"C"===h&&r&&(l=0,u=c>0,1===c&&p===h&&(u=!1));o.unshift(d),u&&("_"!==h&&"_"!==p&&o.unshift(e),r=!1)}return o.join("")}}},function(t,e,s){"use strict";var n=s(43),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c={started:{},stopped:{},stateUpdated:{},wordFocused:{},wordLeft:{},gazePoint:{},customValue:{}},u={started:null,stopped:null,stateUpdated:null,wordFocused:null,wordLeft:null,gazePoint:null,customValue:null};for(var d in u)!function(t){u[t]=function(e){for(var s in c[t])c[t][s](e)}}(d);var h={},f=function(){function t(){var e=this;o()(this,t),this._serviceCheckTimer=null,this._wsOK=GazeTargets.init({etudPanel:{show:!1},pointer:{show:!1},targets:[{selector:".word",selection:{type:GazeTargets.selection.types.none},mapping:{className:""}}],mapping:{type:GazeTargets.mapping.types.expanded,source:GazeTargets.mapping.sources.samples,expansion:30}},{state:function(t){h=t,t.isTracking?u.started():t.isStopped&&u.stopped(),u.stateUpdated(t),t.isDisconnected&&e.scheduleReconnection()},target:function(t,e){"focused"===t?u.wordFocused(e):"left"===t&&u.wordLeft(e)},fixation:function(t){u.gazePoint(t)},customValue:function(t,e){u.customValue({code:t,value:e})}})}return l()(t,[{key:"listCallbacks",value:function(){return i()(u)}},{key:"setCallback",value:function(t,e,s){c[t][e]=s}},{key:"clearCallback",value:function(t,e){delete c[t][e]}},{key:"showOptions",value:function(){GazeTargets.ETUDriver.showOptions()}},{key:"calibrate",value:function(){GazeTargets.ETUDriver.calibrate()}},{key:"start",value:function(){h.isTracking||GazeTargets.ETUDriver.toggleTracking()}},{key:"stop",value:function(){h.isTracking&&GazeTargets.ETUDriver.toggleTracking()}},{key:"updateTargets",value:function(){GazeTargets.updateTargets()}},{key:"scheduleReconnection",value:function(){var t=this;this._serviceCheckTimer||(this._serviceCheckTimer=setTimeout(function(){t._serviceCheckTimer=null,h.isServiceRunning||(t.wsOK=GazeTargets.reconnect())},3e3))}},{key:"getCustomValue",value:function(t,e){var s=""+Math.random();c.customValue[s]=function(t){delete c.customValue[s],e(null,t)},GazeTargets.ETUDriver.getCustomValue(t)}},{key:"setCustomValue",value:function(t,e){GazeTargets.ETUDriver.setCustomValue(t,e)}},{key:"listCustomValueTypes",value:function(){return GazeTargets.ETUDriver.listAvailableCustomValue()}},{key:"isWebSocketOK",get:function(){return this._wsOK}},{key:"state",get:function(){return h}}]),t}(),p=new f;e.a=p},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=s(17),l=(s(32),function(){function t(){i()(this,t)}return o()(t,[{key:"logIn",value:function(t,e,s){return r.a.logIn(t,e,s)}},{key:"logOut",value:function(){r.a.logOut()}},{key:"resetPassword",value:function(t,e){return r.a.resetPassword(t,e)}},{key:"user",get:function(){return r.a.user}},{key:"isConnected",get:function(){return r.a.isConnected}},{key:"DEFAULT_EMAIL_DOMAIN",get:function(){return r.a.FAKE_EMAIL_DOMAIN}}]),t}()),c=new l;e.a=c},,,,,,,function(t,e,s){s(329);var n=s(2)(s(186),s(416),"data-v-65739ed1",null);t.exports=n.exports},function(t,e,s){s(321);var n=s(2)(s(191),s(409),"data-v-57815d2f",null);t.exports=n.exports},function(t,e,s){s(348);var n=s(2)(s(193),s(436),"data-v-fc7e7726",null);t.exports=n.exports},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=function(){function t(e,s,n,a,o){i()(this,t),this.ts=e,this.tsSync=s,this.x=n,this.y=a,this.duration=o}return o()(t,null,[{key:"from",value:function(e,s){return new t(e.ts,s,Math.round(e.x),Math.round(e.y),e.duration)}}]),t}();e.a=r},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=function(){function t(e,s,n,a){i()(this,t),this.x=e,this.y=s,this.width=n,this.height=a}return o()(t,null,[{key:"from",value:function(e){if(!e)return null;var s=e.getBoundingClientRect();return new t(Math.round(s.left),Math.round(s.top),Math.round(s.width),Math.round(s.height))}}]),t}();e.a=r},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=function(){function t(e,s,n,a){i()(this,t),this.family=e,this.size=s,this.style=n,this.weight=a}return o()(t,null,[{key:"from",value:function(e){return new t(e["font-family"],e["font-size"],e["font-style"],e["font-weight"])}}]),t}();e.a=r},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=(s(4),s(51),function t(e){i()(this,t),this.ref=e,this.sessions=[]});e.a=a},function(t,e,s){"use strict";var n=s(101),i=s.n(n),a=s(0),o=s.n(a),r=s(5),l=(s(51),s(73),function t(e,s){var n=this;o()(this,t),this.id=e,this.name=s,this.students=new i.a,this.sessions=[],this.hasQuestionnaire=!1,r.a.get(e,function(t,e){t?console.error("@/vis/datal/task.js/.ctor model/Task.get",t):n.hasQuestionnaire=e.questionnaire&&e.questionnaire.length})});e.a=l},,,,,,,,,,,function(t,e,s){s(325),s(324);var n=s(2)(s(179),s(412),"data-v-5bad2478",null);t.exports=n.exports},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(71),o=s(219),r=s(218),l=function t(e,s){i()(this,t),this.text=e?e.textContent:"",this.rect=a.a.from(e),this.page=s,this.focusing=new o.a,this.feedback=new r.a};e.a=l},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=s(71),l=s(121),c=function(){function t(e,s,n,a){i()(this,t),this.id=e,this.text=s,this.rect=n,this.font=a}return o()(t,null,[{key:"from",value:function(e,s){return e?new t(s,e.textContent,r.a.from(e),l.a.fromEl(e)):null}},{key:"fromAll",value:function(e){for(var s=[],n=document.querySelectorAll(e),i=0;i<n.length;i+=1){var a=n.item(i);s.push(t.from(a,i))}return s}}]),t}();e.a=c},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=(s(71),function t(e,s,n){i()(this,t),this.ts=e,this.text=s,this.rect=n});e.a=a},function(t,e,s){"use strict";s.d(e,"a",function(){return r});var n=s(28),i=s.n(n),a=s(0),o=s.n(a),r=(s(6),function t(e){o()(this,t),this.enabled=e.enabled,this.language=e.language,this.threshold=i()({},e.threshold)})},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=function(){function t(e,s){i()(this,t),this.width=e,this.height=s}return o()(t,null,[{key:"full",get:function(){return new t(window.screen.width,window.screen.height)}}]),t}();e.a=r},function(t,e,s){"use strict";var n=s(7),i=s.n(n),a=s(0),o=s.n(a),r=s(10),l=s.n(r),c=s(9),u=s.n(c),d=s(89),h=function(t){function e(t){return o()(this,e),l()(this,(e.__proto__||i()(e)).call(this,t))}return u()(e,t),e}(d.a);e.a=h},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=(s(11),function t(e){i()(this,t),this.id=e,this.lines=[],this.images=[]});e.a=a},function(t,e,s){"use strict";var n=s(34),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=function(){function t(e){o()(this,t),this.accumulatedTime=0,this.focusCount=0,this.focusRecorded=!1,this.entries=1,this.lastSample=window.performance.now(),this.syllabified=!1,this.pronounced=!1,this.word=this._getWordFromElement(e)}return l()(t,[{key:"_getWordFromElement",value:function(t){return i()(t.childNodes).filter(function(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE&&!t.classList.contains("hyphens")}).map(function(t){return t.textContent.trim()}).join("")}}]),t}();e.a=c},function(t,e,s){"use strict";function n(t){var e=a[t];if(!e)return null;var s=i.a.user?i.a.user.prefs.lang:"en";s=s.toLowerCase(),o.indexOf(s)<0&&(s=o[0]);var n={};for(var r in e)n[r]=e[r][s];return n}s.d(e,"a",function(){return o}),e.b=n;var i=s(17),a={navbar:{link_schools:{en:"Schools",fi:"Koulut"},link_teachers:{en:"Teachers",fi:"Opettajat"},link_students:{en:"Students",fi:"Opiskelijat"},link_instructions:{en:"Instructions",fi:"Ohjat"},link_classes:{en:"Classes",fi:"Ryhmät"},link_results:{en:"Results",fi:"Results"},link_assignments:{en:"Assignments",fi:"Tehtävät"},user_logout:{en:"Log out",fi:"Kirjaudu ulos"}},assignments:{message_removed_account:{en:"This student account was removed from all schools and is considered as frozen. No tasks will be assigned to this account in future.",fi:"Poistettu+"},message_failed_assignments:{en:"Failed to load assignments",fi:"Failed to load assignments"},message_failed_sessions:{en:"Failed to load sessions",fi:"Failed to load sessions"},assignments_title:{en:"Tasks waiting to be completed",fi:"Tehtävät"},assignments_0:{en:"No assigned tasks yet",fi:"Ei tehtäviä"},assignments_start:{en:"Start",fi:"Aloita"},completed_title:{en:"Completed tasks",fi:"Valmiit tehtävät"},completed_0:{en:"No completed tasks yet",fi:"Ei tehtäviä"},completed_col_class:{en:"Class",fi:"Ryhmä"},completed_col_task:{en:"Task",fi:"Tehtävä"},completed_col_wpm:{en:"WPM",fi:"Sanat/Min"},completed_col_date:{en:"Date",fi:"Aika"}},home:{subtitle:{en:"A reading aid for students and teachers",fi:"A reading aid for students and teachers"},request_account:{en:"Request an account",fi:"Request an account"},forgot_password:{en:"Forgot password?",fi:"Unohtanutko salasanasi?"},acc_admin:{en:"an admin",fi:"Admin"},acc_school:{en:"a school",fi:"Koulu"},acc_teacher:{en:"a teacher",fi:"Opettaja"},acc_student:{en:"a student",fi:"Opiskelija"},info_title:{en:function(t){return"As "+t+", you can"},fi:function(t){return t+" saa"}},info_adm_1:{en:"Add and list teachers",fi:"Add and list teachers"},info_adm_2:{en:"Move teachers to other school",fi:"Move teachers to other school"},info_adm_3:{en:"Add and list students",fi:"Add and list students"},info_adm_4:{en:"Move students to other school",fi:"Move students to other school"},info_tch_1:{en:"Add, list, edit and remove instructions",fi:"Add, list, edit and remove instructions"},info_tch_2:{en:"Add, list, edit and remove classes",fi:"Add, list, edit and remove classes"},info_tch_3:{en:"Add, list, edit and remove tasks",fi:"Add, list, edit and remove tasks"},info_tch_4:{en:"Add students to classes, list them and remove",fi:"Add students to classes, list them and remove"},info_tch_5:{en:"Assign tasks to students",fi:"Assign tasks to students"},info_tch_6:{en:"Create visalizations from data of tasks completed by students",fi:"Create visalizations from data of tasks completed by students"},info_std_1:{en:"List tasks assigned to complete",fi:"List tasks assigned to complete"},info_std_2:{en:"Complete assignments",fi:"Complete assignments"},info_std_3:{en:"List completed assignments",fi:"List completed assignments"},manual:{en:"Manual",fi:"Ohjeet"},test_info:{en:"Tested with",fi:"Tested with"},contact_info:{en:"School rectors and teachers, please contact us directly.",fi:"School rectors and teachers, please contact us directly."},contact_uta:{en:"University of Tampere",fi:"Tampereen Yliopisto"},message_password_reset:{en:"Send password reset notification to this email:",fi:"Send password reset notification to this email:"},button_password_reset:{en:"Send",fi:"Send"},ws_err_title:{en:"Communication with gaze tracker is blocked by the browser",fi:"Communication with gaze tracker is blocked by the browser"},ws_err_subtitle:{en:"Please enable the communication and reload the page",fi:"Please enable the communication and reload the page"},ws_unblock_1:{en:["Navigate to","page. Agree to be careful if the browsers asks you to be so."],fi:["Navigate to","page. Agree to be careful if the browsers asks you to be so."]},ws_unblock_2:{en:["Type","in the search box."],fi:["Type","in the search box."]},ws_unblock_3:{en:["If the value of this parameter is",", then double-click on it to change it to","."],fi:["If the value of this parameter is",", then double-click on it to change it to","."]},ws_unblock_4:{en:'(search "how to enable websocket over https" for you browser)',fi:'(search "how to enable websocket over https" for you browser)'}}},o=["en","fi"]},function(t,e,s){"use strict";function n(t){t=t.substr(1);var e=3===t.length?1:2,s=parseInt(o(t.substr(0*e,e),3-e),16),n=parseInt(o(t.substr(1*e,e),3-e),16),i=parseInt(o(t.substr(2*e,e),3-e),16),a=255-s,r=255-n,l=255-i,c=Math.min(a,r,l);return a=(a-c)/(255-c),r=(r-c)/(255-c),l=(l-c)/(255-c),{c:a,m:r,y:l,k:c/255}}function i(t){var e=t.c*(1-t.k)+t.k,s=t.m*(1-t.k)+t.k,n=t.y*(1-t.k)+t.k;return e=Math.round(255*(1-e)+.5),s=Math.round(255*(1-s)+.5),n=Math.round(255*(1-n)+.5),"#"+a(e)+a(s)+a(n)}function a(t,e){var s=Number(t).toString(16);for(e=e||0===e?e:2;s.length<e;)s="0"+s;return s}function o(t,e){for(var s="",n=0;n<e;n+=1)s+=t;return s}function r(t){var e=t.toString(16);return 1===e.length?"0"+e:e}function l(t,e,s,n){return{hex:"#"+r(t)+r(e)+r(s),a:void 0===n?1:n}}var c=s(100),u=s.n(c),d=s(0),h=s.n(d),f=s(1),p=s.n(f),m=["#5DA5DA","#FAA43A","#60BD68","#F17CB0","#B2912F","#B276B2","#DECF3F","#4D4D4D","#F15854"],v=function(){function t(){h()(this,t)}return p()(t,null,[{key:"mix",value:function(t){for(var e=0,s=0,a=0,o=0,r=0,l=0;l<t.length;l+=1){var c=n(t[l].color),u=t[l].weight;e+=c.c*u,s+=c.m*u,a+=c.y*u,o+=c.k*u,r+=u}return i({c:e/r,m:s/r,y:a/r,k:o/r})}},{key:"rgb2rgba",value:function(t,e){var s=n(t),i=s.c*(1-s.k)+s.k,a=s.m*(1-s.k)+s.k,o=s.y*(1-s.k)+s.k;return i=Math.round(255*(1-i)),a=Math.round(255*(1-a)),o=Math.round(255*(1-o)),"rgba("+i+","+a+","+o+","+e+")"}},{key:"validateColor",value:function(t){if("#"!==t[0])return"#000000";if(7===t.length)return t;if(4===t.length){var e=t[1],s=t[2],n=t[3];return"#"+e+e+s+s+n+n}return"#000000"}},{key:"cssColorToHex",value:function(t){var e=/^\D+(\d+)\D+(\d+)\D+(\d+)\D*(\d|.+)\D+$/gim,s=e.exec(t);return l(parseInt(s[1]),parseInt(s[2]),parseInt(s[3]),s[4]?parseFloat(s[4]):void 0)}},{key:"hexToRgba",value:function(t,e){return"rgba("+u()(t.substr(1,2),16)+","+u()(t.substr(3,2),16)+","+u()(t.substr(5,2),16)+","+e+")"}},{key:"colors",get:function(){return m}}]),t}();e.a=v},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=(s(51),s(74),s(20),s(48),s(4),s(57),function t(e,s){i()(this,t),this.student=e.student,this.session=e.ref,this.task=e.task,this.cls=e.cls,this.data=s.find(function(t){return t.id===e.ref.data})});e.a=a},function(t,e,s){"use strict";function n(t,e){var s=0;return t.focusing&&t.focusing.duration>h&&(s=(t.focusing.duration-h)/(e-h)),s}function i(t,e){var s=0;return t.reading&&t.reading.charSpeed>0&&(s=1-t.reading.charSpeed/e),s}function a(t,e){var s=0;return t.focusing&&t.focusing.count>0&&(s=1-t.focusing.count/e),s}var o=s(0),r=s.n(o),l=s(1),c=s.n(l),u=s(35),d=s.n(u),h=100,f={NONE:"none",DURATION:"duration",CHAR_SPEED:"char speed",FOCUS_COUNT:"focus count"},p=new d.a;p.set(f.NONE,function(){return 0}),p.set(f.DURATION,n),p.set(f.CHAR_SPEED,i),p.set(f.FOCUS_COUNT,a);var m=function(){function t(){r()(this,t)}return c()(t,null,[{key:"computeRange",value:function(e,s){var n=0;return s===t.Type.NONE?n:(e.forEach(function(e){if(e.focusing){e.reading={charSpeed:1e3*e.text.length/e.focusing.duration,syllableSpeed:1e3*e.text.length/2.5/e.focusing.duration};var i=0;switch(s){case t.Type.DURATION:i=e.focusing.duration;break;case t.Type.CHAR_SPEED:i=e.reading.charSpeed;break;case t.Type.FOCUS_COUNT:i=e.focusing.count}n<i&&(n=i)}}),n)}},{key:"getAlpha",value:function(t,e,s){return p.get(e)(t,s)}},{key:"Type",get:function(){return f}},{key:"Types",get:function(){var t=[];for(var e in f)t.push(f[e]);return t}}]),t}();e.a=m},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=s(42),l=(s(71),s(33),{}),c=function(){function t(){i()(this,t)}return o()(t,null,[{key:"initializeSettings",value:function(){var t=void 0;return t=new SGWM.FixationProcessorSettings,l.FixationProcessorSettings=t,t.isInitialized||(t.location.enabled=!0,t.location.marginX=290,t.location.marginY=290,t.duration.enabled=!1,t.save()),t=new SGWM.SplitToProgressionsSettings,l.SplitToProgressionsSettings=t,t.isInitialized||(t.bounds={left:-.5,right:8,verticalChar:2,verticalLine:.6},t.angle=Math.sin(15*Math.PI/180),t.save()),t=new SGWM.ProgressionMergerSettings,l.ProgressionMergerSettings=t,t.isInitialized||(t.minLongSetLength=3,t.fitThreshold=.14,t.maxLinearGradient=.15,t.removeSingleFixationLines=!1,t.correctForEmptyLines=!0,t.currentLineSupportInCorrection=.15,t.emptyLineDetectorFactor=1.6,t.intelligentFirstLineMapping=!0,t.save()),t=new SGWM.WordMapperSettings,l.WordMapperSettings=t,t.isInitialized||(t.wordCharSkipStart=3,t.wordCharSkipEnd=6,t.scalingDiffLimit=.9,t.rescaleFixationX=!1,t.partialLengthMaxWordLength=2,t.effectiveLengthFactor=.7,t.ignoreTransitions=!1,t.save()),l}},{key:"createOptions",value:function(){return new r.b({id:"_sgwm",title:"Data mapping",options:r.a.createOptions([new r.b({title:"Fixation processing",options:r.a.createOptions({"FixationProcessorSettings.location.enabled":new r.c({type:Boolean,label:"By location"}),"FixationProcessorSettings.location.marginX":new r.c({type:Number,step:10,label:"\tmargin X, px"}),"FixationProcessorSettings.location.marginY":new r.c({type:Number,label:"\tmargin Y, px"}),"FixationProcessorSettings.duration.enabled":new r.c({type:Boolean,label:"By duration"}),"FixationProcessorSettings.duration.mergingDurationThreshold":new r.c({type:Number,label:"\tmerging threshold, ms"}),"FixationProcessorSettings.duration.mergingDistanceThreshold":new r.c({type:Number,label:"\tmerging distance, px"}),"FixationProcessorSettings.duration.removingDurationThreshold":new r.c({type:Number,label:"\tmin duration, ms"})}),defaults:r.a.createDefaults(l.FixationProcessorSettings,["location","duration"],"FixationProcessorSettings")}),new r.b({title:"Splitter",options:r.a.createOptions({"SplitToProgressionsSettings.bounds.left":new r.c({type:Number,step:.1,label:"Left margin, chars"}),"SplitToProgressionsSettings.bounds.right":new r.c({type:Number,step:.1,label:"Right margin, chars"}),"SplitToProgressionsSettings.bounds.verticalChar":new r.c({type:Number,step:.1,label:"Vertical margin, chars"}),"SplitToProgressionsSettings.bounds.verticalLine":new r.c({type:Number,step:.1,label:"Vertical margin, lines"}),"SplitToProgressionsSettings.angle":new r.c({type:Number,step:.1,label:"Max incline, rad"})}),defaults:r.a.createDefaults(l.SplitToProgressionsSettings,["bounds","angle"],"SplitToProgressionsSettings")}),new r.b({title:"Merger",options:r.a.createOptions({"ProgressionMergerSettings.minLongSetLength":new r.c({type:Number,label:"Shortest progression, fixations"}),"ProgressionMergerSettings.fitThreshold":new r.c({type:Number,step:.01,label:"Line separation threshold, lines"}),"ProgressionMergerSettings.maxLinearGradient":new r.c({type:Number,step:.01,label:"Max line incline, rad"}),"ProgressionMergerSettings.removeSingleFixationLines":new r.c({type:Boolean,label:"Remove unmerged single fixations"}),"ProgressionMergerSettings.correctForEmptyLines":new r.c({type:Boolean,label:"Account for empty lines"}),"ProgressionMergerSettings.currentLineSupportInCorrection":new r.c({type:Number,step:.05,label:"\tsupport current line by"}),"ProgressionMergerSettings.emptyLineDetectorFactor":new r.c({type:Number,step:.05,label:"\tempty line factor, lines"}),"ProgressionMergerSettings.intelligentFirstLineMapping":new r.c({type:Boolean,label:"Intelligent first reading line search"})}),defaults:r.a.createDefaults(l.ProgressionMergerSettings,["minLongSetLength","fitThreshold","maxLinearGradient","removeSingleFixationLines","correctForEmptyLines","currentLineSupportInCorrection","emptyLineDetectorFactor","intelligentFirstLineMapping"],"ProgressionMergerSettings")}),new r.b({title:"Word mapper",options:r.a.createOptions({"WordMapperSettings.wordCharSkipStart":new r.c({type:Number,label:"Skip from start, chars"}),"WordMapperSettings.wordCharSkipEnd":new r.c({type:Number,label:"Skip from end, chars"}),"WordMapperSettings.scalingDiffLimit":new r.c({type:Number,step:.1,label:"Scaling diff limit"}),"WordMapperSettings.rescaleFixationX":new r.c({type:Boolean,label:"Rescale fixations horizontally"}),"WordMapperSettings.partialLengthMaxWordLength":new r.c({type:Number,label:"\tshort word, chars"}),"WordMapperSettings.effectiveLengthFactor":new r.c({type:Number,step:.1,label:"\tlimit to"}),"WordMapperSettings.ignoreTransitions":new r.c({type:Boolean,label:"Ignore transitions"})}),defaults:r.a.createDefaults(l.WordMapperSettings,["wordCharSkipStart","wordCharSkipEnd","scalingDiffLimit","rescaleFixationX","partialLengthMaxWordLength","effectiveLengthFactor","ignoreTransitions"],"WordMapperSettings")})],l)})}},{key:"save",value:function(){for(var t in l){l[t].save()}}},{key:"map",value:function(t){var e={fixations:t.fixations,words:t.text.map(function(t){return{id:t.id,x:t.rect.x,y:t.rect.y,width:t.rect.width,height:t.rect.height,text:t.text}})};return(new SGWM).map(e)}},{key:"settings",get:function(){return l}}]),t}();e.a=c},,,,,,,,,,,,,,,,,,,,,function(t,e,s){s(341);var n=s(2)(s(197),s(428),"data-v-948d5b90",null);t.exports=n.exports},function(t,e,s){"use strict";e.a={methods:{makeFullscreen:function(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},closeFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},onFullscreenChanges:function(t){var e=function(e){return document.fullscreenElement?t(!!document.fullscreenElement):document.mozFullScreenEnabled?t(!!document.mozFullScreenEnabled):document.webkitFullscreenEnabled?t(!!document.webkitFullscreenEnabled):document.msFullscreenEnabled?t(!!document.msFullscreenEnabled):void 0};void 0!==document.onfullscreenchange?document.onfullscreenchange=e:void 0!==document.onmozfullscreenchange?document.onmozfullscreenchange=e:void 0!==document.onwebkitfullscreenchange?document.onwebkitfullscreenchange=e:void 0!==document.onmsfullscreenchange&&(document.onmsfullscreenchange=e)}}}},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=function(){function t(e,s,n,a){i()(this,t),this.color=e,this.size=s,this.style=n,this.weight=a}return o()(t,null,[{key:"fromEl",value:function(e){var s=window.getComputedStyle(e);return new t(s.color,s.fontSize,s.fontStyle,s.fontWeight)}}]),t}();e.a=r},function(t,e,s){"use strict";var n=s(7),i=s.n(n),a=s(0),o=s.n(a),r=s(10),l=s.n(r),c=s(9),u=s.n(c),d=s(89),h=function(t){function e(t){o()(this,e);var s=l()(this,(e.__proto__||i()(e)).call(this,t));return s.hyphen=t.hyphen,s.mode=t.mode,s.temporary=t.temporary,s.exceptions={},s}return u()(e,t),e}(d.a);e.a=h},function(t,e,s){"use strict";var n=s(75),i=s.n(n),a=s(35),o=s.n(a),r=s(0),l=s.n(r),c=s(1),u=s.n(c),d=s(6),h=s(58),f=s(124),p=s(93),m=(s(6),s(91),function(){function t(e,s){l()(this,t),this._syllabifier=new h.a(e),this._speaker=new f.a(s),this._events=new EventEmitter,this.timer=null,this.currentWord=null,this.lastFocusedWord=null,this.words=null}return u()(t,[{key:"cleanup",value:function(){this.currentWord&&(this.currentWord.classList.remove("currentWord"),this.currentWord=null),this.lastFocusedWord=null,clearTimeout(this.timer),this.timer=null,this.words=null}},{key:"init",value:function(){var t=this;this.words=new o.a,(this._syllabifier.enabled||this._speaker.enabled)&&(this.timer=setInterval(function(){t._tick()},30))}},{key:"reset",value:function(t){t&&(this._syllabifier.setAvgWordReadingDuration(t),this._speaker.setAvgWordReadingDuration(t)),this.words=new o.a,this.currentWord=null,this.lastFocusedWord=null}},{key:"setFocusedWord",value:function(t){if(this.currentWord!==t&&(this.currentWord=t,t)){if(this.words.has(t)){var e=this.words.get(t);this.currentWord!==this.lastFocusedWord&&(e.focusRecorded=!1);var s=window.performance.now();s-e.lastSample>1e3&&e.entries++,e.lastSample=s}else this.words.set(t,new p.a(t));this.lastFocusedWord=t}return this.currentWord?this.words.get(this.currentWord).word:null}},{key:"_tick",value:function(){var t=!0,e=!1,s=void 0;try{for(var n,a=i()(this.words.keys());!(t=(n=a.next()).done);t=!0){var o=n.value,r=this.words.get(o);r.accumulatedTime=Math.max(0,r.accumulatedTime+(o===this.currentWord?30:-30)),r.accumulatedTime>150&&!r.focusRecorded&&(r.focusRecorded=!0,r.focusCount++),this._syllabifier.inspect(o,r)&&this._events.emitEvent("syllabified",[o]),this._speaker.inspect(o,r)&&this._events.emitEvent("pronounced",[o])}}catch(t){e=!0,s=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw s}}}},{key:"syllabifier",get:function(){return this._syllabifier}},{key:"speaker",get:function(){return this._speaker}},{key:"events",get:function(){return this._events}},{key:"setup",get:function(){return new d.b(this._speaker.setup,this._syllabifier.setup)}}]),t}());e.a=m},function(t,e,s){"use strict";var n=s(43),i=s.n(n),a=s(61),o=s.n(a),r=s(0),l=s.n(r),c=s(1),u=s.n(c),d=s(91),h=(s(93),s(6),function(){function t(e){l()(this,t),this._options=o()({},e),this._options.threshold.factor=4,this.voice=f[this._options.language]}return u()(t,[{key:"inspect",value:function(t,e){if(!this.voice)return!1;var s=this._options.threshold.value;return this._options.threshold.adjustForWordLength&&(s*=Math.max(1,1+.05*(e.word.length-7))),!e.pronounced&&e.accumulatedTime>s&&(e.pronounced=!0,this.voice(e.word),!0)}},{key:"say",value:function(t){this.voice&&this.voice(t)}},{key:"setAvgWordReadingDuration",value:function(t){if(this._options.threshold.smart&&t){var e=this._options.threshold;e.value=Math.max(e.min,Math.min(e.max,t*e.factor))}}},{key:"enabled",get:function(){return!!this.voice}},{key:"setup",get:function(){return new d.a(o()({},this._options,{enabled:!!this.voice}))}}],[{key:"LANGS",get:function(){return i()(f)}}]),t}());e.a=h;var f={Finnish:function(t){responsiveVoice.speak(t,"Finnish Female")},English:function(t){responsiveVoice.speak(t,"US English Female")}}},function(t,e,s){"use strict";var n=s(34),i=s.n(n),a=s(35),o=s.n(a),r=s(99),l=s.n(r),c=s(100),u=s.n(c),d=s(0),h=s.n(d),f=s(1),p=s.n(f),m=s(92),v=(s(5),s(58),["light","dark"]),g=["bold","b","bolder","normal","n","lighter"],_=["regular=normal","r","italic","i"],b=function(){function t(e,s,n,i){if(h()(this,t),this._container=n,this._syllabifier=i,this._pages=e.pages,this._hasInstructionPage=!(!s||!s.length),this._hasInstructionPage){var a=new m.a(-1);a.lines=s,this._pages.unshift(a)}"left"===e.alignment&&this._container.classList.add("alignLeft"),e.fontname&&(this._container.style.fontFamily='"'+e.fontname+'", Calibri, sans-serif'),this._pageIndex=-1}return p()(t,[{key:"nextPage",value:function(){var t=this._pageIndex+1;t>=this._pages.length||(this._pageIndex=t,this._createLines(this._container))}},{key:"prevPage",value:function(){var t=this._pageIndex-1;t<0||(this._pageIndex=t,this._createLines(this._container))}},{key:"_createLines",value:function(t){var e=this;t.innerHTML="";var s=this._pages[this._pageIndex],n=void 0;n="lines"in s?s.lines:s,n.forEach(function(s){t.appendChild(e._lineToElement(s))}),this._splitText()}},{key:"_lineToElement",value:function(t){var e=this._parseStyles(t),s=document.createElement("div");return s.innerHTML=e,s.classList.add("line"),s}},{key:"_parseStyles",value:function(t){function e(){return s.apply(void 0,Array.prototype.slice.call(arguments).concat([!0]))}function s(t,e,s,n,i,a,o){var r=e,c=n,d=[],h=[];c.split(",").forEach(function(t){var e=u()(t),s=!l()(e);v.includes(t)?h.push(t):g.includes(t)||0===(s&&e%100)?(1===t.length&&(t=g[g.indexOf(t)-1]),d.push("font-weight:"+t+" !important")):_.includes(t)?(1===t.length&&(t=_[_.indexOf(t)-1]),t.indexOf("=")>=0&&(t=t.split("=")[1]),d.push("font-style:"+t+" !important")):d.push((s?"font-size:":"color:")+t)});var f=o?" ":"";return'<span class="'+h.join(" ")+'" style="'+d.join(";")+'">'+f+r+"</span>"+f}return t.replace(/(\S+)(\|)([\w,#]+)\b/g,e).replace(/^(.+)(\s\|)([\w,#]+)$/gm,s)}},{key:"_splitText",value:function(){for(var t=/[^\s]+/gi,e=document.createNodeIterator(this._container,NodeFilter.SHOW_TEXT,{acceptNode:function(t){return/^\s*$/.test(t.nodeValue)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),s=void 0,n=0,i=[];s=e.nextNode();){for(var a=void 0,o=0,r=document.createDocumentFragment();null!==(a=t.exec(s.textContent));){if(o<a.index){var l=document.createTextNode(s.textContent.substring(o,a.index));r.appendChild(l)}var c=this._syllabifier.prepareWord(a[0]),u=document.createElement("span");u.classList.add("word"),u.dataset.wordId=n+++"",u.innerHTML=c,r.appendChild(u),o=t.lastIndex}i.push({node:s,docFrag:r})}i.forEach(function(t){t.node.parentNode.replaceChild(t.docFrag,t.node)})}},{key:"page",get:function(){return this._pageIndex}},{key:"originalPageIndex",get:function(){return this._hasInstructionPage?this._pageIndex-1:this._pageIndex}},{key:"isInstructionPage",get:function(){return 0===this._pageIndex&&this._hasInstructionPage}},{key:"hasNextPage",get:function(){return this._pageIndex+1<this._pages.length}},{key:"hasPrevPage",get:function(){return this._pageIndex-1>=0}},{key:"words",get:function(){var t=this,e=new o.a,s=document.querySelectorAll(".word");return i()(s).forEach(function(s){e.set(s,t._syllabifier.unprepare(s.textContent))}),e}}]),t}();e.a=b},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=function t(e){var s=e.id,n=void 0===s?"":s,a=e.text,o=void 0===a?"":a,r=e.selected,l=void 0!==r&&r,c=e.group,u=void 0===c?"":c;i()(this,t),this.id=n,this.text=o,this.selected=!!l,this.group=u};e.a=a},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=function t(e){i()(this,t),this.student=e.student,this.session=e.session,this.grade=e.grade};e.a=a},function(t,e,s){"use strict";s.d(e,"a",function(){return g});var n=s(234),i=s.n(n),a=s(28),o=s.n(a),r=s(0),l=s.n(r),c=s(1),u=s.n(c),d=s(58),h=s(97),f=s(95),p=(s(121),s(6),s(72),["rgba(255,0,0,0.5","rgba(255,255,0,0.5","rgba(0,255,0,0.5","rgba(0,255,224,0.5","rgba(0,128,255,0.5","rgba(255,0,255,0.5"]),m=String.fromCharCode(10003),v=String.fromCharCode(9888),g=function(){function t(e,s){l()(this,t),this._width=document.body.offsetWidth,this._height=parseInt(window.getComputedStyle(e).height),e.setAttribute("width",this._width+""),e.setAttribute("height",this._height+""),this._offsetX=0,this._offsetY=0,this._font=null,this._syllabifier=new d.a(s.syllab),this._ctx=e.getContext("2d"),this.clean()}return u()(t,[{key:"clean",value:function(){this._ctx.clearRect(0,0,this._width,this._height)}},{key:"setFont",value:function(t){this._font=t,this._ctx.font=t.style+" "+t.weight+" "+t.size+" "+t.family}},{key:"drawWords",value:function(t,e){var s=this,n=h.a.computeRange(t,e.colorMetric);t.forEach(function(t){var i=o()({alpha:h.a.getAlpha(t,e.colorMetric,n)},e);s._drawWord(t,i)})}},{key:"drawSyllabifications",value:function(t,e){var s=this;t.forEach(function(t){s.drawSyllabification(t,e)})}},{key:"drawSyllabification",value:function(t,e){var s=this._ctx;s.textAlign="start",s.textBaseline="alphabetic";var n=t.rect,i=e.isSyllabified?this._syllabifier.syllabifyWord(t.text,e.hyphen):t.text,a=this._offset(n),o=a.x,r=a.y;s.fillStyle=e.background,s.fillRect(o,r,n.width,n.height),this._autoAdjustFontSize(n.width,t.text);var l=this._offset(n,{dy:.8*n.height}),o=l.x,r=l.y;s.fillStyle=e.wordColor,s.fillText(i,o,r)}},{key:"drawFixations",value:function(t,e){var s=this,n=void 0;t.forEach(function(t){t.x<=0&&t.y<=0||(e.showSaccades&&n&&s._drawSaccade(n,t,e),e.showConnections&&t.word&&s._drawConnection(t,{x:(t.word.left+t.word.right)/2,y:t.word.bottom},{left:t.word.left,right:t.word.right,y:t.word.bottom},e),s._drawFixation(t,e),n=t)})}},{key:"drawNames",value:function(t,e){var s=this._ctx;t.forEach(function(t,n){s.textAlign="left",s.textBaseline="top",s.fillStyle=t.color,s.font="bold "+e.fontSize+"px "+e.fontFamily;var i={x:e.location.x+e.fontSize,y:e.location.y+e.nameSpacing*e.fontSize*n};s.fillText(t.text,i.x,i.y)})}},{key:"checkName",value:function(t,e){var s=this._ctx;s.textAlign="left",s.textBaseline="top",s.strokeStyle="#000",s.fillStyle=t.color;var n="no data"===e.reason,i=n?"Segoe UI":e.fontFamily;s.font="bold "+e.fontSize+"px "+i;var a={x:e.location.x,y:e.location.y+e.nameSpacing*e.fontSize*t.index};s.fillText(n?v:m,a.x,a.y)}},{key:"setScreenSize",value:function(t){this._offsetX=(this._width-t.width)/2,this._offsetY=(this._height-t.height)/2}},{key:"_offset",value:function(t){var e=t.x,s=void 0===e?0:e,n=t.y,i=void 0===n?0:n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{dx:0,dy:0},o=a.dx,r=void 0===o?0:o,l=a.dy,c=void 0===l?0:l;return{x:s+this._offsetX+r,y:i+this._offsetY+c}}},{key:"_autoAdjustFontSize",value:function(t,e){var s=e;if(s.font){var n=s.font;this._ctx.font=n.style+" "+n.weight+" "+n.size+" "+this._font.family}else{var i=s.text?s.text:e,a=this._font;this._ctx.font=a.style+" "+a.weight+" "+a.size+" "+a.family;var o=this._ctx.measureText(i),r=t/o.width,l=/(\d+)(\w+)/.exec(a.size),c=(parseFloat(l[1])*r).toFixed(2)+l[2];this._ctx.font=a.style+" "+a.weight+" "+c+" "+this._font.family}}},{key:"_drawWord",value:function(t,e){var s=this._ctx,n=t.rect;this._autoAdjustFontSize(n.width,t);var a=this._offset(n,{dy:.8*n.height}),o=a.x,r=a.y;s.textAlign="start",s.textBaseline="alphabetic",s.fillStyle=t.font?t.font.color:e.wordColor,s.fillText(t.text,o,r),e.alpha>0&&(s.fillStyle=f.a.rgb2rgba("#A06",e.alpha),s.fillText(t.text,o,r)),s.fillStyle="#fff";var l=d.a.getPrefixAndSuffix(t.text,e.hyphen),c=i()(l,2),u=c[0],h=c[1];if(u&&s.fillText(u,o,r),h){var p=this._offset(n,{dx:n.width,dy:.8*n.height}),m=p.x,v=p.y;s.textAlign="end",s.fillText(h,m,v)}if(e.drawWordFrame){var g=this._offset(n),_=g.x,b=g.y;s.strokeStyle=e.wordRectColor,s.lineWidth=1,s.strokeRect(_,b,n.width,n.height)}}},{key:"_drawSaccade",value:function(t,e,s){var n=this._ctx;n.strokeStyle=e.isRegression?s.regressionColor:s.saccadeColor,n.beginPath();var i=this._offset(t),a=i.x,o=i.y;n.moveTo(a,o);var r=this._offset(e),a=r.x,o=r.y;n.lineTo(a,o),n.stroke()}},{key:"_drawConnection",value:function(t,e,s,n){var i=this._ctx;i.strokeStyle=n.connectionColor,i.beginPath();var a=this._offset(t),o=a.x,r=a.y;i.moveTo(o,r);var l=this._offset(e),o=l.x,r=l.y;i.lineTo(o,r),i.stroke(),i.strokeStyle=n.connectionColor,i.lineWidth=2,i.beginPath();var c=this._offset({x:s.left,y:s.y}),o=c.x,r=c.y;i.moveTo(o,r);var u=this._offset({x:s.right,y:s.y}),o=u.x,r=u.y;i.lineTo(o,r),i.stroke()}},{key:"_drawFixation",value:function(t,e){var s=this._ctx;void 0!==t.line?s.fillStyle=p[t.line%p.length]:s.fillStyle="rgba(0,0,0,0.5)";var n=Math.round(Math.sqrt(t.duration))/2,i=this._offset(t),a=i.x,o=i.y;s.beginPath(),s.arc(a,o,n,0,2*Math.PI),s.fill(),t.isRegression&&(s.strokeStyle=e.regressionColor,s.stroke()),t.merged&&(s.strokeStyle="#808",s.lineWidth=3,s.beginPath(),s.arc(a,o,n+3,0,2*Math.PI),s.stroke(),s.lineWidth=1)}},{key:"offset",get:function(){return{x:this._offsetX,y:this._offsetY}}}]),t}()},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=function(){function t(){i()(this,t)}return o()(t,null,[{key:"compute",value:function(t){var e=0,s=-1,n=-1,i=!0;return t.forEach(function(t){if(!t.word)return s=-1,n=-1,void(i=!0);t.word.id-s<0&&n===t.line?(t.isRegression=!0,i&&e++,i=!1):i=!0,s=t.word.id,n=t.line}),e}}]),t}();e.a=r},,,,,,,,,,,,,,,,,,,,,,,function(t,e,s){s(313);var n=s(2)(s(183),s(402),"data-v-3f92b272",null);t.exports=n.exports},function(t,e,s){s(345);var n=s(2)(s(188),s(433),"data-v-d0862f26",null);t.exports=n.exports},function(t,e,s){s(319),s(318);var n=s(2)(s(199),s(407),"data-v-565edc6d",null);t.exports=n.exports},,,function(t,e,s){function n(t){return s(i(t))}function i(t){var e=a[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var a={"./db.development.js":209,"./db.production.js":210};n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id=157},function(t,e,s){"use strict";var n=s(40),i=s(155),a=s(356),o=s.n(a),r=s(359),l=s.n(r),c=s(361),u=s.n(c),d=s(360),h=s.n(d),f=s(357),p=s.n(f),m=s(355),v=s.n(m),g=s(358),_=s.n(g),b=s(354),y=s.n(b),k=s(353),x=s.n(k);n.a.use(i.a),e.a=new i.a({routes:[{path:"/",component:o.a},{path:"/schools",component:l.a},{path:"/teachers",component:u.a},{path:"/students",component:h.a},{path:"/instructions",component:p.a},{path:"/classes",component:v.a},{path:"/results",component:_.a},{path:"/assignments",component:y.a},{path:"/assignment/:id",component:x.a}],base:"/silko-dev/",linkActiveClass:"is-active",mode:"history"})},function(t,e,s){s(340);var n=s(2)(s(160),s(427),"data-v-93315f94",null);t.exports=n.exports},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(352),i=s.n(n),a=s(19),o=s(60);e.default={name:"app",components:{navbar:i.a},data:function(){return{isLoggedIn:!!o.a.user}},created:function(){var t=this;console.log("App component created"),a.a.$on("logout",function(){t.isLoggedIn=!1}),a.a.$on("login",function(){t.isLoggedIn=!0})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(19),i=s(60),a=s(94);s(32);e.default={name:"navbar",data:function(){return{user:null,langs:a.a,tokens:s.i(a.b)("navbar"),isUsermenuDropped:!1,isUsermenuHover:!1}},methods:{logOut:function(t){i.a.logOut()},updateLanguage:function(t){this.user.prefs.lang=t.target.value,this.user.update(function(t){n.a.$emit("lang")})}},computed:{isAdmin:function(){return!!this.user&&this.user.isAdmin},isSchool:function(){return!!this.user&&this.user.isSchool},isTeacher:function(){return!!this.user&&this.user.isTeacher},isStudent:function(){return!!this.user&&this.user.isStudent},isAssignment:function(){return this.$route.path.indexOf("/assignment/")>=0}},created:function(){var t=this;this.user=i.a.user,n.a.$on("login",function(){t.tokens=s.i(a.b)("navbar"),t.user=i.a.user}),n.a.$on("logout",function(){t.user=null}),n.a.$on("lang",function(){t.tokens=s.i(a.b)("navbar")}),document.addEventListener("click",function(e){t.isUsermenuDropped=!1})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(4),i=s(18),a=s(59),o=s(19),r=s(377),l=s.n(r),c=s(362),u=s.n(c),d=s(365),h=s.n(d),f=s(364),p=s.n(f),m=s(363),v=s.n(m),g=(s(5),s(25),s(155),{calibrate:{},start:{},questionnaire:{},finished:{}});e.default={name:"assignments",components:{"modal-error":l.a,"calib-page":u.a,"start-page":h.a,"questionnaire-page":p.a,"finished-page":v.a},data:function(){return{student:null,task:null,intro:null,state:g.calibrate,isDataSaved:!1,errorText:null,keys:null,questionnaire:null,longGazedWords:[],STATES:g}},computed:{introTexts:function(){return this.intro?this.intro:{}}},methods:{init:function(){var t=this;if(this.student=n.a.instance,this.student){var e=void 0;if(n.a.MULTICLASS){if(!((e=this.$route.params.id)in this.student.assignments))return this.$router.replace("assignments")}else if(!(e=this.student.assignments[this.$route.params.id]))return this.$router.replace("assignments");this.student.loadTask(e,function(e,s){if(e)return void(t.errorText=e);t.task=s}).then(function(e){t.task.getIntro(function(e,s){e?t.errorText=e.message?e.message:e:t.intro=s||new i.a})})}},checkAccess:function(){n.a.isLogged||this.$router.replace("/")},exit:function(t){this.errorText=null,this.$router.replace("/assignments")},calibrate:function(t){t.skip||a.a.calibrate(),this.state=g.start},startPageClosed:function(t){t.finished?this.task.questionnaire&&this.task.questionnaire.length?(this.longGazedWords=t.longGazedWords,this.state=g.questionnaire):this.state=g.finished:t.cancelled&&(this.state=g.calibrate)},gazeDataSaved:function(t){t.err?this.errorText=t.err:(this.keys=t.keys,this.state===g.finished&&this.taskDone()),this.isDataSaved=!0},questionnaireDone:function(t){this.questionnaire=t.questionnaire,this.state=g.finished,this.taskDone()},taskDone:function(){var t=this;if(this.keys){this.questionnaire&&this.student.addQuestionnaire(this.keys.data,this.questionnaire,function(e){e&&(t.errorText=e)});var e=n.a.MULTICLASS?this.task.id:this.task.cls;this.student.taskDone(e,this.keys.session,function(e){e&&(t.errorText=e)})}}},created:function(){var t=this;console.log("Assignment component created"),o.a.$on("logout",function(){t.checkAccess()}),o.a.$on("login",function(){t.init()}),this.checkAccess()},mounted:function(){this.init()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(19),i=s(13),a=s(4),o=s(15),r=s(27),l=s.n(r),c=s(16),u=s.n(c),d=s(94);s(48),s(33),s(20),s(5);e.default={name:"assignments",components:{loading:l.a,"temporal-notification":u.a},mixins:[o.a],data:function(){return{student:null,assignments:null,sessions:null,assignment:"",tokens:s.i(d.b)("assignments")}},filters:{prettifyDate:function(t){return i.a.sessionDate(t)}},methods:{init:function(){this.student=a.a.instance,this.student&&(this.loadAssignments(),this.loadSessions())},loadAssignments:function(){var t=this;this.student.loadAssignments(function(e,s){if(t.assignments=[],e)return t.setError(e,t.tokens.message_failed_assignments);t.assignments=s})},loadSessions:function(){var t=this;this.student.loadSessions(function(e,s){if(t.sessions=[],e)return t.setError(e,t.tokens.message_failed_sessions);t.sessions=s})},checkAccess:function(){a.a.isLogged||this.$router.replace("/")},start:function(t,e){a.a.MULTICLASS?this.$router.replace("/assignment/"+t.task.id):this.$router.replace("/assignment/"+t.cls.id)},getWPM:function(t){var e=t.pages,s=void 0,n=void 0,i=0;if(e.forEach(function(t){!s&&t.fixations&&(s=t),t.fixations&&(n=t,i+=t.text.length)}),!s||!n)return"-";var a=s.fixations[0],o=n.fixations[n.fixations.length-1],r=o.ts+o.duration-a.ts;return(i/(r/6e4)).toFixed(0)}},created:function(){var t=this;console.log("Assignments component created"),n.a.$on("logout",function(){t.checkAccess()}),n.a.$on("login",function(){t.init()}),n.a.$on("lang",function(){t.tokens=s.i(d.b)("assignments")}),this.checkAccess()},mounted:function(){this.init()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(19),i=s(13),a=s(21),o=s(15),r=s(31),l=s(27),c=s.n(l),u=s(16),d=s.n(u),h=s(381),f=s.n(h),p=s(379),m=s.n(p),v=s(69),g=s.n(v);s(20),s(18);e.default={name:"classes",components:{loading:c.a,"temporal-notification":d.a,"task-list":f.a,"student-list":m.a,"remove-warning":g.a},mixins:[o.a,r.a],data:function(){return{teacher:null,newName:"",isCreating:!1,refreshStudents:0,classes:null,intros:[],toDelete:null}},computed:{canCreate:function(){return this.newName.length>2},toDeleteName:function(){return this.toDelete?this.toDelete.name:""}},methods:{init:function(){this.teacher=a.a.instance,this.teacher&&(this.loadClasses(),this.loadIntros())},loadClasses:function(){var t=this;this.teacher.getClasses(function(e,s){if(e)return t.classes=[],t.setError(e,"Failed to load classes");t.classes=s.sort(i.a.byName)})},loadIntros:function(){var t=this;this.teacher.getIntros(function(e,s){if(e)return t.setError(e,"Failed to load introductions");t.intros=s.sort(i.a.byName)})},checkAccess:function(){a.a.isLogged||this.$router.replace("/")},tryToCreate:function(t){var e=this;if(this.canCreate){this.classes.some(function(t){return t.name.toLowerCase()===e.newName.toLowerCase()})?this.setError("A class of this name exists already","Failed to create new class"):this.createClass(this.newName)}},createClass:function(t){var e=this;this.isCreating=!0,this.teacher.createClass(t,function(t,s){e.isCreating=!1,t?e.setError(t,"Failed to create new class"):(e.loadClasses(),e.setSuccess("New class has been created"),e.newName="")})},removeClass:function(t,e){this.toDelete=t},removeWarningClosed:function(t){var e=this;t.confirm&&this.teacher.deleteClass(this.toDelete,function(t){t?e.setError(t,"Failed to delete the class"):e.setSuccess("The class was deleted"),e.loadClasses()}),this.toDelete=null},taskSaved:function(t){t.err?this.setError(t.err,"Failed to save updates"):this.setSuccess("The task was updated")},taskCreated:function(t){t.err?this.setError(t.err,"Failed to create new task"):(this.setSuccess("New task was created"),this.refreshStudents=Math.random())},taskDeleted:function(t){this.refreshStudents=Math.random()}},created:function(){var t=this;console.log("Classes component created"),n.a.$on("logout",function(){t.checkAccess()}),n.a.$on("login",function(){t.init()}),this.checkAccess()},mounted:function(){this.init()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(19),i=s(60),a=s(59),o=s(15),r=s(31),l=s(376),c=s.n(l),u=s(68),d=s.n(u),h=s(16),f=s.n(h),p=s(27),m=s.n(p),v=s(94);s(32),s(24);e.default={name:"home",components:{login:c.a,"modal-container":d.a,"temporal-notification":f.a,loading:m.a},mixins:[o.a,r.a],data:function(){return{showWsSecurityError:!a.a.isWebSocketOK,isConnecting:!0,isLoginVisible:!0,user:null,schools:null,schoolToRegester:null,isGettingEmail:!1,email:"",tokens:s.i(v.b)("home")}},computed:{isAdmin:function(){return this.user&&this.user.isAdmin},isSchool:function(){return this.user&&this.user.isSchool},isTeacher:function(){return this.user&&this.user.isTeacher},isStudent:function(){return this.user&&this.user.isStudent},userTitle:function(){return this.isAdmin?this.tokens.acc_admin:this.isSchool?this.tokens.acc_school:this.isTeacher?this.tokens.acc_teacher:this.isStudent?this.tokens.acc_student:""},isEmailValid:function(){return!this.email||/(.{2,})@(\w{2,}\.\w{2,})/.test(this.email)},isFirefox:function(){return(window.navigator&&window.navigator.userAgent||"").indexOf("Mozilla")>=0}},methods:{register:function(t){this.schools=!0},sendResistrationRequest:function(t){this.closeSelectionBox(null),this.schoolToRegester=t.selected,this.isGettingEmail=!0},remindPassword:function(t){this.isGettingEmail=!0},closeSelectionBox:function(t){this.schools=null},closeEmailBox:function(t){this.isGettingEmail=!1},sendPasswordResetRequest:function(t){var e=this;this.schoolToRegester?(this.setSuccess('The registration request for "'+this.email+'" has been sent.'),this.schoolToRegester=null):i.a.resetPassword(this.email,function(t){t?e.setError(t,'Cannot send the password reset request to "'+e.email+'".'):e.setSuccess('The password reset request has been sent to "'+e.email+'".'),e.email=""}),this.closeEmailBox(null)},passwordResetAppeared:function(t){this.$refs.email.focus()}},created:function(){var t=this;n.a.$on("connected",function(e){t.isConnecting=!1,e.user&&(t.user=e.user)}),n.a.$on("login",function(){t.tokens=s.i(v.b)("home"),t.user=i.a.user,t.isConnecting=!1}),n.a.$on("logout",function(){t.user=null}),n.a.$on("lang",function(){t.tokens=s.i(v.b)("home")}),this.user=i.a.user,this.isConnecting=!i.a.isConnected}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(19),i=s(13),a=s(21),o=s(15),r=s(31),l=s(27),c=s.n(l),u=s(16),d=s.n(u),h=s(68),f=s.n(h),p=s(375),m=s.n(p),v=s(69),g=s.n(v);s(18),s(56);e.default={name:"instructions",components:{loading:c.a,"temporal-notification":d.a,"modal-container":f.a,"intro-editor":m.a,"remove-warning":g.a},mixins:[o.a,r.a],data:function(){return{teacher:null,resetNew:0,isCreating:!1,intros:null,toDelete:null,toEdit:null}},computed:{toDeleteName:function(){return this.toDelete?this.toDelete.name:""}},methods:{init:function(){this.teacher=a.a.instance,this.teacher&&this.loadIntros()},loadIntros:function(){var t=this;this.teacher.getIntros(function(e,s){if(e)return t.intros=[],t.setError(e,"Failed to load introductions");t.intros=s.sort(i.a.byName)})},checkAccess:function(){a.a.isLogged||this.$router.replace("/")},tryToCreate:function(t){this.intros.some(function(e){return e.name.toLowerCase()===t.name.toLowerCase()})?this.setError("An instructions of this name exists already","Failed to create new introduction"):this.createIntro(t)},createIntro:function(t){var e=this;this.isCreating=!0,this.teacher.createIntro(t.name,t.texts,function(t){e.isCreating=!1,t?e.setError(t,"Failed to create new introduction"):(e.loadIntros(),e.setSuccess("New introduction was created"),e.resetNew=Math.random())})},remove:function(t,e){this.toDelete=t},edit:function(t,e){this.toEdit=t},saveEdited:function(t){var e=this;this.toEdit.update(t.name,t.texts,function(t){t?e.setError(t,"Failed to save updates"):e.setSuccess("Updates were saved"),e.loadIntros()}),this.closeEditor(null)},closeEditor:function(t){this.toEdit=null},removeWarningClosed:function(t){var e=this;t.confirm&&this.teacher.deleteIntro(this.toDelete,function(t){t?e.setError(t,"Failed to delete the introduction"):e.setSuccess("The introduction was deleted"),e.loadIntros()}),this.toDelete=null}},created:function(){var t=this;console.log("Instructions component created"),n.a.$on("logout",function(){t.checkAccess()}),n.a.$on("login",function(){t.init()}),this.checkAccess()},mounted:function(){this.init()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(132),i=s.n(n),a=s(0),o=s.n(a),r=s(19),l=s(13),c=s(126),u=s(21),d=s(4),h=s(50),f=s(96),p=s(74),m=s(223),v=s(127),g=s(15),_=s(27),b=s.n(_),y=s(16),k=s.n(y),x=s(68),w=s.n(x),C=s(378),S=s.n(C),E=s(153),T=s.n(E),I=s(368),P=s.n(I),F=s(367),N=s.n(F),A=s(369),D=s.n(A),L=s(374),M=s.n(L),O=s(372),z=s.n(O),R=s(371),$=s.n(R),W=(s(48),s(20),s(51),s(73),function t(e,s){o()(this,t),this.name=e,this.sessions=s});e.default={name:"results",components:{loading:b.a,"temporal-notification":k.a,"modal-container":w.a,"session-editing-box":S.a,"item-selection-box":T.a,"gaze-plot":P.a,durations:N.a,"gaze-replay":D.a,"word-replay":M.a,"students-summary":z.a,"questionnaire-results":$.a},mixins:[g.a],data:function(){return{teacher:null,isLoaded:!1,deferredVisualization:null,editingStudent:null,reloadAfterEditing:!1,gradeWithStudents:null,studentWithSessions:null,visualization:null,classes:null,students:[],VISUALIZATIONS:{gazePlot:"GazePlot",durations:"Durations",gazeReplay:"GazeReplay",wordReplay:"WordReplay",studentsSummary:"StudentsSummary",questionnaireResults:"QuestionnaireResults"}}},computed:{isGazePlot:function(){return!!this.deferredVisualization&&this.deferredVisualization.name===this.VISUALIZATIONS.gazePlot}},methods:{init:function(){var t=this;this.teacher=u.a.instance,this.teacher&&this.loadClasses(function(e){if(e)return t.classes=[],t.setError(e,"Failed to load classes");t.isLoaded=!0})},loadClasses:function(t){var e=this;this.teacher.getClasses(function(s,n){if(s)return t(s);var i=[];n.sort(l.a.byName),n.forEach(function(e){if(e.tasks){var s=[];for(var n in e.tasks)s.push(new p.a(n,e.tasks[n]));var a=new m.a(e,s);i.push(a),a.loadStudents(t)}}),e.classes=i})},checkAccess:function(){u.a.isLogged||this.$router.replace("/")},closeStudentSelectionBox:function(t){this.gradeWithStudents=null,this.deferredVisualization=null},closeSessionSelectionBox:function(t){this.studentWithSessions=null,this.deferredVisualization=null},closeSessionEditingBox:function(t){this.editingStudent=null,this.reloadAfterEditing&&this.init(),this.reloadAfterEditing=!1},editSessions:function(t,e){this.editingStudent=t},selectTaskStudents:function(t,e){this.deferredVisualization=new W(e,t.sessions);var s={text:'Students completed "'+t.name+'"',multiGroup:!0,subitems:[]};t.students.forEach(function(e){e.sessions.forEach(function(n){n.task.id===t.id&&s.subitems.push(new c.a({id:n.ref.id,text:""+l.a.sessionDate(n.ref.date),selected:!1,group:e.ref.name}))})}),this.studentWithSessions=[s]},selectClassStudents:function(t,e){var s=[];t.students.forEach(function(t){s.push.apply(s,i()(t.sessions))}),this.deferredVisualization=new W(e,s);var n={text:'students of "'+t.ref.name+'"',subitems:[]};t.students.forEach(function(t){n.subitems.push(new c.a({id:t.ref.id,text:t.ref.name,selected:!0}))}),this.gradeWithStudents=[n]},selectSession:function(t,e){if(1===t.sessions.length)return void this.visualizeSessions(t.sessions,e,new v.a({student:t.ref.name}));this.deferredVisualization=new W(e,t.sessions);var s={text:"Sessions by "+t.ref.name,subitems:[]};t.sessions.forEach(function(t){s.subitems.push(new c.a({id:t.ref.id,text:""+l.a.sessionDate(t.ref.date),selected:!1,group:t.task.name}))}),this.studentWithSessions=[s]},continueDeferredWithStudents:function(t){var e=this.deferredVisualization.sessions.filter(function(e){return t.subitems[e.student.id]}),s={name:this.gradeWithStudents[0].text,studentCount:this.gradeWithStudents[0].subitems.length};this.visualizeSessions(e,this.deferredVisualization.name,new v.a({student:1===t.subitems.length?t.subitems[0]:null,grade:s})),this.closeStudentSelectionBox(null)},continueDeferredWithSessions:function(t){var e=this.deferredVisualization.sessions.filter(function(e){return t.subitems[e.ref.id]});this.visualizeSessions(e,this.deferredVisualization.name,new v.a({student:1===e.length?e[0].student.name:null,session:1===t.subitems.length?t.subitems[0]:null})),this.closeSessionSelectionBox(null)},sessionDeleted:function(t){this.reloadAfterEditing=!0},visualizeSessions:function(t,e,s){var n=this;if(t&&t.length){var i=t.map(function(t){return t.ref.data});d.a.getData(i,function(i,a){if(i)return n.setError(i,"Failed to load student data");var o=t.map(function(t){return new f.a(t,a)});n.visualization=new h.a(e,o,s)})}},isShowing:function(t){return!!this.visualization&&this.visualization.name===t},closeVisualization:function(t){this.visualization=null}},created:function(){var t=this;console.log("Results component created"),r.a.$on("logout",function(){t.checkAccess()}),r.a.$on("login",function(){t.init()}),this.checkAccess()},mounted:function(){this.init()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(43),i=s.n(n),a=s(19),o=s(13),r=s(47),l=s(24),c=s(15),u=s(31),d=s(27),h=s.n(d),f=s(16),p=s.n(f);e.default={name:"schools",components:{loading:h.a,"temporal-notification":p.a},mixins:[c.a,u.a],data:function(){return{newName:"",newEmail:"",isCreating:!1,schools:null}},computed:{isNewNameValid:function(){return this.newName.trim().length>2},isNewEmailValid:function(){return/(.{2,})@(\w{2,}\.\w{2,})/.test(this.newEmail.trim())},canCreate:function(){return!this.isCreating&&this.isNewNameValid&&this.isNewEmailValid}},methods:{loadSchools:function(){var t=this;l.a.list(function(e,s){if(e)return t.schools=[],t.setError(e,"Failed to load schools");t.schools=s.sort(o.a.byName)})},checkAccess:function(){r.a.isLogged||this.$router.replace("/")},tryToCreate:function(t){var e=this;if(this.canCreate){this.schools.some(function(t){return t.name.toLowerCase()===e.newName.toLowerCase().trim()||t.email.toLowerCase()===e.newEmail.toLowerCase().trim()})?this.setError("A school with this name or email exists already","Failed to add new school"):this.createSchool()}},createSchool:function(){var t=this;this.isCreating=!0,r.a.createSchool(this.newName.trim(),this.newEmail.trim(),function(e){t.isCreating=!1,e?t.setError(e,"Failed to add new school"):(t.newName="",t.newEmail="",t.loadSchools(),t.setSuccess("New school was created"))})}},filters:{count:function(t){return i()(t).length}},created:function(){var t=this;console.log("Schools component created"),a.a.$on("logout",function(){t.checkAccess()}),a.a.$on("login",function(){t.loadSchools()}),this.checkAccess()},mounted:function(){this.loadSchools()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(19),i=s(13),a=s(60),o=s(47),r=s(24),l=s(4),c=s(21),u=s(15),d=s(31),h=s(27),f=s.n(h),p=s(16),m=s.n(p),v=s(69),g=s.n(v);s(20);e.default={name:"students",components:{loading:f.a,"temporal-notification":m.a,"remove-warning":g.a},mixins:[u.a,d.a],data:function(){return{teacher:null,school:null,newName:"",newEmail:"",newPassword:"",newGrade:"",newSchool:"",isCreating:!1,toDelete:null,schools:[],students:null,classes:[]}},computed:{isAdmin:function(){return o.a.isLogged},isNewNameValid:function(){return this.newName.trim().length>2},isNewEmailValid:function(){return this.newEmail.indexOf("@")>0?/(.{2,})@(\w{2,}\.\w{2,})/.test(this.newEmail.trim()):this.newEmail.length>4},isNewPasswordValid:function(){return this.newPassword.length>=6||this.isRealEmail},isNewGradeValid:function(){return!!this.newGrade.trim().length},isSchoolValid:function(){return!o.a.isLogged||!!this.newSchool},isRealEmail:function(){return this.newEmail.indexOf("@")>0&&this.newEmail.indexOf(a.a.DEFAULT_EMAIL_DOMAIN)<0},canCreateStudent:function(){return!this.isCreating&&this.isNewNameValid&&this.isNewEmailValid&&this.isNewPasswordValid&&this.isNewGradeValid&&this.isSchoolValid},schoolItems:function(){return this.schools?this.schools.map(function(t){return{value:t.id,text:t.name}}):[]},toDeleteName:function(){return this.toDelete?this.toDelete.name:""}},methods:{init:function(){var t=this;o.a.isLogged?this.loadSchools().then(function(){t.loadStudents()}):r.a.isLogged?(this.school=r.a.instance,this.loadStudents()):c.a.isLogged&&(this.teacher=c.a.instance,this.loadStudents())},loadSchools:function(){var t=this;return r.a.list(function(e,s){if(e)return t.setError(e,"Failed to load schools");t.schools=s.sort(i.a.byName)})},loadStudents:function(){var t=this,e=function(e,s){if(e)return t.students=[],t.setError(e,"Failed to load students");t.students=s.sort(function(t,e){return t.school!==e.school?t.school>e.school?1:-1:t.grade!==e.grade?t.grade>e.grade?1:-1:t.name.toLowerCase()>e.name.toLowerCase()?1:-1})};this.school?this.school.getStudents(e):this.teacher?this.teacher.getSchool(function(s,n){if(s)return t.setError(s,"Failed to load teacher's school");n.getStudents(e)}):l.a.list(e)},checkAccess:function(){o.a.isLogged||c.a.isLogged||r.a.isLogged||this.$router.replace("/")},tryToCreateStudent:function(t){if(this.canCreateStudent){var e=this.newEmail.trim();e.indexOf("@")<0&&(e+=a.a.DEFAULT_EMAIL_DOMAIN);this.students.some(function(t){return t.email.toLowerCase()===e.toLowerCase()})?this.setError("A student with this email or ID exists already","Failed to add new student"):this.createStudent(e)}},createStudent:function(t){var e=this;this.isCreating=!0;var s=function(t){e.isCreating=!1,t?e.setError(t,"Failed to add new student"):(e.newName="",e.newEmail="",e.newPassword="",e.newGrade="",e.loadStudents(),e.setSuccess("New student was added"))},n=this.isRealEmail?null:this.newPassword,i={name:this.newName.trim(),email:t,password:n,grade:this.newGrade.trim()};this.school?this.school.createStudent(i,s):this.teacher?this.teacher.createStudent(i,s):r.a.get(this.newSchool,function(t,e){if(t)return s(t);e.createStudent(i,s)})},moveStudent:function(t,e){var s=this,n=e.target;o.a.moveStudent(t,n.value,this.schools,function(t){t?s.setError(t,"Failed to move the student to another school"):s.setSuccess("The student was moved to another school")})},getListOfStudentClasses:function(t){var e=[];for(var s in t.classes)e.push(t.classes[s]);return e.join(", ")},remove:function(t){this.toDelete=t},removeWarningClosed:function(t){var e=this;if(t.confirm){var s=this.toDelete;r.a.get(s.school,function(t,n){if(t)return e.setError(t,"Failed to access the student school");n.deleteStudent(s,function(t){t?e.setError(t,"Failed to remove the student from the database"):e.setSuccess("The student was removed"),e.init()})})}this.toDelete=null}},created:function(){var t=this;console.log("Students component created"),n.a.$on("logout",function(){t.checkAccess()}),n.a.$on("login",function(){t.init()}),this.checkAccess()},mounted:function(){this.init()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(19),i=s(13),a=s(47),o=s(24),r=s(21),l=s(15),c=s(31),u=s(27),d=s.n(u),h=s(16),f=s.n(h);e.default={name:"teachers",components:{loading:d.a,"temporal-notification":f.a},mixins:[l.a,c.a],data:function(){return{school:null,newName:"",newEmail:"",newSchool:"",isCreating:!1,schools:[],teachers:null}},computed:{isNewNameValid:function(){return this.newName.trim().length>2},isNewEmailValid:function(){return/(.{2,})@(\w{2,}\.\w{2,})/.test(this.newEmail.trim())},isSchoolValid:function(){return!this.isAdmin||!!this.newSchool},canCreate:function(){return!this.isCreating&&this.isNewNameValid&&this.isNewEmailValid&&this.isSchoolValid},isAdmin:function(){return a.a.isLogged},schoolItems:function(){return this.schools?this.schools.map(function(t){return{value:t.id,text:t.name}}):[]}},methods:{init:function(){var t=this;a.a.isLogged?this.loadSchools().then(function(){t.loadTeachers()}):o.a.isLogged&&(this.school=o.a.instance,this.loadTeachers())},loadSchools:function(){var t=this;return o.a.list(function(e,s){if(e)return t.setError(e,"Failed to load schools");t.schools=s.sort(i.a.byName)})},loadTeachers:function(){var t=this,e=function(e,s){if(e)return t.teachers=[],t.setError(e,"Failed to load teachers");t.teachers=s.sort(function(t,e){return t.school!==e.school?t.school>e.school?1:-1:t.name.toLowerCase()>e.name.toLowerCase()?1:-1})};return this.school?this.school.getTeachers(e):r.a.list(e)},checkAccess:function(){a.a.isLogged||o.a.isLogged||this.$router.replace("/")},tryToCreate:function(t){var e=this;if(this.canCreate){this.teachers.some(function(t){return t.email.toLowerCase()===e.newEmail.toLowerCase().trim()})?this.setError("A teacher with this email exists already","Failed to add a new teacher"):this.createTeacher()}},createTeacher:function(){var t=this;this.isCreating=!0;var e=function(e){t.isCreating=!1,e?t.setError(e,"Failed to add a new teacher"):(t.newName="",t.newEmail="",t.loadTeachers(),t.setSuccess("New teacher was added"))};this.school?this.school.createTeacher(this.newName.trim(),this.newEmail.trim(),e):o.a.get(this.newSchool,function(s,n){if(s)return e(s);n.createTeacher(t.newName.trim(),t.newEmail.trim(),e)})},moveTeacher:function(t,e){var s=this,n=e.target;a.a.moveTeacher(t,n.value,this.schools,function(t){t?s.setError(t,"Failed to move the teacher to another school"):s.setSuccess("The teacher was moved to another school")})},getListOfTeacherClasses:function(t){var e=[];for(var s in t.classes)e.push(t.classes[s]);return e.join(", ")}},created:function(){var t=this;console.log("Teachers component created"),n.a.$on("logout",function(){t.checkAccess()}),n.a.$on("login",function(){t.init()}),this.checkAccess()},mounted:function(){this.init()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(59);s(18);e.default={name:"calib-page",data:function(){return{isConnected:n.a.state.isConnected&&!n.a.state.isTracking&&!n.a.state.isBusy||!1,isETUDConnected:n.a.state.isServiceRunning||!1,isCalibrated:n.a.state.isCalibrated||!1}},props:{texts:{type:Object,required:!0}},computed:{calibInstruction:function(){return this.texts.calibInstruction?this.texts.calibInstruction.split("\n"):[]},titleStart:function(){return this.texts.calibStart||"Start"},titleSkip:function(){return this.texts.calibSkip||"Skip"},titleCancel:function(){return this.texts.startCancel||"Cancel"}},methods:{showETUDOptions:function(t){n.a.showOptions()},reload:function(t){this.$router.replace("/assignments")},calibrate:function(t){this.$emit("close",{skip:!1})},skip:function(t){this.$emit("close",{skip:!0})},cancel:function(t){this.$router.replace("/assignments")}},created:function(){var t=this;n.a.setCallback("stateUpdated","calib",function(e){t.isConnected=e.isConnected&&!e.isTracking&&!e.isBusy,t.isETUDConnected=e.isServiceRunning,t.isCalibrated=e.isCalibrated})},beforeDestroy:function(){n.a.clearCallback("stateUpdated","calib")}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(18);e.default={name:"finished-page",props:{saving:Boolean,texts:n.a},computed:{titleFinished:function(){return this.texts.finished||"Thank you!"}},methods:{back:function(t){this.$router.replace("../assignments")}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(28),i=s.n(n),a=s(25);e.default={name:"questionnaire-page",data:function(){var t=this;return{questionIndex:0,questions:this.questionnaire.map(function(t){return i()({answer:null},t)}).filter(function(e){return e.type===a.a.types.text.name||t.longGazedWords.includes(e.word)})}},props:{questionnaire:{type:Array,required:!0,default:function(){return[]}},longGazedWords:{type:Array,default:function(){return[]}}},computed:{question:function(){return this.questionIndex>=0&&this.questionIndex<this.questions.length?this.questions[this.questionIndex]:null}},methods:{asnwerRevealedClass:function(t){return{"is-success":this.question.answer&&this.question.answer.text===t.text&&t.isCorrect,"is-danger":this.question.answer&&this.question.answer.text===t.text&&!t.isCorrect}},reply:function(t){var e=this;this.question.answer||(this.question.answer=t,window.setTimeout(function(){if(e.questionIndex===e.questions.length-1)return void e.$emit("finished",{questionnaire:e.questions});e.questionIndex++},2e3))}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(61),i=s.n(n),a=s(59),o=s(18),r=s(5),l=s(4),c=s(366),u=s.n(c),d=s(120);e.default={name:"start-page",mixins:[d.a],components:{"task-page":u.a},data:function(){return{isConnected:a.a.state.isConnected&&!a.a.state.isTracking&&!a.a.state.isBusy||!1,isCalibrated:a.a.state.isCalibrated&&!a.a.state.isTracking&&!a.a.state.isBusy||!1,isRunning:a.a.state.isConnected&&a.a.state.isTracking&&!a.a.state.isBusy||!1,isReading:!1,isFullscreen:!1}},props:{texts:{type:o.a,required:!0},task:{type:r.a,required:!0},student:{type:l.a,required:!0}},computed:{startInstruction:function(){return this.texts.startInstruction?this.texts.startInstruction.split("\n"):[]},titleStart:function(){return this.texts.startRun||"Start"},titleCancel:function(){return this.texts.startCancel||"Cancel"}},methods:{start:function(t){this.isReading=!0,this.makeFullscreen(this.$refs.fullscreen),a.a.start()},cancel:function(t){this.$emit("close",{cancelled:!0})},finishedReading:function(t){this.isReading=!1,this.$emit("close",i()({finished:!0},t)),this.closeFullscreen(),a.a.stop()},gazeDataSaved:function(t){this.$emit("saved",t)}},watch:{isRunning:function(t){var e=this;!t&&this.isFullscreen&&this.isReading&&setTimeout(function(){e.closeFullscreen(),e.$router.replace("/assignments")},4e3)}},created:function(){var t=this;a.a.setCallback("stateUpdated","start",function(e){t.isConnected=e.isConnected&&!e.isTracking&&!e.isBusy,t.isCalibrated=e.isCalibrated&&!e.isTracking&&!e.isBusy,t.isRunning=e.isConnected&&e.isTracking&&!e.isBusy}),this.onFullscreenChanges(function(e){t.isFullscreen=e})},beforeDestroy:function(){a.a.clearCallback("stateUpdated","start")}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(154),i=s.n(n),a=s(119),o=s.n(a),r=s(18),l=s(5),c=s(4),u=s(125),d=s(123),h=s(220),f=s(59),p=s(72),m=s(11);s(49),s(40);e.default={name:"task-page",components:{"task-text":i.a,"task-images":o.a},data:function(){return{textPresenter:null,feedbackProvider:null,collector:null,font:null,fixation:{word:null,duration:0},fixationUpdateTimer:0}},props:{texts:{type:r.a,required:!0},task:{type:l.a,required:!0},student:{type:c.a,required:!0}},computed:{hasNextPage:function(){return!!this.textPresenter&&this.textPresenter.hasNextPage},titleNext:function(){return this.texts.next||"Next"},titleFinish:function(){return this.texts.finish||"Finish"},images:function(){return this.textPresenter?this.textPresenter.isInstructionPage?[]:this.task.pages[this.textPresenter.page].images:[]}},methods:{next:function(t){var e=void 0;0===this.textPresenter.page&&this.texts.firstPage&&this.texts.firstPage.length&&(e=this.collector.wordReadingDuration),this.textPresenter.nextPage(),this.collector.nextPage(),this.feedbackProvider.reset(e),f.a.updateTargets()},finish:function(t){var e=this;this.$emit("finished",{longGazedWords:this.collector.longGazedWords(this.task.syllab.threshold.value)}),this.collector.stop(function(t,s){e.$emit("saved",{err:t,keys:s})}),window.clearInterval(this.fixationUpdateTimer),this.fixationUpdateTimer=0},onImageShow:function(t){this.collector.imageShow(t.image)},onImageHide:function(t){this.collector.imageHide(t.image)}},mounted:function(){var t=this,e=this.$refs.container;this.font=p.a.from(e.$data.textStyle),this.feedbackProvider=new d.a(this.task.syllab,this.task.speech),this.feedbackProvider.init();var s=e.$refs.text;this.textPresenter=new u.a(this.task,this.texts.firstPage,s,this.feedbackProvider.syllabifier),this.collector=new h.a(this.task,this.student,this.font,this.feedbackProvider.setup),this.feedbackProvider.events.addListener("syllabified",function(e){return t.collector.syllabified(e)}),this.feedbackProvider.events.addListener("pronounced",function(e){return t.collector.pronounced(e)}),f.a.setCallback("wordFocused","task-page",function(e){var s=null;t.textPresenter.isInstructionPage||(s=t.feedbackProvider.setFocusedWord(e)),t.collector.setFocusedWord(e);var n=e?e.dataset.wordId:"";t.fixation={word:s?new m.b(s,n):null,duration:0}}),f.a.setCallback("wordLeft","task-page",function(e){t.textPresenter.isInstructionPage||t.feedbackProvider.setFocusedWord(null),t.collector.setFocusedWord(null),t.fixation={word:null,duration:0}}),f.a.setCallback("gazePoint","task-page",function(e){t.collector.addGazePoint(e)}),this.collector.start(),this.fixationUpdateTimer=window.setInterval(function(){var e=t.collector.focusedWord;e?t.fixation={word:t.fixation.word,duration:e.duration}:t.fixation.word&&(t.fixation={word:null,duration:0})},25),this.next(null)},beforeDestroy:function(){this.feedbackProvider.cleanup(),f.a.clearCallback("stateUpdated","task-page"),f.a.clearCallback("wordFocused","task-page"),f.a.clearCallback("wordLeft","task-page"),f.a.clearCallback("gazePoint","task-page")}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(28),i=s.n(n),a=s(132),o=s.n(a),r=s(35),l=s.n(r),c=s(231),u=s.n(c),d=s(42),h=s(6),f=s(67),p=s.n(f),m=s(85),v=s.n(m),g=s(50),_=(s(86),s(89),{SECONDS:"seconds",PERCENTAGE:"percentage"}),b={units:_.SECONDS};e.default={name:"durations",components:{"control-panel":p.a,options:v.a},data:function(){return{pageIndex:-1,isOptionsDisplayed:!1,defaultFeedback:this.data.records[0].session.feedbacks,words:[],options:{gazePlot:new d.b({id:"durations",title:"Durations",options:d.a.createOptions({units:new d.c({type:Array,items:u()(_),label:"Units"})},b),defaults:d.a.createDefaults(b)})}}},props:{data:{type:g.a,required:!0}},computed:{textLength:function(){return this.data.records[0].data.pages.length},initialPageIndex:function(){return this.data.records[0].data.pages[0].isIntro?1:0},title:function(){var t=this.data.records[0],e=this.data.params.student?" for "+this.data.params.student:"";return'Word reading durations in "'+t.task.name+'"'+e},feedback:function(){return new h.b(this.defaultFeedback.speech,this.defaultFeedback.syllabification)}},methods:{setPage:function(t){this.pageIndex=t.index,this.makeList()},showOptions:function(t){this.isOptionsDisplayed=!0},close:function(t){this.$emit("close")},applyOptions:function(t){this.makeList()},closeOptions:function(t){this.isOptionsDisplayed=!1},makeList:function(){var t=this,e=new l.a,s=0;this.data.records.forEach(function(n){n.data.pages[t.pageIndex].words.forEach(function(n){s+=t.appendWord(e,n)})});var n=function(t,e){return e[1].focusing.duration-t[1].focusing.duration};this.words=this.compute(new l.a([].concat(o()(e.entries())).sort(n)),s)},appendWord:function(t,e){var s=new RegExp(""+this.defaultFeedback.syllabification.hyphen,"g"),n=Math.floor(e.rect.x/10)+"_"+Math.floor(e.rect.y/10),a=t.get(n);return a?a.focusing.duration+=e.focusing.duration:(a=i()({},e,{focusing:{duration:e.focusing.duration}}),a.text=a.text.replace(s,""),t.set(n,a)),a.focusing.duration},compute:function(t,e){var s=[];return t.forEach(function(t){var n="",i=t.focusing.duration;b.units===_.SECONDS?n=(Math.round(i)/1e3).toFixed(2):b.units===_.PERCENTAGE&&(n=(100*i/e).toFixed(1)+"%"),s.push({text:t.text,value:n})}),s}},mounted:function(){console.log("Durations created"),this.setPage({index:this.initialPageIndex})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(28),i=s.n(n),a=s(13),o=s(152),r=s.n(o),l=s(42),c=s(128),u=s(97),d=s(129),h=s(11),f=(s(87),{colorMetric:u.a.Type.DURATION,saccadeColor:"#08F",regressionColor:"#000",showConnections:!0,showSaccades:!0,showFixations:!0,syllab:{background:"#fce",wordColor:"#060"}});e.default={name:"gaze-plot",mixins:[r.a],data:function(){return{record:this.data.records[0],options:{gazePlot:new l.b({id:"gazePlot",title:"Gaze Plot",options:l.a.createOptions({colorMetric:new l.c({type:Array,items:u.a.Types,label:"Word color metric"}),saccadeColor:new l.c({type:"#",label:"Saccade color"}),regressionColor:new l.c({type:"#",label:"Regressive saccade color"}),showConnections:new l.c({type:Boolean,label:"Show word-fixation connections"}),showSaccades:new l.c({type:Boolean,label:"Show saccades"}),showFixations:new l.c({type:Boolean,label:"Show fixations"}),"syllab.background":new l.c({type:"#",label:"Syllabification background"}),"syllab.wordColor":new l.c({type:"#",label:"Syllabification word color"})},f),defaults:l.a.createDefaults(f)})},painter:null}},computed:{title:function(){return this.record.student.name+' reading "'+this.record.task.name+'" at '+a.a.sessionDate(this.record.session.date)}},methods:{changePage:function(){this.painter||(this.painter=new c.a(this.$refs.canvas,{syllab:this.defaultFeedback.syllabification}),this.painter.setFont(this.record.session.font),this.painter.setScreenSize(this.record.session.screen)),this.mapAndShow(),this.visibleImages=this.currentImages.map(function(t){return h.a.from(t,{ignoreDisplayCondition:!0})})},redraw:function(){this.mapAndShow()},mapAndShow:function(){this.painter.clean();var t=this.currentPages[0],e=t.fixations?this.map(t).fixations:null;e&&d.a.compute(e);var s=this.addGazeInfoToWords(t.text,e);if(this.painter.drawWords(s,i()({colorMetric:f.colorMetric,showConnections:f.showConnections,hyphen:this.defaultFeedback.syllabification.hyphen},this.commonUI)),t.syllabifications&&this.painter.drawSyllabifications(t.syllabifications,i()({isSyllabified:"hyphen"===this.record.session.feedbacks.syllabification.mode,hyphen:this.record.session.feedbacks.syllabification.hyphen},f.syllab)),!t.fixations)return void(this.isWarningMessageVisible=!0);this.isWarningMessageVisible=!1,f.showFixations&&e&&this.painter.drawFixations(e,i()({connectionColor:this.commonUI.wordRectColor},f))},addGazeInfoToWords:function(t,e){var s=[];return t.forEach(function(t){var n={count:0,duration:0};e&&e.forEach(function(e){e.word&&e.word.id===t.id&&(n.count+=1,n.duration+=e.duration)}),s.push(i()({focusing:n},t))}),s}},mounted:function(){console.log("GazePlot created")}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(28),i=s.n(n),a=s(13),o=s(42),r=s(128),l=s(97),c=s(224),u=s(11),d=s(152),h=s.n(d),f=(s(70),{x:2,y:56}),p={colorMetric:l.a.Type.NONE,nameFontFamily:"Calibri, Arial, sans-serif",nameFontSize:18,nameSpacing:1.5,syllab:{background:"#fce",wordColor:"#060"}};e.default={name:"gaze-replay",mixins:[h.a],data:function(){return{options:{gazeReplay:new o.b({id:"gazeReplay",title:"Gaze Replay",options:o.a.createOptions({colorMetric:new o.c({type:Array,items:["none","duration","char speed","syllable speed"],label:"Word color metric"}),nameFontFamily:new o.c({type:String,label:"Name font"}),nameFontSize:new o.c({type:Number,step:1,label:"Name font size"}),nameSpacing:new o.c({type:Number,step:.1,label:"Name spacing"}),"syllab.background":new o.c({type:"#",label:"Syllabification background"}),"syllab.wordColor":new o.c({type:"#",label:"Syllabification word color"})},p),defaults:o.a.createDefaults(p)})},painter:null,tracks:[]}},computed:{title:function(){var t=this.data.records[0],e=this.data.params.student?" for "+this.data.params.student:"";return'Gaze replay in "'+t.task.name+'"'+e}},methods:{restartPlayer:function(t){this.stopAll(),this.start()},togglePlayer:function(t){this.isPlayerPaused=!this.isPlayerPaused,this.tracks.forEach(function(t){return t.togglePause()})},changePage:function(){this.isWarningMessageVisible=!1,this.visibleImages=this.currentImages.filter(function(t){return t.on===u.a.EVENT.none}).map(function(t){return u.a.from(t)}),this.painter||(this.painter=new r.a(this.$refs.canvas,{syllab:this.defaultFeedback.syllabification}),this.painter.setScreenSize(this.data.records[0].session.screen)),this.tracks.length&&(this.stopAll(),this.start())},redraw:function(){this.painter.clean(),this.drawText(),this.drawNames()},createTracks:function(){var t=this;c.a.resetColors();var e={};this.data.records.forEach(function(t){var s=t.student.name;e[s]=void 0!==e[s]}),this.data.records.forEach(function(s){var n=s.student.name;e[n]&&(n=n+" "+a.a.sessionDate(s.session.date)),t.tracks.push(new c.a(t.$refs.root,n,s.data.pages,t.painter.offset))})},stopAll:function(){this.tracks.forEach(function(t){return t.stop()})},start:function(){var t=this;this.isPlayerPaused=!1,this.redraw(),this.tracks.forEach(function(e,s){e.start(t.pageIndex,{fixation:function(e,s){var n=t.currentImages.filter(function(s){return!t.visibleImages.find(function(t){return t.src===s.src})&&s.shown<e.tsSync}),i=t.currentImages.filter(function(s){return!!t.visibleImages.find(function(t){return t.src===s.src})&&s.hidden>0&&s.hidden<e.tsSync});(n.length>0||i.legnth>0)&&(t.visibleImages=t.currentImages.filter(function(t){return t.shown<=e.tsSync&&(!(t.hidden>0)||e.tsSync<t.hidden)}).map(function(t){return u.a.from(t,{ignoreDisplayCondition:!0})}))},completed:function(n){t.isWarningMessageVisible=!!n;var i={color:e.color,index:s,text:""};t.painter.checkName(i,{fontSize:p.nameFontSize,fontFamily:p.nameFontFamily,nameSpacing:p.nameSpacing,location:f,reason:n})},syllabification:function(e){t.painter.setFont(t.defaultSession.font),t.painter.drawSyllabification(e,i()({syllab:i()({},t.defaultSession.feedbacks.syllabification)},t.commonUI,p.syllab))}})})},drawNames:function(){var t=this.tracks.map(function(t){return{text:t.name,color:t.color}});this.painter.drawNames(t,{fontSize:p.nameFontSize,fontFamily:p.nameFontFamily,nameSpacing:p.nameSpacing,location:f})},drawText:function(){this.painter.setFont(this.defaultSession.font),this.painter.drawWords(this.currentPages[0].text,i()({colorMetric:p.colorMetric},this.commonUI,{drawWordFrame:!1}))}},mounted:function(){console.log("GazePlot created"),this.createTracks(),this.start()},beforeDestroy:function(){this.stopAll()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(34),i=s.n(n),a=s(76),o=s.n(a),r=s(52),l=s.n(r),c=s(95),u=s(42),d="silko";e.default={name:"options",data:function(){return{}},props:{values:{type:Object,required:!0}},methods:{close:function(t){t.target===this.$el&&this.$emit("close")},save:function(t){this.saveSettings(),this.update(),this.$emit("apply"),this.$emit("close")},apply:function(t){this.update(),this.$emit("apply")},reset:function(t){window.localStorage.removeItem(d),u.a.restoreDefaults(this.values),this.$emit("apply"),this.$refs.container.innerHTML="",this.bind()},loadSettings:function(){var t=JSON.parse(window.localStorage.getItem(d));if(t){!function t(e,s){for(var n in e){var i=s[n],a=e[n];i&&("object"===(void 0===a?"undefined":l()(a))?t(a,i):"function"==typeof i.ref&&i.ref(a))}}(t,this.values)}},saveSettings:function(){var t={};!function t(e,s){for(var n in s){var i=s[n];"function"==typeof i.ref?e[n]=i.ref():"object"===(void 0===i?"undefined":l()(i))&&(e[n]={},t(e[n],i))}}(t,this.values),window.localStorage.setItem(d,o()(t))},update:function(){for(var t in this.values){var e=this.values[t];"function"==typeof e.update&&e.update()}},show:function(t){var e=this.$refs.container;i()(e.querySelectorAll(".group")).forEach(function(e){var s=e.id;"_"!==s[0]&&t&&0!==s.indexOf(t)?e.classList.add("hidden"):e.classList.remove("hidden")})},bind:function(){var t=this,e=this.$refs.container;for(var s in this.values)!function(s){var n=t.values[s],i=document.createElement("div");i.classList.add("group"),i.id=n.id+"_group";var a=document.createElement("div");if(a.classList.add("name"),a.textContent=n.title,i.appendChild(a),n.options instanceof Array)n.options.forEach(function(e){var s=t.createSubGroup(e,n.id);i.appendChild(s)});else for(var o in n.options){var r=n.options[o],l=t.createRow(r,n.id+"_"+o);i.appendChild(l)}e.appendChild(i)}(s)},createSubGroup:function(t,e){var s=document.createElement("div");s.classList.add("subgroup");var n=document.createElement("div");n.classList.add("subname"),n.textContent=t.title,s.appendChild(n);for(var i in t.options){var a=t.options[i],o=this.createRow(a,e+"_"+i);s.appendChild(o)}return s},createRow:function(t,e){var s=document.createElement("div");s.classList.add("row");var n=document.createElement("div");return n.classList.add("row-label"),n.textContent=t.label,s.appendChild(n),t.type===Array?s.appendChild(this.createSelect(t,e)):t.type===Boolean?s.appendChild(this.createCheckbox(t,e)):t.type===String?s.appendChild(this.createTextInput(t,e)):"#"===t.type?s.appendChild(this.createColorbox(t,e)):t.type===Number&&s.appendChild(this.createNumberInput(t,e)),s},createSelect:function(t,e){var s=document.createElement("select");s.classList.add("value"),s.classList.add(e);var n=t.ref();return t.items.forEach(function(t){var e=document.createElement("option");e.value=t,e.textContent=t,n===t&&(e.selected=!0),s.appendChild(e)}),s.addEventListener("change",function(e){t.ref(t.items[e.target.selectedIndex])}),s},createCheckbox:function(t,e){var s=document.createElement("span"),n=document.createElement("input");n.type="checkbox",n.classList.add(e),n.checked=t.ref(),n.addEventListener("click",function(e){t.ref(e.target.checked)});var i=document.createElement("label"),a=document.createElement("div");return a.textContent="✔",i.appendChild(a),s.appendChild(n),s.appendChild(i),s},createTextInput:function(t,e){var s=document.createElement("input");s.type="text",s.classList.add("value"),s.classList.add(e);var n=t.ref();return s.value=n,s.addEventListener("click",function(e){t.ref(e.target.value)}),s},createColorbox:function(t,e){var s=document.createElement("input");s.type="color",s.classList.add("value"),s.classList.add(e);var n=t.ref();if("#"===n[0])s.value=c.a.validateColor(n),s.addEventListener("change",function(e){t.ref(e.target.value)});else{var i=c.a.cssColorToHex(n);s.value=i.hex,s.setAttribute("alpha",i.a+""),s.addEventListener("change",function(e){t.ref(c.a.hexToRgba(e.target.value,+e.target.getAttribute("alpha")))})}return s},createNumberInput:function(t,e){var s=document.createElement("input");return s.type="number",void 0!==t.step&&(s.step=t.step+""),void 0!==t.min&&(s.min=t.min.toString()),void 0!==t.max&&(s.max=t.max.toString()),s.classList.add("value"),s.classList.add(e),s.value=t.ref(),s.addEventListener("change",function(e){t.ref(+e.target.value)}),s}},mounted:function(){this.loadSettings(),this.bind()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"player",props:{isPaused:{type:Boolean,default:!1}},methods:{restart:function(t){this.$emit("restart")},toggle:function(t){this.$emit("toggle")}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(75),i=s.n(n),a=s(101),o=s.n(a),r=s(13),l=s(67),c=s.n(l),u=(s(25),s(96),s(50));e.default={name:"questionnaire-results",components:{"control-panel":c.a},data:function(){return{questionnaire:null}},props:{data:{type:u.a,required:!0}},computed:{title:function(){return'Questionnaire results in "'+this.data.records[0].task.name+'"'}},filters:{name:function(t){return t.split(",")[0]},date:function(t){return t.split(",")[1]}},methods:{close:function(t){this.$emit("close")},getAnswerClass:function(t,e){if(t[e]){var s=t[e].isCorrect;return{isCorrect:s,isIncorrect:!s}}return{}},getAnswerText:function(t,e){return t[e]?t[e].text:""},getTotal:function(t){var e=0,s=0;for(var n in t)t[n]&&(s++,e+=t[n].isCorrect?1:0);return(e/s*100).toFixed(1)},getRecordName:function(t){return t.student.name+","+r.a.sessionDate(t.session.date)},createQuestionnaire:function(){var t=this,e={},s=new o.a;this.data.records.forEach(function(n){if(n.data.questionnaire){var i=t.getRecordName(n),a={};n.data.questionnaire.forEach(function(t){s.add(t.question),a[t.question]=t.answer}),e[i]=a}});var n=[],a=!0,r=!1,l=void 0;try{for(var c,u=i()(s);!(a=(c=u.next()).done);a=!0){var d=c.value;n.push(d)}}catch(t){r=!0,l=t}finally{try{!a&&u.return&&u.return()}finally{if(r)throw l}}return{sessions:e,questions:n}}},mounted:function(){console.log("Questionnaire results created"),this.questionnaire=this.createQuestionnaire()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(35),i=s.n(n),a=s(6),o=s(129),r=s(98),l=s(58),c=s(67),u=s.n(c),d=s(85),h=s.n(d),f=(s(4),s(48),s(33),s(50));r.a.initializeSettings(),e.default={name:"student-summary",components:{"control-panel":u.a,options:h.a},data:function(){return{isOptionsDisplayed:!1,students:[],options:{_sgwm:r.a.createOptions()},sortedStatIndex:-1,nameSortDir:1,statistics:[{name:"Sessions",sortDir:0},{name:"Reading time",sortDir:0},{name:"WPM",title:"Words per minute",sortDir:0},{name:"SPM",title:"Syllables per minute (sessions)",sortDir:0},{name:"SPW",title:"Seconds per word",sortDir:0},{name:"Fixation",title:"Average fixation duration in milliseconds",sortDir:0},{name:"Syllabifications",sortDir:0},{name:"Regressions",sortDir:0}]}},props:{data:{type:f.a,required:!0}},computed:{headerNameClass:function(){return{sorted:this.sortedStatIndex<0,up:this.sortedStatIndex<0&&this.nameSortDir>0,down:this.sortedStatIndex<0&&this.nameSortDir<0}},title:function(){var t=this.data.params.grade;return t.studentCount+" "+t.name}},methods:{showOptions:function(t){this.isOptionsDisplayed=!0},close:function(t){this.$emit("close")},applyOptions:function(t){r.a.save(),this.makeStudents()},closeOptions:function(t){this.isOptionsDisplayed=!1},statNameClass:function(t,e){return{sorted:this.sortedStatIndex===e,up:this.sortedStatIndex===e&&t.sortDir>0,down:this.sortedStatIndex===e&&t.sortDir<0}},makeStudents:function(){var t=this,e=new i.a;this.data.records.forEach(function(t){var s={data:t.data,feedbacks:t.session.feedbacks};if(e.has(t.student.id)){e.get(t.student.id).sessions.push(s)}else{var n={ref:t.student,sessions:[s],statistics:null};e.set(t.student.id,n)}});var s=[];e.forEach(function(e){e.statistics=t.calculateStatistics(e),s.push(e)}),this.students=s,this.sort(this.sortedStatIndex)},calculateStatistics:function(t){var e=[];e.push(t.sessions.length);var s=0,n=0,i=0,c={count:0,duration:0,hyphenations:0},u={count:0,sessions:0};t.sessions.forEach(function(t){var e=t.data.pages,d=t.feedbacks.syllabification.enabled?new l.a(a.c.from(t.feedbacks.syllabification)):null,h=void 0,f=void 0;e.forEach(function(t,e){if(!h&&t.fixations&&(h=t),t.fixations){f=t;var i={first:t.fixations[0],last:t.fixations[t.fixations.length-1]};if(s+=i.last.ts+i.last.duration-i.first.ts,n+=t.text.length,d){var a=t.text.map(function(t){return t.text}).join(" ");u.count+=d.getSyllabCount(a),e||u.sessions++}}}),h&&f&&(c=e.reduce(function(t,e){return e.fixations?{count:t.count+e.fixations.length,duration:t.duration+e.fixations.reduce(function(t,e){return t+e.duration},0),hyphenations:t.hyphenations+(e.syllabifications?e.syllabifications.length:0)}:t},c),i+=e.reduce(function(t,e){if(!e.fixations)return t;var s=r.a.map(e);return t+o.a.compute(s.fixations)},0))});var d=new Date(0,0,0,0,0,Math.round(s/1e3));return e.push(60*d.getMinutes()+d.getSeconds()),e.push(n?(n/(s/6e4)).toFixed(0):"-"),e.push(u.count?(u.count/(s/6e4)).toFixed(0)+" ("+u.sessions+")":"-"),e.push(s?(s/n/1e3).toFixed(2):"-"),e.push(c.count?Math.round(c.duration/c.count):"-"),e.push((c.hyphenations/t.sessions.length).toFixed(2)),e.push(i),e},secondsToString:function(t){var e=""+t;return e.length<2&&(e="0"+e),e},sort:function(t){var e=this.computeSortDirection();this.nameSortDir=t<0?e:0,this.statistics.forEach(function(s,n){s.sortDir=t===n?e:0}),this.sortData(t,e),this.sortedStatIndex=t},computeSortDirection:function(){var t=0;return t=this.sortedStatIndex<0?this.nameSortDir:this.statistics[this.sortedStatIndex].sortDir,t<1?1:-1},sortData:function(t,e){var s=this.students.map(function(t){return t});s.sort(function(s,n){if(t<0)return e>0?s.ref.name<n.ref.name?1:0:s.ref.name>n.ref.name?1:0;var i=s.statistics[t],a=n.statistics[t];return e>0?a-i:i-a}),this.students=s}},mounted:function(){console.log("Student summary created"),this.makeStudents()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(42),i=s(98),a=s(6),o=s(67),r=s.n(o),l=s(85),c=s.n(l),u=s(119),d=s.n(u),h=(s(33),s(49),s(50)),f=(s(11),{wordColor:"#666",wordHighlightColor:"#606",wordRectColor:"#f44",drawWordFrame:!0});i.a.initializeSettings(),e.default={components:{"control-panel":r.a,options:c.a,"task-images":d.a},data:function(){return{isOptionsDisplayed:!1,options:null,commonUI:f,pageIndex:-1,currentPages:[],defaultSession:this.data.records[0].session,defaultPages:this.data.records[0].data.pages,defaultFeedback:this.data.records[0].session.feedbacks,defaultQuestionnaire:this.data.records[0].data.questionnaire,isPlayerPaused:!1,isWarningMessageVisible:!1,currentImages:[],visibleImages:[],fixation:null}},props:{data:{type:h.a,required:!0}},computed:{textLength:function(){return this.defaultPages.length},initialPageIndex:function(){return this.defaultPages[0].isIntro?1:0},title:function(){return""},feedback:function(){return new a.b(this.defaultFeedback.speech,this.defaultFeedback.syllabification)}},methods:{changePage:function(){},redraw:function(){},createCommonOptions:function(){return new n.b({id:"_common",title:"Common",options:n.a.createOptions({wordColor:new n.c({type:"#",label:"Text color"}),wordHighlightColor:new n.c({type:"#",label:"Highlighting color"}),wordRectColor:new n.c({type:"#",label:"Word frame color"}),drawWordFrame:new n.c({type:Boolean,label:"Draw word frame"})},f),defaults:n.a.createDefaults(f)})},setPage:function(t){this.pageIndex=t.index,this.currentPages=this.data.records.map(function(e){return e.data.pages[t.index]}),this.currentImages=this.currentPages[0].images||[],this.changePage()},showOptions:function(t){this.isOptionsDisplayed=!0},close:function(t){this.$emit("close")},applyOptions:function(t){i.a.save(),this.redraw()},closeOptions:function(t){this.isOptionsDisplayed=!1},restartPlayer:function(t){},togglePlayer:function(t){},map:function(t){return i.a.map(t)}},created:function(){this.options={_common:this.createCommonOptions(),_sgwm:i.a.createOptions()}},mounted:function(){this.setPage({index:this.initialPageIndex})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"vis-title"}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(40),i=s(42),a=s(98),o=s(225),r=s(67),l=s.n(r),c=s(85),u=s.n(c),d=s(50);a.a.initializeSettings();var h={levelDuration:500};e.default={name:"word-replay",components:{"control-panel":l.a,options:u.a},data:function(){return{pageIndex:-1,isOptionsDisplayed:!1,isPlayerPaused:!1,defaultText:this.data.records[0].data.pages.map(function(t){return t.text}),defaultFeedback:this.data.records[0].session.feedbacks,words:[],tracks:null,options:{wordReplay:new i.b({id:"wordReplay",title:"Word replay",options:i.a.createOptions({levelDuration:new i.c({type:Number,step:50,label:"Level duration, ms"})},h),defaults:i.a.createDefaults(h)}),_sgwm:a.a.createOptions()}}},props:{data:{type:d.a,required:!0}},computed:{textLength:function(){return this.defaultText.length},initialPageIndex:function(){return this.data.records[0].data.pages[0].isIntro?1:0},title:function(){var t=this.data.records[0],e=this.data.params.student?" for "+this.data.params.student:"";return'Word replay in "'+t.task.name+'"'+e}},methods:{setPage:function(t){var e=this;this.tracks&&this.stopAll(),this.pageIndex=t.index,this.makeList(),n.a.nextTick(function(){e.start()})},showOptions:function(t){this.isOptionsDisplayed=!0},close:function(t){this.$emit("close")},applyOptions:function(t){var e=this;a.a.save();var s=this.$refs.table.querySelectorAll("tr");this.tracks.forEach(function(t){t.words.forEach(function(n){e.colorizeCell(s[n.id+1].cells[t.id+1],n.totalDuration)})})},closeOptions:function(t){this.isOptionsDisplayed=!1},restartPlayer:function(t){var e=this;this.stopAll(),this.makeList(),n.a.nextTick(function(){e.start()})},togglePlayer:function(t){this.isPlayerPaused=!this.isPlayerPaused,this.tracks.forEach(function(t){return t.togglePause()})},makeList:function(){var t=this;this.tracks||this.createTracks();var e=new RegExp(""+this.defaultFeedback.syllabification.hyphen,"g"),s=this.defaultText[this.pageIndex].map(function(s){return{text:s.text.replace(e,""),durations:t.tracks.map(function(t){return 0}),key:Math.random()}});this.words=s},createTracks:function(){var t=this;this.tracks=this.data.records.map(function(e,s){return new o.a(t.$refs.root,e.student.name,e.data.pages,s)})},start:function(){var t=this;this.isPlayerPaused=!1;var e=this.$refs.table.querySelectorAll("tr");this.tracks.forEach(function(s){var n=s.session[t.pageIndex].text,i=a.a.map(s.session[t.pageIndex]);s.start(i?i.fixations:null,n,t.onWordFixated(s,e),t.onTrackCompleted())}),this.$refs.root.scrollTop=0},stopAll:function(){this.tracks.forEach(function(t){return t.stop()})},colorizeCell:function(t,e){var s=(e?1:0)+Math.floor(e/h.levelDuration),n=255-24*Math.min(10,s),i="rgb("+n+","+n+","+n+")";t.style.backgroundColor=i},hasNoData:function(t){return!this.tracks[t].hasData},onWordFixated:function(t,e){var s=this;return function(n,i){var a=t.words[n.id];a.totalDuration=a.totalDuration+i;var o=e[n.id+1].cells[t.id+1];s.colorizeCell(o,a.totalDuration),t.pointer.setAttribute("style","left: "+(o.offsetLeft+(o.offsetWidth-t.pointerSize)/2)+"px; top: "+(o.offsetTop+(o.offsetHeight-t.pointerSize)/2)+"px")}},onTrackCompleted:function(){return function(){}}},mounted:function(){console.log("Word replay created"),this.setPage({index:this.initialPageIndex})},beforeDestroy:function(){this.stopAll()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(6),i=(s(25),s(370)),a=s.n(i),o=s(373),r=s.n(o);e.default={name:"control-panel",components:{player:a.a,"vis-title":r.a},data:function(){return{pageIndex:this.initialPageIndex||0}},props:{title:{type:String,required:!0},feedback:{type:n.b,default:null},questionnaire:{type:Array,default:null},initialPageIndex:{type:Number,default:0},textLength:{type:Number,default:0},showOptionsButton:{type:Boolean,default:!0},showPlayer:{type:Boolean,default:!1},isPlayerPaused:{type:Boolean,default:!1}},computed:{dispPage:function(){var t=this.initialPageIndex>0,e=t?0:-1,s=t?this.textLength-1:this.textLength,n=t?0:1;return this.pageIndex===e?"int":this.pageIndex+n+"/"+s},correctAnswers:function(){return this.questionnaire&&this.questionnaire.length?(this.questionnaire.filter(function(t){return t.answer.isCorrect}).length/this.questionnaire.length*100).toFixed(0)+"%":"-"}},methods:{prevPage:function(t){this.pageIndex>0&&this.setPage(this.pageIndex-1)},nextPage:function(t){this.pageIndex<this.textLength-1&&this.setPage(this.pageIndex+1)},showOptions:function(t){this.$emit("show-options")},restartPlayer:function(t){this.$emit("restart-player")},togglePlayer:function(t){this.$emit("toggle-player")},close:function(t){this.$emit("close")},setPage:function(t){this.pageIndex=t,this.$emit("page-changed",{index:t})}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(18);e.default={name:"intro-editor",data:function(){return{name:this.intro?this.intro.name:"",calib:this.intro?this.intro.calibInstruction:"",calibStart:this.intro?this.intro.calibStart:"",calibSkip:this.intro?this.intro.calibSkip:"",start:this.intro?this.intro.startInstruction:"",startRun:this.intro?this.intro.startRun:"",startCancel:this.intro?this.intro.startCancel:"",firstPage:this.intro?this.intro.firstPageAsText():"",next:this.intro?this.intro.next:"",finish:this.intro?this.intro.finish:"",finished:this.intro?this.intro.finished:""}},props:{action:{type:String,default:"Create"},showLabels:{type:Boolean,default:!1},nameEditable:{type:Boolean,default:!0},intro:{type:n.a,default:null},reload:Number},watch:{reload:function(){this.name=this.intro?this.intro.name:"",this.calib=this.intro?this.intro.calibInstruction:"",this.calibStart=this.intro?this.intro.calibStart:"",this.calibSkip=this.intro?this.intro.calibSkip:"",this.start=this.intro?this.intro.startInstruction:"",this.startRun=this.intro?this.intro.startRun:"",this.startCancel=this.intro?this.intro.startCancel:"",this.firstPage=this.intro?this.intro.firstPageAsText():"",this.next=this.intro?this.intro.next:"",this.finish=this.intro?this.intro.finish:"",this.finished=this.intro?this.intro.finished:""}},computed:{isNameValid:function(){return this.name.length>1},isFirstPageValid:function(){return this.firstPage.length>14},isCalibInstructionValid:function(){return this.calib.length>4},isStartInstructionValid:function(){return this.start.length>4},canSave:function(){return this.isNameValid&&(this.isCalibInstructionValid||this.isStartInstructionValid||this.isFirstPageValid)}},methods:{save:function(t){this.$emit("save",{name:this.name.trim(),texts:{calibInstruction:this.calib.trim(),calibStart:this.calibStart.trim(),calibSkip:this.calibSkip.trim(),startInstruction:this.start.trim(),startRun:this.startRun.trim(),startCancel:this.startCancel.trim(),firstPage:this.firstPage.trim(),next:this.next.trim(),finish:this.finish.trim(),finished:this.finished.trim()}})}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s(126);e.default={name:"item-select-box",data:function(){return{currentItem:null,groups:null,lastSelectionIndex:-1,lastSelectionGroup:""}},props:{items:{type:Array,required:!0},multiple:{type:Boolean,default:!0},singleGroup:{type:Boolean,default:!0},itemName:{type:String,required:!0},subitemName:{type:String,required:!0}},computed:{hasItemsSelected:function(){return this.items.some(function(t){return t.subitems.some(function(t){return t.selected})})}},methods:{groupedSubitems:function(){if(!this.currentItem)return null;var t={_:{items:[],hidden:!1}};return this.currentItem.subitems.forEach(function(e){e.group?t[e.group]?t[e.group].items.push(e):t[e.group]={items:[e],hidden:!1}:t._.items.push(e)}),t},selectItem:function(t,e){this.currentItem=t,this.groups=this.groupedSubitems()},isItemSelected:function(t){return!!this.currentItem&&(t?this.currentItem.id===t.id:!!this.currentItem)},hasSubitems:function(t){return!(!(t=t||this.currentItem)||!t.subitems)&&!!t.subitems.length},isGroupVisible:function(t){return!t.hidden},toggleItemsVisibility:function(t,e){t.hidden=!t.hidden},selectMultipleSubitems:function(t,e){if(e.shiftKey)for(var s=this.currentItem.subitems.indexOf(t),n=this.lastSelectionIndex<s?-1:1,i=this.lastSelectionIndex<s?-1:this.currentItem.subitems.length,a=s+n;a!==i;a+=n){var o=this.currentItem.subitems[a];if(o.selected)break;o.selected=!this.singleGroup||o.group===t.group}},selectSubitem:function(t,e,s){if(this.multiple||this.items.forEach(function(t){t.subitems.forEach(function(t){t.selected=!1})}),t.selected=!t.selected,this.multiple&&t.selected){if(this.singleGroup&&this.currentItem){var n=t.group;this.currentItem.subitems.forEach(function(t){t.group!==n&&(t.selected=!1)}),this.lastSelectionGroup!==t.group&&(this.lastSelectionIndex=-1)}this.selectMultipleSubitems(t,s)}this.lastSelectionIndex=e,this.lastSelectionGroup=t.group},selectAllSubitems:function(t){this.currentItem.subitems.forEach(function(t){t.selected=!0})},removeAllSubitems:function(t){this.currentItem.subitems.forEach(function(t){t.selected=!1})},accept:function(t){var e=this,s={},n=null;this.items.forEach(function(t){t.subitems.forEach(function(t){t.selected&&(s[t.id]=t.text,e.multiple||(n=t))})}),this.$emit("accept",{subitems:s,selected:n})}},created:function(){1===this.items.length&&this.selectItem(this.items[0],null)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"loading",data:function(){return{}},props:{isModal:{type:Boolean,default:!1}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(60),i=s(15),a=s(16),o=s.n(a),r={INVALID:-1,UNKNOWN:0,VALID:1};e.default={name:"login",components:{"temporal-notification":o.a},mixins:[i.a],data:function(){return{email:"",password:"",inProgress:!1,checkValues:r}},computed:{isEmailValid:function(){return this.email?this.email.indexOf("@")<0?this.email.length>4?r.VALID:r.INVALID:/(.{2,})@(\w{2,}\.\w{2,})/.test(this.email)?r.VALID:r.INVALID:r.UNKNOWN},isPasswordValid:function(){return this.password?!this.password||this.password.length>5?r.VALID:r.INVALID:r.UNKNOWN},canLogIn:function(){return!this.inProgress&&this.isEmailValid===r.VALID&&this.isPasswordValid===r.VALID}},methods:{login:function(t){var e=this;this.inProgress=!0,n.a.logIn(this.email,this.password,function(t){if(e.inProgress=!1,t)return e.setError(t,"Failed to log in")})}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"modal-container",data:function(){return{}},props:{title:{type:String,default:"Editor"}},methods:{close:function(t){this.$emit("close",{cancelled:!0})}},mounted:function(){this.$emit("mounted")}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"assignments",data:function(){return{}},props:{text:{type:String,default:""}},methods:{close:function(t){this.$emit("close")}},watch:{text:function(t){t&&console.error("MODAL_ERROR:",t)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"remove-warning",data:function(){return{}},props:{object:String,name:String,data:Object},methods:{reject:function(t){this.$emit("close",{confirm:!1,data:this.data})},confirm:function(t){this.$emit("close",{confirm:!0,data:this.data})}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(13),i=s(15),a=s(16),o=s.n(a),r=s(69),l=s.n(r),c=(s(51),s(73));e.default={name:"session-edit-box",components:{"temporal-notification":o.a,"remove-warning":l.a},mixins:[i.a],data:function(){return{sessionToDelete:null}},props:{student:{type:c.a,required:!0}},computed:{toDeleteName:function(){return this.sessionToString(this.sessionToDelete)}},methods:{sessionToString:function(t){return t?t.task.name+" at "+n.a.sessionDate(t.ref.date):""},showDeleteWarning:function(t){this.sessionToDelete=t},deleteSession:function(){var t=this,e=this.sessionToDelete.ref.id;this.student.ref.deleteSession(e,function(s){if(s)return t.setError(s,"Failed to delete the session");t.student.sessions=t.student.sessions.filter(function(t){return t.ref.id!==e}),t.$emit("deleted",{session:e})}),this.sessionToDelete=null},cancel:function(){this.sessionToDelete=null},removeWarningClosed:function(t){t.confirm?this.deleteSession():this.cancel()}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(99),i=s.n(n),a=s(100),o=s.n(a),r=s(13),l=s(20),c=s(21),u=s(15),d=s(31),h=s(27),f=s.n(h),p=s(68),m=s.n(p),v=s(153),g=s.n(v),_=s(16),b=s.n(_);s(4),s(5),s(24);e.default={name:"student-list",mixins:[u.a,d.a],components:{loading:f.a,"modal-container":m.a,"item-selection-box":g.a,"temporal-notification":b.a},data:function(){return{currentClass:this.cls,students:null,schoolStudents:null,tasks:[],schoolGrades:[],isEditing:!1,currentGrade:null,activeMenu:null}},props:{cls:{type:l.a,default:null},teacher:{type:c.a,default:null},refresh:{type:Number,default:0}},watch:{refresh:function(){this.loadTasks()}},methods:{loadTasks:function(){var t=this;this.currentClass.getTasks(function(e,s){if(e)return t.setError(e,"Failed to load tasks");t.tasks=s.sort(r.a.byName),t.loadStudents()})},loadStudents:function(){var t=this;this.currentClass.getStudents(function(e,s){if(e)return t.students=[],t.setError(e,"Failed to load students");t.students=s.sort(r.a.byName)})},loadAvailableStudents:function(t){var e=this;this.teacher.getSchool(function(s,n){if(s)return e.setError(s,"Failed to load teacher's school"),t(s);n.getStudents(function(s,n){if(s)return e.setError(s,"Failed to load school students");e.schoolStudents=n,e.schoolGrades=e.makeGrades(n),t()})})},makeGrades:function(t){var e=this,s=[];return t.forEach(function(t){var n=s.find(function(e){return e.text===t.grade.toLowerCase()});n||(n={id:Math.random(),text:t.grade.toLowerCase(),subitems:[]},s.push(n)),e.students&&!e.students.find(function(e){return e.id===t.id})&&n.subitems.push({id:t.id,text:t.name,selected:!1})}),s.forEach(function(t){t.subitems.sort(function(t,e){return t.text.toLowerCase()>e.text.toLowerCase()?1:-1})}),s.sort(function(t,e){var s=o()(t.text,10),n=o()(e.text,10);return i()(s)||i()(n)?t.text>e.text?1:-1:s===n?t.text>e.text?1:-1:s>n?1:-1})},displayCount:function(t,e){return r.a.displayCount(t,e)},openEditor:function(t){var e=this;this.loadAvailableStudents(function(t){t||(e.isEditing=!0)})},addNewStudents:function(t){var e=this;t.subitems&&this.currentClass.addStudents(t.subitems,function(t){t?e.setError(t,"Failed to add new student"):e.setSuccess("Students were added"),e.loadStudents()}),this.closeEditor(null)},closeEditor:function(t){this.isEditing=!1},addAssignment:function(t,e,s){var n=this;this.hideTaskList(),t.addAssignment(e,this.currentClass.id,function(t){t?n.setError(t,"Failed to add the assignment"):n.setSuccess("The assignment was added")})},removeAssignment:function(t,e,s){var n=this;t.removeAssignment(e,function(t){t?n.setError(t,"Failed to remove the assignment"):n.setSuccess("The assignment was removed")})},remove:function(t,e){var s=this;this.currentClass.removeStudent(t,function(t){t?s.setError(t,"Failed to remove the student from the list"):s.setSuccess("The student was removed"),s.loadStudents()})},availableTasks:function(t){return this.tasks.filter(function(e){return!t.assignments[e.id]})},toggleTaskList:function(t){this.activeMenu?this.hideTaskList():this.showTaskList(t)},showTaskList:function(t){this.hideTaskList(),this.activeMenu=this.$refs[t][0],this.activeMenu.classList.add("is-active")},hideTaskList:function(){this.activeMenu&&(this.activeMenu.classList.remove("is-active"),this.activeMenu=null)},doesTaskBelongsToClass:function(t){return this.tasks.some(function(e){return e.id===t})},getAssignmentName:function(t){return this.tasks.find(function(e){return e.id===t}).name}},created:function(){window.document.body.addEventListener("click",this.hideTaskList)},destroyed:function(){window.document.body.removeEventListener("click",this.hideTaskList)},mounted:function(){this.loadTasks(),this.loadAvailableStudents(function(){})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(61),i=s.n(n),a=s(76),o=s.n(a),r=s(28),l=s.n(r),c=s(5),u=s(120),d=s(389),h=s.n(d),f=s(388),p=s.n(f),m=s(385),v=s.n(m),g=s(386),_=s.n(g),b=s(387),y=s.n(b);s(11),s(25),s(18),s(6);e.default={name:"task-editor",mixins:[u.a],components:{"task-preview":h.a,"task-editor-text":p.a,"task-editor-feedback":v.a,"task-editor-images":_.a,"task-editor-questionnaire":y.a},data:function(){return{ref:this.task||this.source||JSON.parse(window.localStorage.getItem("task-defaults")),name:"",alignment:"",fontname:"",text:"",intro:"",syllab:c.a.defaultSyllab,speech:c.a.defaultSpeech,syllabExceptions:"",images:[],questionnaire:[],canPreview:!0,inPreview:!1,tabs:{text:{name:"Text"},feedback:{name:"Feedback"},images:{name:"Images"},questionnaire:{name:"Questionnaire"}},currentTab:null}},props:{action:{type:String,default:"Create"},task:{type:c.a,default:null},source:{type:c.a,default:null},intros:{type:Array,required:!0,default:function(){return[]}}},computed:{isTaskNameEditable:function(){return!this.ref||!this.ref.name||!!this.source},isCloningTask:function(){return!!this.source},isNameValid:function(){return this.name.length>1},isTextValid:function(){return this.text.length>14},canSave:function(){return this.isNameValid&&this.isTextValid}},methods:{init:function(){var t=this;this.ref&&(this.ref.name&&(this.name=this.source?"":this.ref.name),this.ref.pages&&(this.text=c.a.pagesToText(this.ref.pages)),this.ref.alignment&&(this.alignment=this.ref.alignment),this.ref.fontname&&(this.fontname=this.ref.fontname),this.ref.intro&&(this.intro=this.ref.intro),this.ref.syllab&&(this.syllab=this.ref.syllab),this.ref.speech&&(this.speech=this.ref.speech),this.ref.syllab.exceptions&&(this.syllabExceptions=c.a.syllabsToText(this.ref.syllab.exceptions)),this.ref.pages&&this.ref.pages.forEach(function(e,s){e.images&&e.images.forEach(function(e){t.images.push(l()({page:s},e))})}),this.ref.questionnaire&&(this.questionnaire=this.ref.questionnaire))},isCurrentTab:function(t){return t===this.currentTab},selectTab:function(t){this.currentTab=t},preview:function(t){this.inPreview=!0,this.makeFullscreen(this.$refs.fullscreen)},closePreview:function(t){this.inPreview=!1,this.closeFullscreen()},setTextInput:function(t){this.name=t.name,this.alignment=t.alignment,this.fontname=t.fontname,this.intro=t.intro,this.text=t.text,this.$emit("modified")},setFeedbackInput:function(t){this.syllab=t.syllab,this.speech=t.speech,this.syllabExceptions=t.syllabExceptions,this.$emit("modified")},setImagesInput:function(t){this.images=t.images,this.$emit("modified")},onImageEditing:function(t){this.canPreview=!t},setDefaultFeedback:function(t){var e=o()({syllab:this.syllab,speech:this.speech});window.localStorage.setItem("task-defaults",e)},setQuestionnaireInput:function(t){this.questionnaire=t.questionnaire,this.$emit("modified")},getCurrentTask:function(){var t=new c.a;return t=l()(t,{name:this.name.trim(),type:"text",alignment:this.alignment,fontname:this.fontname,pages:c.a.textToPages(this.text),syllab:i()({},this.syllab),speech:i()({},this.speech)}),c.a.embedImagesIntoPages(t.pages,this.images),t.syllab.exceptions=c.a.textToSyllabs(this.syllabExceptions),t},save:function(t){this.syllab.exceptions=this.syllabExceptions,this.$emit("save",{name:this.name.trim(),text:this.text,alignment:this.alignment,fontname:this.fontname,intro:this.intro,syllab:this.syllab,speech:this.speech,images:this.images,questionnaire:this.questionnaire})}},created:function(){this.currentTab=this.tabs.text},mounted:function(){this.init()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(131),i=s.n(n),a=s(0),o=s.n(a),r=s(221),l=(s(90),s(11),s(49),function t(e){o()(this,t),this.location=e.location,this.src=e.src,this.keepOriginalSize=!!e.keepOriginalSize,this.offset=e.offset||0});e.default={name:"task-images",data:function(){return{imageProps:{left:null,right:null,bottom:null},imageController:null}},props:{images:{type:Array,required:!0,default:function(){return[]}},fixation:{type:Object,default:null},viewport:{type:Object,default:null}},methods:{hasImageAt:function(t){var e=this.images;return!(!e||!t)&&e.some(function(e){return e.location===t.location})},getSource:function(t){return t?t.src:""},getClass:function(t){var e;return t?(e={},i()(e,t.location,!0),i()(e,"has-original-size",t.keepOriginalSize),e):null},getStyle:function(t){if(!t)return"";if(this.viewport){var e=-1,s=-1,n=0,i=0,a="auto",o="auto";return"bottom"===t.location?(s=this.viewport.height-(t.offset||0),i=-100,n=-50,t.keepOriginalSize||(o=(.15*this.viewport.height).toFixed(0)+"px")):"right"===t.location?(e=this.viewport.width-(t.offset||0),n=-100,i=-50,t.keepOriginalSize||(a=(.15*this.viewport.width).toFixed(0)+"px")):"left"===t.location&&(e=t.offset||0,i=-50,t.keepOriginalSize||(a=(.15*this.viewport.width).toFixed(0)+"px")),["right: auto","bottom: auto","left: "+(e<0?"50%":e+"px"),"top: "+(s<0?"50%":s+"px"),"transform: translateX("+n+"%) translateY("+i+"%)","width: "+a,"height: "+o].join(";")}return["margin-"+t.location+": "+t.offset+"px"].join(";")}},watch:{images:function(t){this.imageController.setImages(t)},fixation:function(t){this.imageController.fixate(t.word,t.duration)}},mounted:function(){var t=this;this.imageController=new r.a({onShow:function(e){console.log("IMC_CB","shown",e.src.split("_").find(function(t,e,s){return e===s.length-1}).split("?")[0]),t.imageProps[e.location]=new l(e),t.$emit("show",{image:e}),console.log("IMC_CB","---")},onHide:function(e){console.log("IMC_CB","hidden",e.src.split("_").find(function(t,e,s){return e===s.length-1}).split("?")[0]),t.imageProps[e.location]=null,t.$emit("hide",{image:e}),console.log("IMC_CB","---")}})},destroyed:function(){this.imageController.shutdown()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(13),i=s(216),a=s(15),o=s(31),r=s(27),l=s.n(r),c=s(16),u=s.n(c),d=s(68),h=s.n(d),f=s(380),p=s.n(f),m=s(69),v=s.n(m);s(5);e.default={name:"task-list",components:{loading:l.a,"temporal-notification":u.a,"modal-container":h.a,"task-editor":p.a,"remove-warning":v.a},mixins:[a.a,o.a],data:function(){return{parent:this.cls,tasks:null,locked:null,toEdit:null,toCopy:null,toDelete:null,isCreating:!1,isTaskModified:!1}},props:{cls:{type:Object,default:null},intros:{type:Array,default:function(){return[]}}},computed:{isEditing:function(){return!!this.toEdit||this.isCreating},toDeleteName:function(){return this.toDelete?this.toDelete.name:""},action:function(){return this.isCreating?"Create":this.toEdit?"Save":""},actionType:function(){return this.toEdit?"edit":"create new"},taskEditorTitle:function(){return"Task editor"+(this.toEdit?" - "+this.toEdit.name:"")}},methods:{loadTasks:function(){var t=this;this.parent.getTasks(function(e,s){if(e)return t.tasks=[],t.setError(e,"Failed to load tasks");t.tasks=s.sort(n.a.byName),i.a.areTasksLocked(t.tasks.map(function(t){return t.id}),function(e,s){if(e)return console.error("DBUtils.isTaskLocked:",e);t.locked=s})})},displayCount:function(t,e){return n.a.displayCount(t,e)},canCreate:function(t){return this.tasks.every(function(e){return e.name.toLowerCase()!==t.name.toLowerCase()})},edit:function(t,e){this.toEdit=t,this.isTaskModified=!1},copy:function(t,e){this.toCopy=t,this.isCreating=!0,this.isTaskModified=!1},save:function(t){var e=this,s=t;this.toEdit?this.toEdit.update(s,function(t){e.$emit("saved",{err:t}),e.loadTasks()}):this.canCreate(s)?this.parent.createTask(s,"text",function(t){e.$emit("created",{err:t}),t||e.loadTasks()}):this.$emit("created",{err:"A task with the same name exists already"}),this.isTaskModified=!1,this.closeEditor(null)},onTaskModified:function(t){this.isTaskModified=!0},closeEditor:function(t){var e=!0;t&&this.isTaskModified&&(e=window.confirm("All changes will be lost. OK to continue?")),e?(this.toEdit=null,this.toCopy=null,this.isCreating=!1):t&&(t.cancelled=!0)},remove:function(t,e){this.toDelete=t},isLocked:function(t,e){return null===this.locked||this.locked.indexOf(t)>=0},removeWarningClosed:function(t){var e=this;if(t.confirm){var s=this.toDelete.id;this.parent.deleteTask(this.toDelete,function(t){if(t)return e.setError(t,"Failed to delete the task");i.a.deleteTaskSessions(s,function(t){if(t)return console.error("DBUtils.deleteTaskSessions:",t)}),i.a.deleteStudentTaskSessions(s,function(t){if(t)return console.error("DBUtils.deleteStudentTaskSessions:",t)}),e.setSuccess("The task was deleted"),e.$emit("deleted",{task:s}),e.loadTasks()})}this.toDelete=null},openNewTextBox:function(t){this.isCreating=!0,this.isTaskModified=!1}},mounted:function(){this.loadTasks()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"task-text",data:function(){return{textStyle:{color:"#775","font-family":(this.fontname?this.fontname:"Calibri")+", Arial, sans-serif","font-size":"20pt","font-style":"normal","font-weight":"bold"}}},props:{fontname:{type:String,default:"Calibri"}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s(40);e.default={name:"temporal-notification",data:function(){return{showState:!1,timer:null}},props:{type:String,show:Number},watch:{show:function(){var t=this;this.log(),this.showState=!0,this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.showState=!1,t.timer=null},4e3)}},computed:{notificationClass:function(){return"is-"+this.type}},methods:{getSlotItemText:function(t){var e=this,s="";return t.text&&(s+=t.text),t.children&&(s+=t.children.reduce(function(t,s){return t+e.getSlotItemText(s)},"")),s},getSlotText:function(){var t=this;return this.$slots.default.reduce(function(e,s){return e+t.getSlotItemText(s)},"")},log:function(){"danger"===this.type?console.error("TEMP_ERROR: ",this.getSlotText()):"success"===this.type&&console.log("TEMP_SUCCESS:",this.getSlotText())}},mounted:function(){this.showState=!1}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"bulma-checkbox",data:function(){return{checked:!!this.value||!1}},props:{value:{type:Boolean,default:!1},label:{type:String},disabled:{type:Boolean,default:!1}},methods:{toggle:function(t){this.disabled||(this.checked=!this.checked,this.$emit("input",this.checked))}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s(6);e.default={name:"feedback-editor",data:function(){return{language:this.value.language,thresholdIsSmart:this.value.threshold.smart,thresholdMin:this.value.threshold.min,thresholdMax:this.value.threshold.max,thresholdValue:this.value.threshold.value}},props:{value:{type:Object,required:!0},header:{type:String,required:!0},languages:{type:Array,required:!0}},computed:{canEditCalibThresholdParams:function(){return this.language&&this.thresholdIsSmart},isLanguageSelected:function(){return!!this.language},model:function(){return{language:this.language,threshold:{smart:this.thresholdIsSmart,min:this.thresholdMin,max:this.thresholdMax,value:this.thresholdValue}}}},watch:{language:function(){this.$emit("input",this.model)},thresholdIsSmart:function(){this.$emit("input",this.model)},thresholdMin:function(){this.$emit("input",this.model)},thresholdMax:function(){this.$emit("input",this.model)},thresholdValue:function(){this.$emit("input",this.model)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(43),i=s.n(n),a=s(5),o=s(58),r=s(124),l=s(384),c=s.n(l),u=s(383),d=s.n(u);s(6);e.default={name:"task-editor-feedback",components:{"feedback-editor":c.a,"bulma-checkbox":d.a},data:function(){return{speech:this.task?this.task.speech:a.a.defaultSpeech,speechAdjustForWordLength:this.task?this.task.speech.threshold.adjustForWordLength:a.a.defaultSpeech.threshold.adjustForWordLength,speechLangs:r.a.LANGS,syllab:this.task?this.task.syllab:a.a.defaultSyllab,syllabExceptions:this.task?a.a.syllabsToText(this.task.syllab.exceptions):"",syllabMode:this.task?this.task.syllab.mode:a.a.defaultSyllab.mode,syllabTemporary:this.task?this.task.syllab.temporary:a.a.defaultSyllab.temporary,syllabAdjustForWordLength:this.task?this.task.syllab.threshold.adjustForWordLength:a.a.defaultSyllab.threshold.adjustForWordLength,syllabModes:i()(o.a.MODES),syllabLangs:o.a.LANGS}},props:{task:{type:a.a,default:null}},computed:{model:function(){var t={syllab:this.syllab,speech:this.speech,syllabExceptions:this.syllabExceptions};return t.syllab.mode=this.syllabMode,t.syllab.temporary=this.syllabTemporary,t.syllab.threshold.adjustForWordLength=this.syllabAdjustForWordLength,t.speech.threshold.adjustForWordLength=this.speechAdjustForWordLength,t}},watch:{speech:function(){this.$emit("input",this.model)},speechAdjustForWordLength:function(){this.$emit("input",this.model)},syllab:function(){this.$emit("input",this.model)},syllabExceptions:function(){this.$emit("input",this.model)},syllabMode:function(){this.$emit("input",this.model)},syllabTemporary:function(){this.$emit("input",this.model)},syllabAdjustForWordLength:function(){this.$emit("input",this.model)}}}},function(t,e,s){"use strict";function n(t){return t.split("\n\n").filter(function(t){return!!t.trim()})}function i(t){return t.split("|")[0]}function a(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return f()(new d.a(t.trim().split(/\s+/gi).map(function(t){return i(t.trim())}).filter(function(t){return t.length&&"|"!==t.charAt(0)}))).map(function(t,s){return new m.b(t,e?s+"":"")})}function o(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.trim().split(/\s+/gi).map(function(t){return i(t.trim())}).filter(function(t){return t.length&&"|"!==t.charAt(0)}).map(function(t,s){return new m.b(t,e?s+"":"")})}function r(t,e){var s=n(t)[e];return s?o(s,!0):[]}Object.defineProperty(e,"__esModule",{value:!0});var l=s(131),c=s.n(l),u=s(101),d=s.n(u),h=s(34),f=s.n(h),p=s(5),m=s(11),v=s(15),g=s(16),_=s.n(g);e.default={name:"task-editor-images",components:{"temporal-notification":_.a},mixins:[v.a],data:function(){var t,e;return{images:[],selectedFile:null,editingImageIndex:-1,uploadProgress:-1,page:"-1",location:"bottom",offset:0,keepOriginalSize:"false",on:m.a.EVENT.none,fixationWords:[],fixationDuration:1e3,off:m.a.EVENT.none,delayDuration:1,isDraggingFileOverDropzone:!1,ON:(t={},c()(t,m.a.EVENT.none,"initially"),c()(t,m.a.EVENT.fixation,"on fixation"),t),OFF:(e={},c()(e,m.a.EVENT.none,"never"),c()(e,m.a.EVENT.image,"when other image is shown"),c()(e,m.a.EVENT.delay,"after"),e)}},props:{task:{type:p.a,default:null},currentText:{type:String,required:!0}},computed:{pageCount:function(){return n(this.currentText).length},currentWords:function(){return+this.page<0?a(this.currentText):r(this.currentText,+this.page)},isUploading:function(){return this.uploadProgress>=0},isEditing:function(){return this.editingImageIndex>=0},hasValidParams:function(){return this.constructImageEvent(this.on).isValid&&this.constructImageEvent(this.off).isValid}},methods:{listImages:function(){var t=[];this.task&&(this.task.pages.forEach(function(e){e.images&&e.images.forEach(function(e){t.find(function(t){return t.src===e.src})||t.push(e)})}),this.images=t)},edit:function(t){var e=this.images[t];this.page=""+e.page,this.location=e.location,this.offset=e.offset||0,this.keepOriginalSize=""+!!e.keepOriginalSize,this.on=this.deconstructImageEvent(e.on),this.off=this.deconstructImageEvent(e.off),this.editingImageIndex=t,this.$emit("editing",!0)},saveEdited:function(){var t=this.constructImageEvent(this.on),e=this.constructImageEvent(this.off);this.images[this.editingImageIndex]=new m.a({src:this.images[this.editingImageIndex].src,page:+this.page,location:this.location,offset:this.offset,keepOriginalSize:"true"===this.keepOriginalSize,on:t,off:e}),this.editingImageIndex=-1,this.$emit("input",{images:this.images}),this.$emit("editing",!1)},cancelEditing:function(){this.editingImageIndex=-1,this.$emit("editing",!1)},remove:function(t){var e=this,s=this.images.splice(t,1)[0];p.a.deleteImage(s,function(t){t&&e.setError(t,"Cannot delete the image")}),this.$emit("input",{images:this.images})},getImageURL:function(t){return window.URL.createObjectURL(t)},canShow:function(t){return!!t.file||!!t.src},getCSSBackgroundImage:function(t){return"background-image: url('"+(t.file?this.getImageURL(t.file):t.src)+"')"},getImageName:function(t){return t?t.file?t.file.name:t.src?m.a.getNameFromSource(t.src):"-":""},getImagePage:function(t){return t.page<0?"any":t.page+1},getImageLocation:function(t){return t.location+(t.offset?" + "+t.offset+"px":"")},hasParameters:function(t){return m.c.hasParameters(t)},formatEventName:function(t){return t.name===m.a.EVENT.none?"-":t.name===m.a.EVENT.fixation?"fixation on word":t.name},formatEventParams:function(t){if(t.name===m.a.EVENT.fixation){var e=t;return'"'+(e.word?[{text:e.word}]:e.words).map(function(t){return t.text}).join(" ")+'"\nlonger than '+t.duration+" ms"}return t.name===m.a.EVENT.delay?t.duration+" seconds":""},dropFile:function(t){this.isDraggingFileOverDropzone=!1;var e=t.dataTransfer,s=e.files;this.selectFile({target:{files:s}})},selectFile:function(t){var e=t.target.files[0];if(e){if("image/jpeg"!==e.type&&"image/png"!==e.type)return this.setError("Only JPEG and PNG images are supported");if(e.size>1e5)return this.setError("File size must not exceed 100 kB");this.selectedFile=e}else;},uploadImage:function(t){var e=this;this.uploadProgress=0;var s=this.constructImageEvent(this.on),n=this.constructImageEvent(this.off),i=new m.a({src:null,page:+this.page,location:this.location,offset:this.offset,keepOriginalSize:"true"===this.keepOriginalSize,on:s,off:n});p.a.uploadImage(this.selectedFile,i.meta,function(t){e.uploadProgress=t},function(t,s){e.uploadProgress=-1,t?e.setError(t,"Cannot upload the file"):(i.src=s,i.file=e.selectedFile,e.images.push(i),e.selectedFile=null,e.$emit("input",{images:e.images}))})},cancel:function(t){this.selectedFile=null},constructImageEvent:function(t){return t===m.a.EVENT.fixation?new m.d(this.fixationWords,this.fixationDuration):t===m.a.EVENT.delay?new m.e(this.delayDuration):new m.c(t)},deconstructImageEvent:function(t){return t.name===m.a.EVENT.fixation?(this.fixationWords=t.words||[t.word]||[],this.fixationDuration=t.duration):name===m.a.EVENT.delay&&(this.delayDuration=t.duration),t.name}},created:function(){this.listImages()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(34),i=s.n(n),a=s(25),o=s(5);e.default={name:"task-editor-questionnaire",data:function(){return{type:null,word:"",question:"",answers:[],questions:this.task&&this.task.questionnaire?i()(this.task.questionnaire):[],types:a.a.types}},props:{task:{type:o.a,default:null}},computed:{canAdd:function(){return this.type===this.types.word?this.word.length>0:this.question.length>5&&this.answers.every(function(t){return!!t.text.length})},model:function(){return{questionnaire:this.questions}}},watch:{questions:function(){this.$emit("input",this.model)}},methods:{answersToString:function(t){return t.answers.map(function(t){return t.text}).join(", ")},getEmptyAnswers:function(){return["","","",""].map(function(t,e){return{text:"",isCorrect:0===e}})},add:function(t){this.questions.push(new a.a(this.type.name,this.type===this.types.word?this.word:"",this.question,this.answers)),this.word="",this.question="",this.answers=this.getEmptyAnswers()},remove:function(t){this.questions=this.questions.filter(function(e){return e!==t})},selectCorrect:function(t){this.answers.forEach(function(t){t.isCorrect=!1}),t.isCorrect=!0}},created:function(){this.type=this.types.text,this.answers=this.getEmptyAnswers()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(5),i=s(382),a=s.n(i);s(18),s(92),s(11);e.default={name:"task-editor-text",components:{"task-text-formatting-instructions":a.a},data:function(){return{name:this.task&&this.task.name&&!this.isCloning?this.task.name:"",originalName:this.task&&this.task.name&&this.isCloning?this.task.name:"",alignment:this.task&&this.task.alignment?this.task.alignment:"center",fontname:this.task&&this.task.fontname?this.task.fontname:"Calibri",intro:this.task&&this.task.intro?this.task.intro:"",text:this.task&&this.task.pages?n.a.pagesToText(this.task.pages):"",FONTS:["Arial","Arial Black","Bookman","Calibri","Comic Sans MS","Courier","Courier New","Garamond","Georgia","Helvetica","Impact","Palatino","Times New Roman","Times","Trebuchet MS","Verdana"]}},props:{task:{type:n.a,default:null},isNameEditable:{type:Boolean},isCloning:{type:Boolean,default:!1},intros:{type:Array,default:function(){return[]}}},computed:{currentModel:function(){return{name:this.name,alignment:this.alignment,fontname:this.fontname,intro:this.intro,text:this.text}},hasTaskImagesBoundToWords:function(){return this.task&&this.task.pages&&this.task.pages.some(function(t){return!!t.images&&t.images.some(function(t){return!!t.on.words||!!t.on.word})})},placeholder:function(){return this.isCloning?this.originalName:"Name"}},watch:{name:function(){this.$emit("input",this.currentModel)},alignment:function(){this.$emit("input",this.currentModel)},fontname:function(){this.$emit("input",this.currentModel)},intro:function(){this.$emit("input",this.currentModel)},text:function(){this.$emit("input",this.currentModel)}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(154),i=s.n(n),a=s(119),o=s.n(a),r=s(5),l=s(125),c=s(123),u=s(11);s(40);e.default={name:"task-preview",components:{"task-text":i.a,"task-images":o.a},data:function(){return{textPresenter:null,feedbackProvider:null,fixatedWord:null}},props:{firstPage:{type:Array,default:null},task:{type:r.a}},computed:{hasNextPage:function(){return!!this.textPresenter&&this.textPresenter.hasNextPage},hasPrevPage:function(){return!!this.textPresenter&&this.textPresenter.hasPrevPage},images:function(){if(!this.textPresenter)return[];var t=this.textPresenter.originalPageIndex;return t<0?[]:this.task.pages[t].images},fixation:function(){return{word:this.fixatedWord,duration:9e5+Math.floor(1e5*Math.random())}}},methods:{syllabifyAll:function(t){var e=this;this.textPresenter.words.forEach(function(t,s){e.feedbackProvider.syllabifier.syllabifyElementText(s,t)})},next:function(t){this.fixatedWord=null,this.textPresenter.nextPage(),this.feedbackProvider.reset()},prev:function(t){this.fixatedWord=null,this.textPresenter.prevPage(),this.feedbackProvider.reset()},close:function(t){this.$emit("close")},syllabify:function(t){if(t.target.classList.contains("word")){var e=this.feedbackProvider.syllabifier.unprepare(t.target.textContent);e&&this.feedbackProvider.syllabifier.syllabifyElementText(t.target,e)}},pronounce:function(t){if(t.target.classList.contains("word")){var e=this.feedbackProvider.syllabifier.unprepare(t.target.textContent);e&&this.feedbackProvider.speaker.say(e)}},fixate:function(t){var e=t.target;if(e.classList.contains("word")){var s=this.feedbackProvider.syllabifier.unprepare(e.textContent);s&&(this.fixatedWord=new u.b(s,e.dataset.wordId))}}},mounted:function(){this.feedbackProvider=new c.a(this.task.syllab,this.task.speech),this.feedbackProvider.init();var t=this.$refs.container.$refs.text;this.textPresenter=new l.a(this.task,this.firstPage,t,this.feedbackProvider.syllabifier),this.next(null)},beforeDestroy:function(){this.feedbackProvider.cleanup()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s.d(e,"config",function(){return n});var n={apiKey:"AIzaSyBeKdNAX1_JHeGnPouQTYH0d3APAYzRZVY",authDomain:"eye-school-test.firebaseapp.com",databaseURL:"https://eye-school-test.firebaseio.com",projectId:"eye-school-test",storageBucket:"eye-school-test.appspot.com",messagingSenderId:"1082968904935"}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s.d(e,"config",function(){return n});var n={apiKey:"AIzaSyBppBDnPTQMqo2YLDDUTaXVJN4jZuGRwOw",authDomain:"uta-gasp-silko.firebaseapp.com",databaseURL:"https://uta-gasp-silko.firebaseio.com",projectId:"uta-gasp-silko",storageBucket:"uta-gasp-silko.appspot.com",messagingSenderId:"312523900223"}},function(t,e,s){"use strict";var n=s(7),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=s(10),u=s.n(c),d=s(9),h=s.n(d),f=s(32),p=(s(47),s(41),function(t){function e(t,s,n){o()(this,e);var a=u()(this,(e.__proto__||i()(e)).call(this,t,n));return a._ref=s,a}return h()(e,t),l()(e,[{key:"isAdmin",get:function(){return!0}}]),e}(f.a));e.a=p},function(t,e,s){"use strict";var n=s(7),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=s(10),u=s.n(c),d=s(9),h=s.n(d),f=s(32),p=(s(24),s(41),function(t){function e(t,s,n){o()(this,e);var a=u()(this,(e.__proto__||i()(e)).call(this,t,n));return a._ref=s,a}return h()(e,t),l()(e,[{key:"isSchool",get:function(){return!0}}]),e}(f.a));e.a=p},function(t,e,s){"use strict";var n=s(7),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=s(10),u=s.n(c),d=s(9),h=s.n(d),f=s(32),p=(s(4),s(41),function(t){function e(t,s,n){o()(this,e);var a=u()(this,(e.__proto__||i()(e)).call(this,t,n));return a._ref=s,a}return h()(e,t),l()(e,[{key:"isStudent",get:function(){return!0}}]),e}(f.a));e.a=p},function(t,e,s){"use strict";var n=s(7),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=s(10),u=s.n(c),d=s(9),h=s.n(d),f=s(32),p=(s(21),s(41),function(t){function e(t,s,n){o()(this,e);var a=u()(this,(e.__proto__||i()(e)).call(this,t,n));return a._ref=s,a}return h()(e,t),l()(e,[{key:"isTeacher",get:function(){return!0}}]),e}(f.a));e.a=p},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=s(17),l=s(47),c=s(24),u=s(21),d=s(4),h=s(211),f=s(212),p=s(214),m=s(213),v=(s(41),function(){function t(){i()(this,t)}return o()(t,null,[{key:"create",value:function(t,e,s){if("admin"===e.id)return console.log("logged as admin"),s(null,new h.a(t,new l.a,e));if(e&&e.path){if(e.path===c.a.db)return console.log("logged as school"),r.a.get(c.a,e.id,function(n,i){if(!n)return s(null,new f.a(t,i,e));s(n)});if(e.path===u.a.db)return console.log("logged as teacher"),r.a.get(u.a,e.id,function(n,i){if(!n)return s(null,new p.a(t,i,e));s(n)});if(e.path===d.a.db)return console.log("logged as student"),r.a.get(d.a,e.id,function(n,i){if(!n)return s(null,new m.a(t,i,e));s(n)})}s(new Error("invalid reference"))}}]),t}());e.a=v},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=s(157)("./db.development.js").config,l="https://us-central1-"+r.projectId+".cloudfunctions.net/",c=function(){function t(){i()(this,t)}return o()(t,null,[{key:"isTaskLocked",value:function(e,s){t._call("isTaskLocked",{id:e},s)}},{key:"areTasksLocked",value:function(e,s){t._call("areTasksLocked",{ids:e.join(",")},s)}},{key:"deleteTaskSessions",value:function(e,s){t._get("deleteTaskSessions",{id:e},s)}},{key:"deleteStudentTaskSessions",value:function(e,s){t._get("deleteStudentTaskSessions",{id:e},s)}},{key:"_get",value:function(t,e,s){var n=new Headers;n.append("Content-Type","text/json");var i={method:"GET",headers:n,mode:"cors",cache:"no-cache"},a=[];for(var o in e)a.push(o+"="+e[o]);var r=new Request(l+t+"?"+a.join("&"));window.fetch?window.fetch(r,i).then(function(t){return t?t.json():s(new Error("not response"))}).then(function(t){s(null,t)}).catch(function(t){console.error(t)}):s(new Error("not supported"))}},{key:"_parseResponse",value:function(t){var e=null,s=null;try{s="string"==typeof t?JSON.parse(t):t,s&&!s.err&&"result"in s?s=s.result:e=s.err||"no result"}catch(t){e=t&&t.message?t.message:"unknown error"}return{err:e,response:s}}},{key:"_call",value:function(e,s,n){t._get(e,s,function(e,s){if(e)return n(e);var i=t._parseResponse(s),a=i.err,o=i.response;n(a,o)})}}]),t}();e.a=c},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(40),i=s(159),a=s.n(i),o=s(158);new n.a({el:"#app",router:o.a,template:"<app/>",components:{App:a.a}})},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=function t(){i()(this,t),this.pronounced=!1,this.syllabified=!1};e.a=a},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=function(){function t(){i()(this,t),this.count=0,this.first=0,this.last=0,this.duration=0}return o()(t,[{key:"start",value:function(t){this.last=t,this.count||(this.first=this.last),this.count++}},{key:"stop",value:function(t){this.duration+=t-this.last}},{key:"currentDuration",value:function(t){return t-this.last}}]),t}();e.a=r},function(t,e,s){"use strict";var n=s(35),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=(s(48),s(57),s(90)),u=s(70),d=s(33),h=s(86),f=s(88),p=s(49),m=(s(17),s(5),s(4),s(72),s(6),s(11),s(25),function(){function t(){o()(this,t),this._date=null,this._start=0}return l()(t,[{key:"start",value:function(){this._date=(new Date).toJSON(),this._start=window.performance.now()}},{key:"value",get:function(){return Math.round(window.performance.now()-this._start)}},{key:"date",get:function(){return this._date}}]),t}()),v=function t(e){o()(this,t),this.words=new i.a,this.data=new d.a,this.data.isIntro=e},g=function(){function t(e){o()(this,t),this.hasIntroPage=e,this.items=[],this.pageIndex=-1}return l()(t,[{key:"page",value:function(t){return this.items[t]}},{key:"add",value:function(){var t=new v(!this.items.length&&this.hasIntroPage);return this.items.push(t),this.pageIndex++,t}},{key:"done",value:function(){this.pageIndex=-1}},{key:"current",get:function(){return this.items[this.pageIndex]}},{key:"last",get:function(){return this.items[this.items.length-1]}},{key:"ready",get:function(){return this.pageIndex>=0}}]),t}(),_=function t(e,s,n,i){o()(this,t),this.date=(new Date).toJSON(),this.student=s.id,this.task=e.id,this.cls=e.cls,this.font=n,this.feedbacks=i,this.screen=c.a.full,this.data=null},b=function(){function t(e,s,n,i){o()(this,t),this._session=new _(e,s,n,i),this._pages=new g(!!e.intro),this._timer=new m,this._focusedElem=null,this._currentWord=null}return l()(t,[{key:"start",value:function(){this._timer.start()}},{key:"stop",value:function(t){this.setFocusedWord(null),this._pages.done(),this._save(t)}},{key:"nextPage",value:function(){this._closeImages(),this._pages.add()}},{key:"longGazedWords",value:function(t){var e=[],s=/\b([\w$%&]+\S*\b)/;return this._pages.items.forEach(function(n){n.words.forEach(function(n){if(n.focusing.duration>=t){var i=s.exec(n.text);i&&i.length>0?e.push(i[0]):console.log("DataCollector.longGazedWords ??",n.text)}})}),e}},{key:"setFocusedWord",value:function(t){if(this._focusedElem===t||!this._pages.ready)return null;if(this._currentWord&&(this._currentWord.focusing.stop(this._timer.value),this._currentWord=null),t){var e=this._pages.current;this._currentWord=e.words.get(t),this._currentWord||(this._currentWord=new h.a(t,this._pages.pageIndex),e.words.set(t,this._currentWord)),this._currentWord.focusing.start(this._timer.value)}return this._focusedElem=t,this._currentWord?this._currentWord.text:null}},{key:"addGazePoint",value:function(t){this._pages.ready&&this._pages.current.data.fixations.push(u.a.from(t,this._timer.value))}},{key:"syllabified",value:function(t){if(t&&this._pages.ready){var e=this._pages.current,s=e.words.get(t);s&&(s.feedback.syllabified=!0,e.data.syllabifications.push(new f.a(this._timer.value,s.text,s.rect)))}}},{key:"pronounced",value:function(t){if(t&&this._pages.ready){var e=this._pages.current,s=e.words.get(t);s&&(s.feedback.pronounced=!0,e.data.speech.push(new f.a(this._timer.value,s.text,s.rect)))}}},{key:"imageShow",value:function(t){console.log("DC","shown"),this._pages.current.data.images.push(new p.a(t,this._timer.value)),console.log("DC","---")}},{key:"imageHide",value:function(t){console.log("DC","hidden");var e=this._pages.current||this._pages.last,s=e.data.images.find(function(e){return e.src===t.src&&e.isCurrent});s&&s.hide(this._timer.value),console.log("DC","---")}},{key:"_closeImages",value:function(){var t=this,e=this._pages.current||this._pages.last;e&&e.data.images.forEach(function(e){e.isCurrent&&e.hide(t._timer.value)})}},{key:"_save",value:function(t){return t()}},{key:"focusedWord",get:function(){return this._currentWord?{text:this._currentWord.text,duration:this._currentWord.focusing.currentDuration(this._timer.value)}:null}},{key:"wordReadingDuration",get:function(){var t=this._pages.current;if(!t)return null;var e=0,s=0;return t.words.forEach(function(t){t.focusing.duration>200&&t.focusing.duration<2e3&&(e+=t.focusing.duration,s++)}),s?e/s:null}}]),t}();e.a=b},function(t,e,s){"use strict";var n=s(35),i=s.n(n),a=s(0),o=s.n(a),r=s(1),l=s.n(r),c=s(11),u=function(){function t(e){var s=e.onShow,n=void 0===s?function(t){}:s,a=e.onHide,r=void 0===a?function(t){}:a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o()(this,t),this._onShow=n,this._onHide=r,this._images=l,this._locations={left:null,right:null,bottom:null},this._prefetched=new i.a,this._timers=new i.a,this._prefetch(),this._start()}return l()(t,[{key:"shutdown",value:function(){var t=this;console.log("IMC","shutdown"),this._timers.forEach(function(e,s){window.clearTimeout(e),t._hide(s)});for(var e in this._locations){var s=this._locations[e];s&&this._hide(s)}this._timers.clear(),console.log("IMC","---")}},{key:"setImages",value:function(t){console.log("IMC","setImages"),this.shutdown(),this._images=t,this._start(),console.log("IMC","---")}},{key:"fixate",value:function(t,e){var s=this;t&&this._images.forEach(function(n){if(s._locations[n.location]!==n&&n.on.name===c.a.EVENT.fixation){var i=n.on,a=i.word?[i.word]:i.words;a.find(function(e){return t.isEqual(e)})&&i.duration<e&&(console.log("IMC",'fixated "',a.map(function(t){return"-"+t.text+"-"}).join(" "),'" ---'),s._show(n))}})}},{key:"_prefetch",value:function(){var t=this;this._images.forEach(function(e){var s=new Image;s.src=e.src,s.width=1,s.height=1,s.style.position="absolute",s.style.left="0",s.style.top="0",window.document.body.appendChild(s),t._prefetched.set(e,s)})}},{key:"_start",value:function(){var t=this;console.log("IMC","_start"),this._images.forEach(function(e){e.on.name===c.a.EVENT.none&&t._show(e)}),console.log("IMC","---")}},{key:"_show",value:function(t){var e=this;console.log("IMC","_show");for(var s in this._locations){var n=this._locations[s];n&&n.off.name===c.a.EVENT.image&&this._hide(n)}if(t.off.name===c.a.EVENT.delay){var i=window.setTimeout(function(){e._hide(t),e._timers.delete(t)},1e3*t.off.duration);this._timers.set(t,i)}this._locations[t.location]=t,this._onShow(t),console.log("IMC","---")}},{key:"_hide",value:function(t){console.log("IMC","_hide"),this._locations[t.location]=null,this._onHide(t),console.log("IMC","---")}}]),t}();e.a=u},function(t,e,s){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;s=Math.ceil(s),t=Math.floor(t);var n=Math.round(Math.random()*(t-s));return(n=Math.round(n/e)*e)+s+0}var i=s(76),a=s.n(i),o=s(52),r=s.n(o),l=s(34),c=s.n(l),u=s(0),d=s.n(u),h=s(1),f=s.n(h),p=!!window.webpackHotUpdate,m=function(){function t(e){d()(this,t),this.enabled=!0,this._name=e,this._css=["background: hsl( "+n(360,10)+", "+n(100,20)+"%, "+n(100,20)+"% )","display: inline-block"].join(";"),this.info(this._name+": __module_created___")}return f()(t,[{key:"info",value:function(){if(this.enabled){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];var n=this._stringify(e);console.info("%c  ",this._css,this._format(n))}}},{key:"ok",value:function(){if(this.enabled){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];var n=this._stringify(e);console.log("%c  ",this._css,this._format(n))}}},{key:"error",value:function(){if(this.enabled){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];var n=this._stringify(e);console.error("%c  ",this._css,this._format(n))}}},{key:"_stringify",value:function(t){return c()(t).map(function(t){return"object"===(void 0===t?"undefined":r()(t))?a()(t):t}).join(" ")}},{key:"_format",value:function(t){return this._name+": "+t}}]),t}();e.a=function(t){return p?new m(t):{info:function(){},ok:function(){},error:function(){}}}},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=s(73),l=s(51),c=s(13),u=(s(20),s(4),s(57),s(74),function(){function t(e,s){i()(this,t),this.ref=e,this.tasks=s,this.students=null}return o()(t,[{key:"loadStudents",value:function(t){var e=this;this.ref.getStudents(function(s,n){if(e.students=[],s)return t(s);n.sort(c.a.byName),n.forEach(function(s){e._loadStudentSessions(s,t)})})}},{key:"_loadStudentSessions",value:function(t,e){var s=this;t.getSessions(function(n,i){if(n)return e(n);var a=new r.a(t);i.forEach(function(e){var n=s.tasks.find(function(t){return t.id===e.task});if(n){var i=new l.a(e,t,n,s.ref);n.sessions.push(i),n.students.add(a),a.sessions.push(i)}}),a.sessions.length&&s.students.push(a),e()})}}]),t}());e.a=u},function(t,e,s){"use strict";var n=s(0),i=s.n(n),a=s(1),o=s.n(a),r=s(95),l=(s(33),s(88),s(70),0),c=function(){function t(e,s,n,a){i()(this,t),this._root=e,this._name=s,this._session=n,this._offset=a,this._color=r.a.colors[l++%r.a.colors.length],this._pointerSize=8,this._fixationEndTimer=null,this._fixationGrowTimer=null,this._nextTimer=null,this._syllabTimer=null,this._fixations=null,this._currentFixation=null,this._currentDuration=0,this._fixationIndex=-1,this._callbacks={},this._syllabifications=null,this._nextSyllabificationIndex=0,this._pointer=null,this._lastPause=0,this.__next=this._next.bind(this)}return o()(t,[{key:"start",value:function(t,e){if(this._callbacks=e||{},this._callbacks.fixation=this._callbacks.fixation||function(){},this._callbacks.completed=this._callbacks.completed||function(){},this._callbacks.syllabification=this._callbacks.syllabification||function(){},this._fixations=this._session[t].fixations,!this._fixations)return void this._callbacks.completed("no data");this._syllabifications=this._session[t].syllabifications,this._nextSyllabificationIndex=this._syllabifications?0:-1,this._fixationIndex=0,this._pointer=document.createElement("div"),this._pointer.classList.add("track-pointer"),this._pointer.classList.add("invisible"),this._root.appendChild(this._pointer),this._nextTimer=setTimeout(this.__next,1500)}},{key:"stop",value:function(){this._stopFixationTimers(),this._nextTimer&&(clearTimeout(this._nextTimer),this._nextTimer=null),this._pointer&&(this._root.removeChild(this._pointer),this._pointer=null)}},{key:"togglePause",value:function(){return!!this._pointer&&(this._nextTimer?(this._stopFixationTimers(),clearTimeout(this._nextTimer),this._nextTimer=null,!0):(this._nextTimer=setTimeout(this.__next,this._lastPause),this._moveFixation(this._currentFixation),!1))}},{key:"_stopFixationTimers",value:function(){this._fixationEndTimer&&(clearTimeout(this._fixationEndTimer),this._fixationEndTimer=null),this._fixationGrowTimer&&(clearInterval(this._fixationGrowTimer),this._fixationGrowTimer=null),this._syllabTimer&&(clearTimeout(this._syllabTimer),this._syllabTimer=null)}},{key:"_next",value:function(){var t=this._fixations[this._fixationIndex];this._moveFixation(t),this._fixationIndex++,this._fixationIndex<this._fixations.length?(this._lastPause=this._fixations[this._fixationIndex].ts-t.ts,this._nextTimer=setTimeout(this.__next,this._lastPause)):(this._callbacks.completed(),this._root.removeChild(this._pointer),this._pointer=null,this._nextTimer=null)}},{key:"_moveFixation",value:function(t){var e=this;this._stopFixationTimers(),t?(this._checkSyllabification(t),this._callbacks.fixation(t,this._pointer),t.x>0&&t.y>0&&(this._currentDuration=100,this._updatePointer(),this._pointer.classList.remove("invisible")),this._fixationEndTimer=setTimeout(function(){e._stopFixationTimers(),e._pointer&&e._pointer.classList.add("invisible")},t.duration),this._fixationGrowTimer=setInterval(function(){e._updatePointer()},100)):this._pointer.classList.add("invisible"),this._currentFixation=t}},{key:"_updatePointer",value:function(){if(this._currentFixation&&this._pointer){var t=Math.round(Math.sqrt(this._currentDuration));this._pointer.setAttribute("style","\n      left: "+(this._currentFixation.x+this._offset.x-t/2)+"px;\n      top: "+(this._currentFixation.y+this._offset.y-t/2)+"px;\n      width: "+t+"px;\n      height: "+t+"px;\n      border-radius: "+t/2+"px;\n      background-color: "+this._color+";"),this._currentDuration+=100}}},{key:"_checkSyllabification",value:function(t){var e=this;if(!(this._nextSyllabificationIndex<0)){var s=this._syllabifications[this._nextSyllabificationIndex],n=t.tsSync+t.duration;s.ts<n&&(this._nextSyllabificationIndex++,this._nextSyllabificationIndex===this._syllabifications.length&&(this._nextSyllabificationIndex=-1),this._syllabTimer=setTimeout(function(){e._syllabTimer=null,e._callbacks.syllabification(s)},n-s.ts))}}},{key:"name",get:function(){return this._name}},{key:"color",get:function(){return this._color}}],[{key:"resetColors",value:function(){l=0}}]),t}();e.a=c},function(t,e,s){"use strict";s.d(e,"a",function(){return l});var n=s(1),i=s.n(n),a=s(0),o=s.n(a),r=(s(33),s(87),function t(e){o()(this,t),this.id=e.id,this.totalDuration=0}),l=function(){function t(e,s,n,i){o()(this,t),this._root=e,this._name=s,this._id=i,this._pointerSize=8,this._pointer=null,this._fixationTimer=null,this._nextTimer=null,this._session=n,this._fixations=null,this._words=null,this._fixationIndex=-1,this._onWordFixated=null,this._onCompleted=null,this.__next=this._next.bind(this)}return i()(t,[{key:"start",value:function(t,e,s,n){if(this._onWordFixated=s,this._onCompleted=n,this._fixations=t,this._words=e.map(function(t){return new r(t)}),this._words.forEach(function(t){t.totalDuration=0}),this._fixationIndex=0,!t)return this._doneMessage="no data",void n("no data");this._pointer=document.createElement("div"),this._pointer.classList.add("pointer"),this._pointer.classList.add("invisible"),this._root.appendChild(this._pointer),this._nextTimer=setTimeout(this.__next,1500)}},{key:"stop",value:function(){this._nextTimer&&(clearTimeout(this._nextTimer),this._nextTimer=null),this._fixationTimer&&(clearTimeout(this._fixationTimer),this._fixationTimer=null),this._pointer&&(this._root.removeChild(this._pointer),this._pointer=null)}},{key:"togglePause",value:function(){return!!this._pointer&&(this._nextTimer?(clearTimeout(this._nextTimer),this._nextTimer=null,!0):(this._nextTimer=setTimeout(this.__next,500),!1))}},{key:"_next",value:function(){var t=this._fixations[this._fixationIndex];if(this._moveFixation(t.word,t.duration),++this._fixationIndex<this._fixations.length){var e=this._fixations[this._fixationIndex].ts-t.ts;this._nextTimer=setTimeout(this.__next,e)}else this._onCompleted(),this._root.removeChild(this._pointer),this._pointer=null,this._nextTimer=null}},{key:"_moveFixation",value:function(t,e){var s=this;this._fixationTimer&&(clearTimeout(this._fixationTimer),this._fixationTimer=null),t?(this._onWordFixated(t,e,this._pointer),this._pointer.classList.remove("invisible"),this._fixationTimer=setTimeout(function(){s._fixationTimer=null,s._pointer&&s._pointer.classList.add("invisible")},e)):this._pointer.classList.add("invisible")}},{key:"name",get:function(){return this._name}},{key:"id",get:function(){return this._id}},{key:"doneMessage",get:function(){return"done"}},{key:"pointerSize",get:function(){return this._pointerSize}},{key:"pointer",get:function(){return this._pointer}},{key:"session",get:function(){return this._session}},{key:"words",get:function(){return this._words}},{key:"hasData",get:function(){return!!this._fixations}}]),t}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,function(t,e,s){s(314);var n=s(2)(s(161),s(403),"data-v-425b4d8b",null);t.exports=n.exports},function(t,e,s){s(301);var n=s(2)(s(162),s(391),"data-v-0cb43a53",null);t.exports=n.exports},function(t,e,s){s(346);var n=s(2)(s(163),s(434),"data-v-e5029da0",null);t.exports=n.exports},function(t,e,s){s(330);var n=s(2)(s(164),s(417),"data-v-690d1f10",null);t.exports=n.exports},function(t,e,s){s(323);var n=s(2)(s(165),s(411),"data-v-5b4bf9e5",null);t.exports=n.exports},function(t,e,s){s(305);var n=s(2)(s(166),s(395),"data-v-248409ab",null);t.exports=n.exports},function(t,e,s){s(322);var n=s(2)(s(167),s(410),"data-v-5850bae0",null);t.exports=n.exports},function(t,e,s){s(333);var n=s(2)(s(168),s(421),"data-v-7112b42e",null);t.exports=n.exports},function(t,e,s){s(334);var n=s(2)(s(169),s(422),"data-v-73b91f1e",null);t.exports=n.exports},function(t,e,s){s(332);var n=s(2)(s(170),s(419),"data-v-7024c5d7",null);t.exports=n.exports},function(t,e,s){s(320);var n=s(2)(s(171),s(408),"data-v-5669a8c7",null);t.exports=n.exports},function(t,e,s){var n=s(2)(s(172),s(431),null,null);t.exports=n.exports},function(t,e,s){s(326);var n=s(2)(s(173),s(413),"data-v-5e4a4003",null);t.exports=n.exports},function(t,e,s){s(331);var n=s(2)(s(174),s(418),"data-v-6e5a70c2",null);t.exports=n.exports},function(t,e,s){s(308);var n=s(2)(s(175),s(397),"data-v-30436e93",null);t.exports=n.exports},function(t,e,s){s(338);var n=s(2)(s(176),s(425),"data-v-7f8a5885",null);t.exports=n.exports},function(t,e,s){var n=s(2)(s(177),null,null,null);t.exports=n.exports},function(t,e,s){s(306);var n=s(2)(s(178),null,null,null);t.exports=n.exports},function(t,e,s){s(327);var n=s(2)(s(180),s(414),"data-v-634297ab",null);t.exports=n.exports},function(t,e,s){s(342);var n=s(2)(s(181),s(429),"data-v-a05465c6",null);t.exports=n.exports},function(t,e,s){s(315);var n=s(2)(s(182),s(404),"data-v-47a95014",null);t.exports=n.exports},function(t,e,s){s(312);var n=s(2)(s(184),s(401),"data-v-3dcb22e2",null);t.exports=n.exports},function(t,e,s){s(337),s(336);var n=s(2)(s(185),s(424),"data-v-7d5d875b",null);t.exports=n.exports},function(t,e,s){s(317);var n=s(2)(s(187),s(406),"data-v-52f54fae",null);t.exports=n.exports},function(t,e,s){s(304);var n=s(2)(s(190),s(394),"data-v-1f310dde",null);t.exports=n.exports},function(t,e,s){var n=s(2)(s(192),s(420),null,null);t.exports=n.exports},function(t,e,s){s(344);var n=s(2)(s(194),s(432),"data-v-c82dcd74",null);t.exports=n.exports},function(t,e,s){s(309);var n=s(2)(s(195),s(398),"data-v-332a2e2e",null);t.exports=n.exports},function(t,e,s){s(343);var n=s(2)(s(196),s(430),"data-v-a42f22a6",null);t.exports=n.exports},function(t,e,s){s(310);var n=s(2)(s(198),s(399),"data-v-3b33b144",null);t.exports=n.exports},function(t,e,s){s(302);var n=s(2)(s(200),s(392),"data-v-0fb9d777",null);t.exports=n.exports},function(t,e,s){s(316);var n=s(2)(s(202),s(405),"data-v-4e966ac5",null);t.exports=n.exports},function(t,e,s){s(347);var n=s(2)(s(203),s(435),"data-v-ec8f61e6",null);t.exports=n.exports},function(t,e,s){s(307);var n=s(2)(s(204),s(396),"data-v-2b86d2b2",null);t.exports=n.exports},function(t,e,s){s(328);var n=s(2)(s(205),s(415),"data-v-65010d36",null);t.exports=n.exports},function(t,e,s){s(335);var n=s(2)(s(206),s(423),"data-v-7519dcc6",null);t.exports=n.exports},function(t,e,s){s(303);var n=s(2)(s(207),s(393),"data-v-11eeeada",null);t.exports=n.exports},function(t,e,s){s(311);var n=s(2)(s(208),s(400),"data-v-3b6ac658",null);t.exports=n.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:{"is-modal":t.isModal},attrs:{id:"loading"}})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"assignment"}},[s("div",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v(t._s(t.task?t.task.name:""))])]),t.state===t.STATES.calibrate?s("calib-page",{attrs:{texts:t.introTexts},on:{close:t.calibrate}}):t._e(),t.intro?s("start-page",{directives:[{name:"show",rawName:"v-show",value:t.state===t.STATES.start,expression:"state === STATES.start"}],attrs:{texts:t.introTexts,task:t.task,student:t.student},on:{close:t.startPageClosed,saved:t.gazeDataSaved}}):t._e(),t.state===t.STATES.questionnaire?s("questionnaire-page",{attrs:{questionnaire:t.task.questionnaire,longGazedWords:t.longGazedWords},on:{finished:t.questionnaireDone}}):t._e(),t.state===t.STATES.finished?s("finished-page",{attrs:{texts:t.introTexts,saving:!t.isDataSaved}}):t._e(),s("modal-error",{attrs:{text:t.errorText},on:{close:t.exit}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"panel notification is-paddingless",attrs:{id:"task-text-formatting-instructions"}},[s("p",{staticClass:"panel-block"}),s("h4",{staticClass:"heading is-4 has-text-centered"},[t._v("Rules")]),s("p"),s("p",{staticClass:"panel-block"},[s("code",[t._v("Empty line")]),s("span",{staticClass:"explanation"},[t._v("page separator")])]),s("p",{staticClass:"panel-block"},[s("code",[t._v("|")]),s("span",{staticClass:"explanation"},[t._v("applies comma-separated styles listed afterward for"),s("span",{staticClass:"explanation is-inline-block"},[t._v("a word:"),s("div",{staticClass:"example"},[s("i",[t._v("Iso koulupiha|bold")]),s("span",[t._v("= Iso")]),s("b",[t._v("koulupiha")])])]),s("span",{staticClass:"explanation is-inline-block"},[t._v("a line:"),s("div",{staticClass:"example"},[s("i",[t._v("Iso koulupiha |bold")]),s("span",[t._v("=")]),s("b",[t._v("Iso koulupiha")])])])])]),s("p",{staticClass:"panel-block"},[s("code",[s("a",{attrs:{href:"https://www.w3schools.com/cssref/css_colors.asp",target:"_blank"}},[t._v("red")]),s("span"),s("a",{attrs:{href:"https://www.w3schools.com/colors/colors_rgb.asp"}},[t._v("#22aaff")]),s("span"),s("abbr",{attrs:{title:"25% lighter than the normal text"}},[t._v("light")]),s("span"),s("abbr",{attrs:{title:"25% darker than the normal text"}},[t._v("dark")])]),s("span",{staticClass:"explanation"},[t._v("font color")])]),s("p",{staticClass:"panel-block"},[s("code",[t._v("22pt")]),s("span",{staticClass:"explanation"},[t._v("font size")])]),s("p",{staticClass:"panel-block"},[s("code",[t._v("italic regular")]),s("span",{staticClass:"explanation"},[t._v("font style")])]),s("p",{staticClass:"panel-block"},[s("code",[t._v("normal bold")]),s("span",{staticClass:"explanation"},[t._v("font weight")])]),s("p",{staticClass:"panel-block"},[s("span",{staticClass:"has-text-centered"},[s("h4",{staticClass:"heading is-4 is-inline has-text-centered"},[t._v("Example")]),s("i",{staticClass:"is-block"},[t._v("A big grey line with blue|#22aaff & italic|italic words |grey,18pt")]),s("div",{staticClass:"is-block",staticStyle:{color:"grey","font-size":"18pt"}},[s("span",[t._v("A big grey line with")]),s("span",{staticStyle:{color:"#22aaff"}},[t._v("blue")]),s("span",[t._v("&")]),s("span",{staticStyle:{"font-style":"italic"}},[t._v("italic")]),s("span",[t._v("words")])])])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"field",attrs:{id:"task-editor-text"}},[s("p",{staticClass:"control"}),s("div",{staticClass:"columns is-inlined"},[t.isNameEditable?s("div",{staticClass:"column"},[s("label",{staticClass:"label"},[t._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]):t._e(),s("div",{staticClass:"column is-narrow"},[s("label",{staticClass:"label"},[t._v("Alignment")]),s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.alignment,expression:"alignment"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.alignment=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"center"}},[t._v("center")]),s("option",{attrs:{value:"left"}},[t._v("left")])])])]),s("div",{staticClass:"column is-narrow"},[s("label",{staticClass:"label"},[t._v("Font")]),s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.fontname,expression:"fontname"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.fontname=e.target.multiple?s:s[0]}}},t._l(t.FONTS,function(e){return s("option",{key:e},[t._v(t._s(e))])}))])]),s("div",{staticClass:"column is-narrow"},[s("label",{staticClass:"label"},[t._v("Introduction")]),s("span",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.intro,expression:"intro"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.intro=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[t._v("none")]),t._l(t.intros,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})],2)])])]),s("p"),s("p",{staticClass:"control"}),s("div",{staticClass:"columns is-inlined tip-parent"},[t._m(0),s("div",{staticClass:"column is-narrow tip-header"},[t._v("Formatting")]),s("task-text-formatting-instructions",{staticClass:"is-tip"})],1),s("p"),t.hasTaskImagesBoundToWords?s("div",{staticClass:"notification is-warning"},[t._v("The task contains images bound to words and therefore its text cannot be modified.")]):t._e(),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"textarea text",attrs:{placeholder:"Text",disabled:t.hasTaskImagesBoundToWords},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"column"},[s("label",{staticClass:"label"},[t._v("Text")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"login"}},[s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",class:{"is-danger":t.isEmailValid===t.checkValues.INVALID},attrs:{type:"email",placeholder:"Email or ID",autofocus:"autofocus"},domProps:{value:t.email},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.login(e)},input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._m(0),t.isEmailValid===t.checkValues.INVALID?s("span",{staticClass:"icon is-small is-right"},[s("i",{staticClass:"fa fa-exclamation-triangle"})]):t._e()]),s("p",{staticClass:"control has-icons-left has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",class:{"is-danger":t.isPasswordValid===t.checkValues.INVALID},attrs:{type:"password",placeholder:"Password"},domProps:{value:t.password},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.login(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._m(1),t.isPasswordValid===t.checkValues.INVALID?s("span",{staticClass:"icon is-small is-right"},[s("i",{staticClass:"fa fa-exclamation-triangle"})]):t._e()]),s("p",{staticClass:"control"}),s("div",{staticClass:"has-text-centered"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.canLogIn},on:{click:t.login}},[t._v("Log in")])]),s("p")]),s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fa fa-envelope"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fa fa-user-secret"})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section",attrs:{id:"instructions"}},[s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])]),s("temporal-notification",{attrs:{type:"success",show:t.showSuccess}},[s("span",[t._v(t._s(t.successMessage))])]),s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v("Add instruction")]),s("div",{staticClass:"panel-block is-paddingless"},[s("intro-editor",{staticClass:"control",attrs:{"name-editable":!0,reload:t.resetNew},on:{save:t.tryToCreate}})],1)]),s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v("Instructions")]),s("div",{staticClass:"panel-block is-paddingless"},[null===t.intros?s("div",{staticClass:"container"},[s("loading")],1):t.intros.length?s("table",{staticClass:"table"},[t._m(0),s("tbody",t._l(t.intros,function(e){return s("tr",[s("td",[t._v(t._s(e.name))]),s("td",{staticClass:"keep-lines"},[t._v(t._s(e.textsSummary()))]),s("td",[s("div",{staticClass:"is-pulled-right is-flex"},[s("button",{staticClass:"button is-light",on:{click:function(s){t.edit(e)}}},[s("i",{staticClass:"fa fa-edit"})]),s("button",{staticClass:"button is-danger",on:{click:function(s){t.remove(e)}}},[s("i",{staticClass:"far fa-trash-alt"})])])])])}))]):s("div",{staticClass:"container"},[s("i",[t._v("No instructions exists yet")])])])]),t.toEdit?s("modal-container",{attrs:{title:"Instruction editor"},on:{close:t.closeEditor}},[s("intro-editor",{attrs:{action:"Save","show-labels":!0,intro:t.toEdit},on:{save:t.saveEdited}})],1):t._e(),t.toDelete?s("remove-warning",{attrs:{object:"instruction",name:t.toDeleteName},on:{close:t.removeWarningClosed}}):t._e()],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Name")]),s("th",[t._v("Text")]),s("th",[s("div",{staticClass:"is-pulled-right"},[t._v("Actions")])])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"task-editor-feedback"}},[s("div",{staticClass:"columns is-paddingless is-marginless"},[s("div",{staticClass:"column is-paddingless is-marginless is-narrow"},[s("feedback-editor",{attrs:{header:"Speech",languages:t.speechLangs},model:{value:t.speech,callback:function(e){t.speech=e},expression:"speech"}},[s("div",{staticClass:"field"},[s("div",{staticClass:"field is-horizontal"},[s("bulma-checkbox",{attrs:{label:"word-length dependent",disabled:!t.speech.language},model:{value:t.speechAdjustForWordLength,callback:function(e){t.speechAdjustForWordLength=e},expression:"speechAdjustForWordLength"}})],1)])]),s("feedback-editor",{attrs:{header:"Syllabification",languages:t.syllabLangs},model:{value:t.syllab,callback:function(e){t.syllab=e},expression:"syllab"}},[s("div",{staticClass:"field"},[s("div",{staticClass:"field is-horizontal"},[s("span",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.syllabMode,expression:"syllabMode"}],attrs:{disabled:!t.syllab.language},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.syllabMode=e.target.multiple?s:s[0]}}},t._l(t.syllabModes,function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])}))])]),s("div",{staticClass:"field is-horizontal"},[s("bulma-checkbox",{attrs:{label:"temporary",disabled:!t.syllab.language},model:{value:t.syllabTemporary,callback:function(e){t.syllabTemporary=e},expression:"syllabTemporary"}})],1),s("div",{staticClass:"field is-horizontal"},[s("bulma-checkbox",{attrs:{label:"word-length dependent",disabled:!t.syllab.language},model:{value:t.syllabAdjustForWordLength,callback:function(e){t.syllabAdjustForWordLength=e},expression:"syllabAdjustForWordLength"}})],1)])])],1),s("div",{staticClass:"column is-paddingless is-marginless"},[t._m(0),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.syllabExceptions,expression:"syllabExceptions"}],staticClass:"textarea exceptions",attrs:{disabled:!t.syllab.language,placeholder:"Syllabifications"},domProps:{value:t.syllabExceptions},on:{input:function(e){e.target.composing||(t.syllabExceptions=e.target.value)}}})])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns is-paddingless is-marginless"},[s("div",{staticClass:"column is-paddingless is-marginless is-narrow"},[s("label",{staticClass:"label"},[t._v("Exceptions")])]),s("div",{staticClass:"column has-text-right is-paddingless is-marginless"},[s("i",{staticClass:"instruction"},[t._v("Example: maailma=maa il ma")])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"task-page"}},[s("task-text",{ref:"container",attrs:{fontname:t.task.fontname}}),s("task-images",{directives:[{name:"show",rawName:"v-show",value:t.images,expression:"images"}],attrs:{images:t.images,fixation:t.fixation},on:{show:t.onImageShow,hide:t.onImageHide}}),s("div",{staticClass:"is-bottom-right"},[s("a",{directives:[{name:"show",rawName:"v-show",value:t.hasNextPage,expression:"hasNextPage"}],staticClass:"button is-primary is-large",on:{click:t.next}},[s("span",[t._v(t._s(t.titleNext))])]),s("a",{directives:[{name:"show",rawName:"v-show",value:!t.hasNextPage,expression:"!hasNextPage"}],staticClass:"button is-primary is-large",on:{click:t.finish}},[s("span",[t._v(t._s(t.titleFinish))])])])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel",attrs:{id:"student-list"}},[s("p",{staticClass:"panel-heading"},[s("nav",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[t._v(t._s(t.displayCount(t.students,"student")))])]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button",{staticClass:"button is-primary",on:{click:t.openEditor}},[t._v("Add")])])])])]),s("div",{staticClass:"panel-block is-paddingless"},[null===t.students?s("div",{staticClass:"container"},[s("loading")],1):s("table",{staticClass:"table"},[s("thead",[t.students&&t.students.length?s("tr",{staticClass:"is-subheader"},[s("th",[t._v("Name")]),t._m(0),s("th",{staticClass:"is-narrow"})]):t._e()]),s("tbody",t._l(t.students,function(e){return s("tr",{key:t.currentClass.id+e.id},[s("td",[t._v(t._s(e.name))]),s("td",{staticClass:"is-narrow"},[s("div",{staticClass:"tags"},t._l(e.assignments,function(n,i){return t.doesTaskBelongsToClass(i)?s("div",{staticClass:"tag is-medium"},[t._v(t._s(t.getAssignmentName(i))),s("button",{staticClass:"delete is-small",on:{click:function(s){t.removeAssignment(e,i)}}})]):t._e()})),s("div",{directives:[{name:"show",rawName:"v-show",value:t.availableTasks(e).length,expression:"availableTasks( student ).length"}],ref:t.currentClass.id+e.id,refInFor:!0,staticClass:"dropdown"},[s("div",{staticClass:"dropdown-trigger",on:{click:function(t){t.stopPropagation()}}},[s("button",{staticClass:"button",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"},on:{click:function(s){t.toggleTaskList(t.currentClass.id+e.id)}}},[s("span",[t._v("Add an assignment")]),t._m(1,!0)])]),s("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[s("div",{staticClass:"dropdown-content"},t._l(t.availableTasks(e),function(n){return s("div",{staticClass:"dropdown-item",on:{click:function(s){s.stopPropagation(),t.addAssignment(e,n.id,s)}}},[t._v(t._s(n.name))])}))])])]),s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button",attrs:{title:"Remove the student from this class"},on:{click:function(s){t.remove(e)}}},[s("i",{staticClass:"fa fa-times"})])])])}))])]),t.isEditing?s("modal-container",{attrs:{title:"Available students"},on:{close:t.closeEditor}},[s("item-selection-box",{attrs:{items:t.schoolGrades,multiple:!0,"single-group":!1,"item-name":"grade","subitem-name":"student"},on:{accept:t.addNewStudents}})],1):t._e(),s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])]),s("temporal-notification",{attrs:{type:"success",show:t.showSuccess}},[s("span",[t._v(t._s(t.successMessage))])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticClass:"is-narrow"},[s("div",{staticClass:"has-text-centered"},[t._v("Assignments")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fa fa-angle-down",attrs:{"aria-hidden":"true"}})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel",attrs:{id:"task-list"}},[s("p",{staticClass:"panel-heading"},[s("nav",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[t._v(t._s(t.displayCount(t.tasks,"task")))])]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("button",{staticClass:"button is-primary",on:{click:t.openNewTextBox}},[t._v("Create new")])])])])]),s("div",{staticClass:"panel-block is-paddingless"},[null===t.tasks?s("div",{staticClass:"container"},[s("loading")],1):s("table",{staticClass:"table"},[s("tbody",t._l(t.tasks,function(e){return s("tr",{key:t.parent.id+e.id},[s("td",[s("span",{staticClass:"is-inline-block"},[t._v(t._s(e.name))]),e.pages?s("span",{staticClass:"is-inline-block"},[t._v(" ("+t._s(e.pages.length)+" pages)")]):t._e()]),s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button is-light",attrs:{title:t.isLocked(e.id)?"This task has recorded sessions":"Edit the task",disabled:t.isLocked(e.id)},on:{click:function(s){t.edit(e)}}},[s("i",{staticClass:"far fa-edit"})]),s("button",{staticClass:"button is-light",attrs:{title:"Create a new task from the existing"},on:{click:function(s){t.copy(e)}}},[s("i",{staticClass:"far fa-copy"})]),s("button",{staticClass:"button is-danger",attrs:{title:"Delete the task"},on:{click:function(s){t.remove(e)}}},[s("i",{staticClass:"far fa-trash-alt"})])])])}))])]),t.isEditing?s("modal-container",{attrs:{title:t.taskEditorTitle},on:{close:t.closeEditor}},[s("task-editor",{attrs:{action:t.action,task:t.toEdit,source:t.toCopy,intros:t.intros},on:{save:t.save,modified:t.onTaskModified}})],1):t._e(),t.toDelete?s("remove-warning",{attrs:{object:"task",name:t.toDeleteName},on:{close:t.removeWarningClosed}},[s("span",[t._v("All students assignments completed on this task will be deleted as well. ")])]):t._e(),s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"task-preview"}},[s("div",{staticClass:"notification is-info has-text-centered on-top"},[s("div",{staticClass:"columns"},[t.task.syllab.language?s("div",{staticClass:"column"},[t._v("Ctrl + click on a word to syllabify it.")]):t._e(),t.task.syllab.language?s("div",{staticClass:"column"},[s("button",{staticClass:"button is-primary is-small",on:{click:t.syllabifyAll}},[t._v("Syllabify all")])]):t._e(),t.task.speech.language?s("div",{staticClass:"column"},[t._v("Alt + click on a word to pronounce it.")]):t._e()])]),s("task-text",{ref:"container",nativeOn:{click:[function(e){if(!e.ctrlKey)return null;t.syllabify(e)},function(e){if(!e.altKey)return null;t.pronounce(e)},function(e){t.fixate(e)}]}}),s("task-images",{attrs:{images:t.images,fixation:t.fixation}}),s("div",{staticClass:"columns at-bottom"},[s("div",{staticClass:"column has-text-right"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.hasPrevPage},on:{click:t.prev}},[s("span",[t._v("<")])])]),s("div",{staticClass:"column has-text-centered is-narrow"},[s("button",{staticClass:"button is-primary",on:{click:t.close}},[s("span",[t._v("Close")])])]),s("div",{staticClass:"column has-text-left"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.hasNextPage},on:{click:t.next}},[s("span",[t._v(">")])])])])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{attrs:{id:"vis-title"}},[t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"root",attrs:{id:"vis-plot"}},[s("canvas",{ref:"canvas"}),s("task-images",{attrs:{images:t.visibleImages,fixation:t.fixation,viewport:t.defaultSession.screen}}),t.isWarningMessageVisible?s("div",{staticClass:"message is-danger below-title"},[s("div",{staticClass:"message-header"},[t._v("Missing data")]),s("div",{staticClass:"message-body"},[t._v("Fixation data is missing on this page")])]):t._e(),s("control-panel",{attrs:{title:t.title,feedback:t.feedback,questionnaire:1===t.data.records.length?t.defaultQuestionnaire:null,"text-length":t.textLength,"initial-page-index":t.initialPageIndex,options:t.options,"show-player":t.data.name.indexOf("Replay")>=0,"is-player-paused":t.isPlayerPaused},on:{"page-changed":t.setPage,"show-options":t.showOptions,"restart-player":t.restartPlayer,"toggle-player":t.togglePlayer,close:t.close}}),s("options",{directives:[{name:"show",rawName:"v-show",value:t.isOptionsDisplayed,expression:"isOptionsDisplayed"}],attrs:{values:t.options},on:{close:t.closeOptions,apply:t.applyOptions}}),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isAssignment,expression:"!isAssignment"}],staticClass:"nav has-shadow"},[s("div",{staticClass:"nav-left"},[s("router-link",{staticClass:"nav-item",attrs:{to:"/"}},[s("h2",{staticClass:"logo"},[t._v("Silko")])]),t.isAdmin?s("router-link",{staticClass:"nav-item is-tab",attrs:{to:"/schools"}},[s("i",{staticClass:"fa fa-university"}),s("span",[t._v(t._s(t.tokens.link_schools))])]):t._e(),t.isAdmin||t.isSchool?s("router-link",{staticClass:"nav-item is-tab",attrs:{to:"/teachers"}},[s("i",{staticClass:"fa fa-users"}),s("span",[t._v(t._s(t.tokens.link_teachers))])]):t._e(),t.isAdmin||t.isSchool||t.isTeacher?s("router-link",{staticClass:"nav-item is-tab",attrs:{to:"/students"}},[s("i",{staticClass:"fa fa-child"}),s("span",[t._v(t._s(t.tokens.link_students))])]):t._e(),t.isTeacher?s("router-link",{staticClass:"nav-item is-tab",attrs:{to:"/instructions"}},[s("i",{staticClass:"fa fa-info"}),s("span",[t._v(t._s(t.tokens.link_instructions))])]):t._e(),t.isTeacher?s("router-link",{staticClass:"nav-item is-tab",attrs:{to:"/classes"}},[s("i",{staticClass:"fa fa-database"}),s("span",[t._v(t._s(t.tokens.link_classes))])]):t._e(),t.isTeacher?s("router-link",{staticClass:"nav-item is-tab",attrs:{to:"/results"}},[s("i",{staticClass:"fa fa-chart-pie"}),s("span",[t._v(t._s(t.tokens.link_results))])]):t._e(),t.isStudent?s("router-link",{staticClass:"nav-item is-tab",attrs:{to:"/assignments"}},[s("i",{staticClass:"fa fa-tasks"}),s("span",[t._v(t._s(t.tokens.link_assignments))])]):t._e()],1),t.user?s("div",{staticClass:"nav-right"},[s("div",{staticClass:"dropdown is-right",class:{"is-active":t.isUsermenuDropped},attrs:{id:"usermenu"}},[s("div",{staticClass:"dropdown-trigger"},[s("button",{staticClass:"button",class:{"is-primary":t.isUsermenuDropped},attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"},on:{click:function(e){e.stopPropagation(),t.isUsermenuDropped=!t.isUsermenuDropped},mouseover:function(e){t.isUsermenuHover=!0},mouseleave:function(e){t.isUsermenuHover=!1}}},[s("span",[t._v(t._s(t.user.ref.name))]),s("span",{staticClass:"icon is-small",style:{color:t.isUsermenuHover&&!t.isUsermenuDropped?"hsl(171, 100%, 41%)":"inherit",transform:"translateY(0.1em)"}},[s("i",{staticClass:"fa fa-cog",attrs:{"aria-hidden":"true"}})])])]),s("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[s("div",{staticClass:"dropdown-content"},[s("div",{staticClass:"select",on:{click:function(t){t.stopPropagation()}}},[s("select",{domProps:{value:t.user.prefs.lang},on:{input:t.updateLanguage}},t._l(t.langs,function(e){return s("option",{key:e},[t._v(t._s(e))])}))]),s("hr",{staticClass:"dropdown-divider"}),s("div",{staticClass:"nav-item"},[s("a",{on:{click:t.logOut}},[t._v(t._s(t.tokens.user_logout))])])])])])]):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"student-summary"}},[s("div",{staticClass:"container"},[s("table",[s("thead",[s("tr",[s("th",{class:t.headerNameClass,on:{click:function(e){t.sort(-1)}}},[t._v("Name")]),t._l(t.statistics,function(e,n){return s("th",{class:t.statNameClass(e,n),attrs:{title:e.title||""},on:{click:function(e){t.sort(n)}}},[t._v(t._s(e.name))])})],2)]),s("tbody",t._l(t.students,function(e){return s("tr",{key:e.ref.id},[s("td",[t._v(t._s(e.ref.name))]),t._l(e.statistics,function(e,n){return s("td",[1===n?s("span",[t._v(t._s(Math.floor(e/60).toFixed(0)+":"+t.secondsToString(e%60)))]):s("span",[t._v(t._s(e))])])})],2)}))])]),s("control-panel",{attrs:{title:t.title,options:t.options},on:{"show-options":t.showOptions,close:t.close}}),s("options",{directives:[{name:"show",rawName:"v-show",value:t.isOptionsDisplayed,expression:"isOptionsDisplayed"}],attrs:{values:t.options},on:{close:t.closeOptions,apply:t.applyOptions}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bulma-checkbox",on:{click:t.toggle}},[s("div",{staticClass:"button is-primary is-inverted",attrs:{disabled:t.disabled}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.checked,expression:"checked"}],staticClass:"icon"},[s("i",{staticClass:"fa fa-check"})])]),s("label",{attrs:{disabled:t.disabled}},[t._v(t._s(t.label))])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"intro-editor"}},[s("div",{staticClass:"field",class:{squeezed:t.showLabels}},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("label",{directives:[{name:"show",rawName:"v-show",value:t.showLabels,expression:"showLabels"}],staticClass:"label"},[t._v("Name")]),s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{type:"text",placeholder:"Name",disabled:!t.nameEditable},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showLabels,expression:"showLabels"}],staticClass:"columns"},[t._m(0),t._m(1)]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-three-quarters"},[s("p",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.calib,expression:"calib"}],staticClass:"textarea low",attrs:{placeholder:"Calibration instruction"},domProps:{value:t.calib},on:{input:function(e){e.target.composing||(t.calib=e.target.value)}}})])]),s("div",{staticClass:"column"},[s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.calibStart,expression:"calibStart"}],staticClass:"input",attrs:{type:"text",placeholder:"Calibrate"},domProps:{value:t.calibStart},on:{input:function(e){e.target.composing||(t.calibStart=e.target.value)}}})]),s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.calibSkip,expression:"calibSkip"}],staticClass:"input",attrs:{type:"text",placeholder:"Skip calibration"},domProps:{value:t.calibSkip},on:{input:function(e){e.target.composing||(t.calibSkip=e.target.value)}}})])])]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-three-quarters"},[s("p",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.start,expression:"start"}],staticClass:"textarea low",attrs:{placeholder:"Start instruction"},domProps:{value:t.start},on:{input:function(e){e.target.composing||(t.start=e.target.value)}}})])]),s("div",{staticClass:"column"},[s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.startRun,expression:"startRun"}],staticClass:"input",attrs:{type:"text",placeholder:"Start"},domProps:{value:t.startRun},on:{input:function(e){e.target.composing||(t.startRun=e.target.value)}}})]),s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.startCancel,expression:"startCancel"}],staticClass:"input",attrs:{type:"text",placeholder:"Cancel"},domProps:{value:t.startCancel},on:{input:function(e){e.target.composing||(t.startCancel=e.target.value)}}})])])]),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-three-quarters"},[s("p",{staticClass:"control"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.firstPage,expression:"firstPage"}],staticClass:"textarea",attrs:{placeholder:"First page"},domProps:{value:t.firstPage},on:{input:function(e){e.target.composing||(t.firstPage=e.target.value)}}})])]),s("div",{staticClass:"column"},[s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.next,expression:"next"}],staticClass:"input",attrs:{type:"text",placeholder:"Next"},domProps:{value:t.next},on:{input:function(e){e.target.composing||(t.next=e.target.value)}}})]),s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.finish,expression:"finish"}],staticClass:"input",attrs:{type:"text",placeholder:"Finish"},domProps:{value:t.finish},on:{input:function(e){e.target.composing||(t.finish=e.target.value)}}})]),s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.finished,expression:"finished"}],staticClass:"input",attrs:{type:"text",placeholder:"Thank you"},domProps:{value:t.finished},on:{input:function(e){e.target.composing||(t.finished=e.target.value)}}})])])]),s("p",{staticClass:"control"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.canSave},on:{click:t.save}},[t._v(t._s(t.action))])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"column is-three-quarters"},[s("p",{staticClass:"control"},[s("label",{staticClass:"label"},[t._v("Texts")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"column"},[s("p",{staticClass:"control"},[s("label",{staticClass:"label"},[t._v("Buttons")])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"task-text"}},[s("div",{ref:"text",staticClass:"text median",style:t.textStyle})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"calib-page"}},[s("section",{staticClass:"section"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isETUDConnected,expression:"isETUDConnected"}],staticClass:"container"},[s("div",{staticClass:"content is-large"},t._l(t.calibInstruction,function(e){return s("p",[t._v(t._s(e))])})),s("button",{staticClass:"button is-large is-primary",attrs:{disabled:!t.isConnected},on:{click:t.calibrate}},[t._v(t._s(t.titleStart))]),s("button",{staticClass:"button is-large",attrs:{disabled:!t.isCalibrated},on:{click:t.skip}},[t._v(t._s(t.titleSkip))]),s("button",{staticClass:"button is-large",on:{click:t.cancel}},[t._v(t._s(t.titleCancel))])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isETUDConnected,expression:"!isETUDConnected"}],staticClass:"container"},[t._m(0)]),s("div",{staticClass:"is-bottom-right"},[s("a",{staticClass:"button",attrs:{disabled:!t.isETUDConnected},on:{click:t.showETUDOptions}},[t._m(1)])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message is-danger is-centered"},[s("div",{staticClass:"message-header"},[t._v("Cannot connect to a gaze tracker")]),s("div",{staticClass:"message-body"},[s("div",{staticClass:"content has-text-left"},[s("span",[t._v("Possible reasons:")]),s("ul",[s("li",[t._v("ETU-Driver service is not running")]),s("li",[t._v("ETU-Driver service is running, but its WebSocket server is not enabled")])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-eye"})])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal is-active"},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"notification"},[s("div",{staticClass:"heading has-text-centered"},[s("h1",[t._v(t._s(t.title))])]),t._t("default")],2)]),s("button",{staticClass:"modal-close",on:{click:t.close}})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section",attrs:{id:"results"}},[null===t.classes?s("div",{staticClass:"container"},[s("loading")],1):t.classes.length?t._e():s("div",{staticClass:"container"},[s("i",[t._v("No data was recorded yet")])]),t._l(t.classes,function(e){return s("nav",{key:e.ref.id,staticClass:"panel"},[s("div",{staticClass:"panel-block is-marginless is-paddingless"},[s("div",{staticClass:"card is-fullwidth"},[s("header",{staticClass:"card-header notification is-info is-paddingless"},[s("div",{staticClass:"card-header-title"},[t._v(t._s(e.ref.name))])]),s("div",{staticClass:"card-content"},[s("table",{staticClass:"table"},[t._m(0,!0),s("tbody",t._l(e.tasks,function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.name))]),s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.isLoaded},on:{click:function(s){t.selectTaskStudents(e,t.VISUALIZATIONS.durations)}}},[t._v("Durations")])]),s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.isLoaded},on:{click:function(s){t.selectTaskStudents(e,t.VISUALIZATIONS.gazeReplay)}}},[t._v("Gaze replay")])]),s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.isLoaded},on:{click:function(s){t.selectTaskStudents(e,t.VISUALIZATIONS.wordReplay)}}},[t._v("Word replay")])]),s("td",{staticClass:"is-narrow"},[e.hasQuestionnaire?s("span",[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.isLoaded},on:{click:function(s){t.selectTaskStudents(e,t.VISUALIZATIONS.questionnaireResults)}}},[t._v("Questionnaire")])]):t._e()])])}))]),null===e.students?s("div",{staticClass:"container"},[s("loading")],1):e.students.length?s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",[t._v("Students")]),s("th"),s("th"),s("th"),s("th"),s("th",[s("button",{staticClass:"button is-primary is-pulled-right",attrs:{disabled:!t.isLoaded},on:{click:function(s){t.selectClassStudents(e,t.VISUALIZATIONS.studentsSummary)}}},[t._v("Summary")])])])]),s("tbody",t._l(e.students,function(e){return s("tr",{key:e.ref.id},[s("td",[t._v(t._s(e.ref.name))]),s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button is-warning",attrs:{disabled:!t.isLoaded||!e.sessions.length},on:{click:function(s){t.editSessions(e)}}},[t._v("Edit")])]),s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.isLoaded},on:{click:function(s){t.selectSession(e,t.VISUALIZATIONS.gazePlot)}}},[t._v("Gaze plot")])]),s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.isLoaded},on:{click:function(s){t.selectSession(e,t.VISUALIZATIONS.durations)}}},[t._v("Durations")])]),s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.isLoaded},on:{click:function(s){t.selectSession(e,t.VISUALIZATIONS.gazeReplay)}}},[t._v("Gaze replay")])]),s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.isLoaded},on:{click:function(s){t.selectSession(e,t.VISUALIZATIONS.wordReplay)}}},[t._v("Word replay")])])])}))]):s("div",{staticClass:"container"})])])])])}),t.gradeWithStudents?s("modal-container",{attrs:{title:t.gradeWithStudents[0].text},on:{close:t.closeStudentSelectionBox}},[s("item-selection-box",{attrs:{items:t.gradeWithStudents,"item-name":"grade","subitem-name":"student"},on:{accept:t.continueDeferredWithStudents}})],1):t._e(),t.studentWithSessions?s("modal-container",{attrs:{title:t.studentWithSessions[0].text},on:{close:t.closeSessionSelectionBox}},[s("item-selection-box",{attrs:{multiple:!t.isGazePlot,"single-group":!t.isGazePlot&&!t.studentWithSessions[0].multiGroup,items:t.studentWithSessions,"item-name":"student","subitem-name":"session"},on:{accept:t.continueDeferredWithSessions}})],1):t._e(),t.editingStudent?s("modal-container",{attrs:{title:"Sessions by "+t.editingStudent.ref.name},on:{close:t.closeSessionEditingBox}},[s("session-editing-box",{attrs:{student:t.editingStudent},on:{deleted:t.sessionDeleted}})],1):t._e(),t.isShowing(t.VISUALIZATIONS.gazePlot)?s("gaze-plot",{attrs:{data:t.visualization},on:{close:t.closeVisualization}}):t._e(),t.isShowing(t.VISUALIZATIONS.durations)?s("durations",{attrs:{data:t.visualization},on:{close:t.closeVisualization}}):t._e(),t.isShowing(t.VISUALIZATIONS.gazeReplay)?s("gaze-replay",{attrs:{data:t.visualization},on:{close:t.closeVisualization}}):t._e(),t.isShowing(t.VISUALIZATIONS.wordReplay)?s("word-replay",{attrs:{data:t.visualization},on:{close:t.closeVisualization}}):t._e(),t.isShowing(t.VISUALIZATIONS.questionnaireResults)?s("questionnaire-results",{attrs:{data:t.visualization},on:{close:t.closeVisualization}}):t._e(),t.isShowing(t.VISUALIZATIONS.studentsSummary)?s("students-summary",{attrs:{data:t.visualization},on:{close:t.closeVisualization}}):t._e(),s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])])],2)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Tasks")]),s("th"),s("th"),s("th"),s("th")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"home"}},[t._m(0),t.isConnecting?s("section",{staticClass:"connecting"},[s("div",[t._v("Connecting to database...")]),s("loading")],1):t.user?s("section",{staticClass:"section"},[s("div",{staticClass:"message is-info"},[s("div",{staticClass:"message-header"},[s("p",[t._v(t._s(t.tokens.info_title(t.userTitle)))])]),s("div",{staticClass:"message-body is-paddingless"},[s("div",{staticClass:"panel"},[t.isAdmin||t.isSchool?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_adm_1))]):t._e(),t.isAdmin?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_adm_2))]):t._e(),t.isAdmin||t.isSchool||t.isTeacher?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_adm_3))]):t._e(),t.isAdmin?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_adm_3))]):t._e(),t.isTeacher?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_tch_1))]):t._e(),t.isTeacher?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_tch_2))]):t._e(),t.isTeacher?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_tch_3))]):t._e(),t.isTeacher?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_tch_4))]):t._e(),t.isTeacher?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_tch_5))]):t._e(),t.isTeacher?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_tch_6))]):t._e(),t.isStudent?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_std_1))]):t._e(),t.isStudent?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_std_2))]):t._e(),t.isStudent?s("div",{staticClass:"panel-block"},[t._v(t._s(t.tokens.info_std_3))]):t._e()])])])]):s("section",[s("login"),s("p",{staticClass:"control extra-tools"}),s("div",{staticClass:"has-text-centered"},[s("button",{staticClass:"button is-link",on:{click:t.register}},[t._v("Request an account")]),s("button",{staticClass:"button is-link",on:{click:t.remindPassword}},[t._v("Forgot password?")])]),s("p")],1),t.user?t._e():s("footer",{staticClass:"footer"},[s("div",{staticClass:"columns is-32"},[s("div",{staticClass:"column"},[s("div",[t._v("TAUCHI, COMS, "+t._s(t.tokens.contact_uta))])]),s("div",{staticClass:"column is-narrow"},[s("a",{staticClass:"manual",attrs:{href:"https://uta-gasp.gitbooks.io/silko/"}},[t._v(t._s(t.tokens.manual))])]),s("div",{staticClass:"column"},[s("div",{staticClass:"browser-info"},[t._v(t._s(t.tokens.test_info))]),t._m(1)])])]),t.schools?s("modal-container",{attrs:{title:"Registration"},on:{close:t.closeSelectionBox}},[s("div",{staticClass:"has-text-centered"},[s("div",[t._v(t._s(t.tokens.contact_info))]),s("div",[t._v("Oleg Špakov @ "+t._s(t.tokens.contact_uta))]),s("div",[t._v("oleg.spakov@uta.fi")])])]):t._e(),t.isGettingEmail?s("modal-container",{attrs:{title:"Password reset"},on:{close:t.closeEmailBox,mounted:t.passwordResetAppeared}},[t.schoolToRegester?t._e():s("div",{staticClass:"field"},[s("p",{staticClass:"control"},[s("span",[t._v(t._s(t.tokens.message_password_reset))])])]),s("div",{staticClass:"field"},[s("p",{staticClass:"control has-icons-left has-icons-right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],ref:"email",staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.email},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.sendPasswordResetRequest(e)},input:function(e){e.target.composing||(t.email=e.target.value)}}}),s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fa fa-envelope"})]),t.isEmailValid?t._e():s("span",{staticClass:"icon is-small is-right"},[s("i",{staticClass:"fa fa-exclamation-triangle"})])])]),s("p",{staticClass:"control"}),s("div",{staticClass:"has-text-centered"},[s("button",{staticClass:"button is-primary",on:{click:t.sendPasswordResetRequest}},[t._v(t._s(t.tokens.button_password_reset))])]),s("p")]):t._e(),s("temporal-notification",{attrs:{type:"success",show:t.showSuccess}},[s("span",[t._v(t._s(t.successMessage))])]),s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])]),s("div",{staticClass:"modal",class:{"is-active":t.isStudent&&t.showWsSecurityError},attrs:{id:"ws-security-error"}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"notification is-danger"},[s("h3",{staticClass:"title is-3"},[t._v(t._s(t.tokens.ws_err_title))]),s("div",{staticClass:"subtitle"},[t._v(t._s(t.tokens.ws_err_subtitle))]),t.isFirefox?s("ul",{staticClass:"unblock-ws-instruction"},[s("li",{staticClass:"step"},[t._v("- "+t._s(t.tokens.ws_unblock_1[0])+' "'),s("span",{staticClass:"code"},[t._v("about:config")]),t._v('" '+t._s(t.tokens.ws_unblock_1[1]))]),s("li",{staticClass:"step"},[t._v("- "+t._s(t.tokens.ws_unblock_2[0])+' "'),s("span",{staticClass:"code"},[t._v("network.websocket.allowInsecureFromHTTPS")]),t._v('" '+t._s(t.tokens.ws_unblock_2[1]))]),s("li",{staticClass:"step"},[t._v("- "+t._s(t.tokens.ws_unblock_3[0])+' "'),s("span",{staticClass:"code"},[t._v("false")]),t._v('", '+t._s(t.tokens.ws_unblock_3[1])+' "'),s("span",{staticClass:"code"},[t._v("true")]),t._v('"'+t._s(t.tokens.ws_unblock_3[2]))])]):s("div",{staticClass:"unblock-ws-instruction"},[t._v(t._s(t.tokens.ws_unblock_4))])])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"hero"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"title logo"},[t._v("Silko")]),s("h2",{staticClass:"subtitle"},[t._v("A reading aid for students and teachers")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"is-inline-block"},[s("div",{staticClass:"browser-name chrome"},[t._v("Chrome 55+")]),s("div",{staticClass:"browser-name firefox"},[t._v("Firefox 47+")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"options"},on:{click:t.close}},[s("div",{staticClass:"inner"},[s("div",{staticClass:"options-title"},[t._v("Settings")]),s("div",{ref:"container",staticClass:"options"}),s("div",{staticClass:"buttons"},[s("button",{staticClass:"button is-primary",on:{click:t.save}},[t._v("Save and close")]),s("button",{staticClass:"button is-primary",on:{click:t.apply}},[t._v("Apply")]),s("button",{staticClass:"button is-danger",on:{click:t.reset}},[t._v("Reset")])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"questionnaire-page"}},[s("section",{staticClass:"section"},[t.question?s("div",{staticClass:"container"},[s("div",{staticClass:"content is-large"},[s("p",[t._v(t._s(t.question.question))])]),s("div",{staticClass:"answers"},t._l(t.question.answers,function(e){return s("button",{staticClass:"button answer is-large is-light",class:t.asnwerRevealedClass(e),on:{click:function(s){t.reply(e)}}},[t._v(t._s(e.text))])}))]):t._e()])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"player"}},[s("abbr",{attrs:{title:"Restart"}},[s("button",{staticClass:"icon-btn restart",on:{click:t.restart}})]),s("abbr",{attrs:{title:"Pause / Continue"}},[s("button",{staticClass:"icon-btn",class:{play:t.isPaused,pause:!t.isPaused},on:{click:t.toggle}})]),s("div",{staticClass:"track"})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"task-editor-images"}},[t.isEditing?t._e():s("section",{staticClass:"top-only"},[t.images.length?s("table",{staticClass:"table"},[t._m(0),s("tbody",t._l(t.images,function(e,n){return s("tr",{key:n,staticClass:"is-64"},[s("td",[t.canShow(e)?s("p",{staticClass:"image is-64x64 preview",style:t.getCSSBackgroundImage(e)}):t._e()]),s("td",[t._v(t._s(t.getImageName(e)))]),s("td",[t._v(t._s(t.getImagePage(e)))]),s("td",[t._v(t._s(t.getImageLocation(e)))]),s("td",[t._v(t._s(e.keepOriginalSize?"original":"shrinked"))]),s("td",[s("div",{staticClass:"event-name"},[t._v(t._s(t.formatEventName(e.on)))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.hasParameters(e.on),expression:"hasParameters( image.on )"}],staticClass:"event-param"},[t._v(t._s(t.formatEventParams(e.on)))])]),s("td",[s("div",{staticClass:"event-name"},[t._v(t._s(t.formatEventName(e.off)))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.hasParameters(e.off),expression:"hasParameters( image.off )"}],staticClass:"event-param"},[t._v(t._s(t.formatEventParams(e.off)))])]),s("td",[s("button",{staticClass:"button",attrs:{title:"Edit the image appearance parameters"},on:{click:function(e){t.edit(n)}}},[s("i",{staticClass:"far fa-edit"})])]),s("td",[s("button",{staticClass:"button",attrs:{title:"Remove the image"},on:{click:function(e){t.remove(n)}}},[s("i",{staticClass:"fa fa-times"})])])])}))]):s("section",[s("i",[t._v("No images")])])]),s("section",{staticClass:"absolute-parent"},[t.isEditing?t._e():s("div",{staticClass:"has-text-centered"},[s("section",{staticClass:"is-fullwidth is-dropzone",class:{"is-dragover":t.isDraggingFileOverDropzone},on:{drag:function(t){t.stopPropagation(),t.preventDefault()},dragstart:function(e){e.stopPropagation(),e.preventDefault(),t.isDraggingFileOverDropzone=!1},dragend:function(e){e.stopPropagation(),e.preventDefault(),t.isDraggingFileOverDropzone=!1},dragleave:function(e){e.stopPropagation(),e.preventDefault(),t.isDraggingFileOverDropzone=!1},dragenter:function(e){e.stopPropagation(),e.preventDefault(),t.isDraggingFileOverDropzone=!0},dragover:function(e){e.stopPropagation(),e.preventDefault(),t.isDraggingFileOverDropzone=!0},drop:function(e){e.stopPropagation(),e.preventDefault(),t.dropFile(e)}}},[s("div",{staticClass:"file is-centered is-boxed"},[s("label",{staticClass:"file-label"},[s("input",{staticClass:"file-input",attrs:{type:"file"},on:{change:function(e){t.selectFile(e)}}}),t._m(1)])])])]),t.selectedFile||t.isEditing?s("div",{class:{sticked:!t.isEditing,"at-top":!t.images.length,"at-bottom":t.images.length}},[t.selectedFile?s("article",{staticClass:"media"},[s("figure",{staticClass:"media-left"},[s("p",{staticClass:"image is-64x64"},[s("img",{attrs:{src:t.getImageURL(t.selectedFile)}})])]),s("div",{staticClass:"media-content"},[s("div",{staticClass:"content"},[s("div",[s("strong",[t._v(t._s(t.selectedFile.name))])]),s("div",[s("small",[t._v(t._s(t.selectedFile.size)+" bytes")])]),s("progress",{directives:[{name:"show",rawName:"v-show",value:t.isUploading,expression:"isUploading"}],staticClass:"progress is-small is-primary",attrs:{max:"100"},domProps:{value:t.uploadProgress}})])]),s("div",{staticClass:"media-right"},[s("div",{staticClass:"field"},[s("button",{staticClass:"button is-primary",attrs:{disabled:t.isUploading||!t.hasValidParams},on:{click:t.uploadImage}},[t._v("Upload")]),s("button",{staticClass:"button",attrs:{disabled:t.isUploading},on:{click:t.cancel}},[t._v("Cancel")])])])]):t._e(),s("article",[t.isEditing?s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-label is-normal"}),s("div",{staticClass:"field-body"},[s("h4",{staticClass:"heading is-4"},[t._v(t._s(t.getImageName(t.images[t.editingImageIndex])))])])]):t._e(),s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-label is-normal"},[t._v("Page")]),s("div",{staticClass:"field-body"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.page,expression:"page"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.page=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"-1"}},[t._v("any")]),t._l(t.pageCount,function(e){return s("option",{key:e,domProps:{value:e-1}},[t._v(t._s(e))])})],2)])])]),s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-label is-normal"},[t._v("Location")]),s("div",{staticClass:"field-body"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.offset,expression:"offset",modifiers:{number:!0}}],staticClass:"input is-inline",attrs:{type:"number",step:"5",min:"0",max:"800"},domProps:{value:t.offset},on:{input:function(e){e.target.composing||(t.offset=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),s("div",{staticClass:"info-label"},[t._v("pixels from")]),s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.location,expression:"location"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.location=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"left"}},[t._v("left")]),s("option",{attrs:{value:"bottom"}},[t._v("bottom")]),s("option",{attrs:{value:"right"}},[t._v("right")])])])])]),s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-label is-normal"},[t._v("Size")]),s("div",{staticClass:"field-body"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.keepOriginalSize,expression:"keepOriginalSize"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.keepOriginalSize=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"true"}},[t._v("original")]),s("option",{attrs:{value:"false"}},[t._v("15% of width / height")])])])])]),s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-label is-normal"},[t._v("Show")]),s("div",{staticClass:"field-body"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.on,expression:"on"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.on=e.target.multiple?s:s[0]}}},t._l(t.ON,function(e,n){return s("option",{key:n,domProps:{value:n}},[t._v(t._s(e))])}))]),s("div",{directives:[{name:"show",rawName:"v-show",value:"fixation"===t.on,expression:"on === 'fixation'"}],staticClass:"field is-horizontal"},[s("div",{staticClass:"field-label is-normal is-inner-label no-wrap"},[t._v("at")]),s("div",{staticClass:"field-body select-container"},[s("div",{staticClass:"select is-multiple"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.fixationWords,expression:"fixationWords"}],attrs:{multiple:"multiple"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.fixationWords=e.target.multiple?s:s[0]}}},t._l(t.currentWords,function(e){return s("option",{key:e.text+Math.random(),domProps:{value:e}},[t._v(t._s(e.text))])}))])]),s("div",{staticClass:"field-label is-normal is-inner-label no-wrap"},[t._v("longer than")]),s("div",{staticClass:"field-body number-container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.fixationDuration,expression:"fixationDuration"}],staticClass:"input is-number",attrs:{type:"text"},domProps:{value:t.fixationDuration},on:{input:function(e){e.target.composing||(t.fixationDuration=e.target.value)}}})]),s("div",{staticClass:"field-label is-normal is-inner-label no-wrap"},[t._v("ms")])])])]),s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-label is-normal"},[t._v("Hide")]),s("div",{staticClass:"field-body"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.off,expression:"off"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.off=e.target.multiple?s:s[0]}}},t._l(t.OFF,function(e,n){return s("option",{key:n,domProps:{value:n}},[t._v(t._s(e))])}))]),s("div",{directives:[{name:"show",rawName:"v-show",value:"delay"===t.off,expression:"off === 'delay'"}],staticClass:"field is-horizontal"},[s("div",{staticClass:"field-body number-container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.delayDuration,expression:"delayDuration"}],staticClass:"input is-number",attrs:{type:"text"},domProps:{value:t.delayDuration},on:{input:function(e){e.target.composing||(t.delayDuration=e.target.value)}}})]),s("div",{staticClass:"field-label is-normal is-inner-label no-wrap"},[t._v("sec")])])])]),t.isEditing?s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"field-label is-normal"}),s("div",{staticClass:"field-body"},[s("div",{staticClass:"is-grouped is-right"},[s("button",{staticClass:"button is-primary",on:{click:function(e){t.saveEdited()}}},[t._v("Save")]),s("button",{staticClass:"button",on:{click:function(e){t.cancelEditing()}}},[t._v("Cancel")])])])]):t._e()])]):t._e()]),s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Preview")]),s("th",[t._v("Name")]),s("th",[t._v("Page")]),s("th",[t._v("Location")]),s("th",[t._v("Size")]),s("th",[t._v("On")]),s("th",[t._v("Off")]),s("th")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"file-cta"},[s("span",{staticClass:"file-icon"},[s("i",{staticClass:"fa fa-upload"})]),s("span",{staticClass:"file-label"},[t._v("Choose an image…")]),s("span",{staticClass:"help"},[t._v("or drag it here")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns is-mobile",attrs:{id:"control-panel"}},[s("div",{staticClass:"column title"},[t._v(t._s(t.title))]),s("div",{staticClass:"column is-narrow"},[t.showPlayer?s("player",{staticClass:"player",attrs:{"is-paused":t.isPlayerPaused},on:{restart:t.restartPlayer,toggle:t.togglePlayer}}):t._e(),t.feedback?s("div",{staticClass:"props"},[s("abbr",{staticClass:"prop speech",class:{off:!t.feedback.speech.enabled},attrs:{title:"Speech output"}}),s("abbr",{staticClass:"prop syllab",class:{off:!t.feedback.syllabification.enabled},attrs:{title:"Syllabification"}},[t.feedback.syllabification.enabled?s("span",[t._v(t._s(t.feedback.syllabification.threshold.value))]):t._e()])]):t._e(),t.questionnaire&&t.questionnaire.length?s("div",{staticClass:"props"},[s("abbr",{staticClass:"prop questionnaire",attrs:{title:"Questionnaire corectness"}},[t._v(t._s(t.correctAnswers))])]):t._e(),s("div",{staticClass:"menu"},[t.textLength?[s("div",{staticClass:"navigation"},[s("abbr",{attrs:{title:"Previous page"}},[s("button",{staticClass:"icon-btn prev",class:{disabled:!t.pageIndex},on:{click:t.prevPage}})]),s("div",{staticClass:"page"},[t._v(t._s(t.dispPage))]),s("abbr",{attrs:{title:"Next page"}},[s("button",{staticClass:"icon-btn next",class:{disabled:t.pageIndex===t.textLength-1},on:{click:t.nextPage}})])]),s("div",{staticClass:"separator"})]:t._e(),t.showOptionsButton?[s("abbr",{attrs:{title:"Settings"}},[s("button",{staticClass:"icon-btn settings",on:{click:t.showOptions}})]),s("div",{staticClass:"separator"})]:t._e(),s("abbr",{attrs:{title:"Close this visualization"}},[s("button",{staticClass:"icon-btn close",on:{click:t.close}})])],2)],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section",attrs:{id:"classes"}},[s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])]),s("temporal-notification",{attrs:{type:"success",show:t.showSuccess}},[s("span",[t._v(t._s(t.successMessage))])]),s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v("Add class")]),s("div",{staticClass:"panel-block"},[s("div",{staticClass:"field control"},[s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],staticClass:"input",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}})]),s("p",{staticClass:"control"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.canCreate},on:{click:t.tryToCreate}},[t._v("Create")])])])])]),s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v("Classes")]),s("div",{staticClass:"panel-block is-paddingless"},[null===t.classes?s("div",{staticClass:"container"},[s("loading")],1):s("table",{staticClass:"table"},[t._m(0),s("tbody",t._l(t.classes,function(e){return s("tr",{key:e.id},[s("td",[s("div",{staticClass:"title is-4 no-wrapping"},[t._v(t._s(e.name))]),s("button",{staticClass:"button is-danger",attrs:{title:"Delete the class"},on:{click:function(s){t.removeClass(e)}}},[s("i",{staticClass:"far fa-trash-alt"})])]),s("td",[s("task-list",{attrs:{cls:e,intros:t.intros},on:{saved:t.taskSaved,created:t.taskCreated,deleted:t.taskDeleted}})],1),s("td",[s("student-list",{attrs:{cls:e,teacher:t.teacher,refresh:t.refreshStudents}})],1)])}))])])]),t.toDelete?s("remove-warning",{attrs:{object:"class",name:t.toDeleteName},on:{close:t.removeWarningClosed}}):t._e()],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Name")]),s("th",[t._v("Tasks")]),s("th",[t._v("Students")])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"start-page"}},[s("section",{staticClass:"section"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isConnected,expression:"isConnected"}],staticClass:"container"},[s("div",{staticClass:"content is-large"},t._l(t.startInstruction,function(e){return s("p",[t._v(t._s(e))])})),s("button",{staticClass:"button is-large is-primary",attrs:{disabled:!t.isCalibrated},on:{click:t.start}},[t._v(t._s(t.titleStart))]),s("button",{staticClass:"button is-large",on:{click:t.cancel}},[t._v(t._s(t.titleCancel))])])]),s("div",{ref:"fullscreen",staticClass:"fullscreen"},[t.isRunning?s("task-page",{attrs:{texts:t.texts,task:t.task,student:t.student},on:{finished:t.finishedReading,saved:t.gazeDataSaved}}):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isFullscreen&&!t.isRunning,expression:"isFullscreen && !isRunning"}],staticClass:"container tracking-lost-error-container"},[t._m(0)])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isCalibrated,expression:"!isCalibrated"}],staticClass:"container"},[t._m(1)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message is-danger tracking-lost-error"},[s("div",{staticClass:"message-body"},[t._v("Gaze tracking is not available")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message is-danger"},[s("div",{staticClass:"message-body"},[t._v("The tracker is not calibrated yet")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section",attrs:{id:"teachers"}},[s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])]),s("temporal-notification",{attrs:{type:"success",show:t.showSuccess}},[s("span",[t._v(t._s(t.successMessage))])]),s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v("Add teacher")]),s("div",{staticClass:"panel-block"},[s("div",{staticClass:"field control"},[s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],staticClass:"input",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}})]),s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newEmail,expression:"newEmail"}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.newEmail},on:{input:function(e){e.target.composing||(t.newEmail=e.target.value)}}})]),t.isAdmin?s("p",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.newSchool,expression:"newSchool"}],attrs:{required:"required"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.newSchool=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"disabled",selected:"selected",hidden:"hidden"}},[t._v("School")]),t._l(t.schoolItems,function(e){return s("option",{domProps:{value:e.value}},[t._v(t._s(e.text))])})],2)])]):t._e(),s("p",{staticClass:"control"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.canCreate},on:{click:t.tryToCreate}},[t._v("Create")])])])])]),s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v("Teachers")]),s("div",{staticClass:"panel-block is-paddingless"},[null===t.teachers?s("div",{staticClass:"container"},[s("loading")],1):t.teachers.length?s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",[t._v("Name")]),t.isAdmin?s("th",[t._v("School")]):t._e(),t.isAdmin?t._e():s("th",[t._v("Classes")])])]),s("tbody",t._l(t.teachers,function(e){return s("tr",[s("td",[t._v(t._s(e.name))]),t.isAdmin?s("td",[s("span",{staticClass:"select"},[s("select",{domProps:{value:e.school},on:{input:function(s){t.moveTeacher(e,s)}}},t._l(t.schools,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))])]):t._e(),t.isAdmin?t._e():s("td",[s("span",{staticClass:"ellipsis"},[t._v(t._s(t.getListOfTeacherClasses(e)))])])])}))]):s("div",{staticClass:"container"},[s("i",[t._v("No teachers exists yet")])])])])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal",class:{"is-active":!!t.text},attrs:{id:"modal-error"}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"notification is-danger"},[s("div",{staticClass:"heading has-text-centered"},[t._v("Assignment error")]),s("div",{staticClass:"has-text-centered"},[t._v(t._s(t.text))])])]),s("button",{staticClass:"modal-close",on:{click:t.close}})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section",attrs:{id:"schools"}},[s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])]),s("temporal-notification",{attrs:{type:"success",show:t.showSuccess}},[s("span",[t._v(t._s(t.successMessage))])]),s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v("Add school")]),s("div",{staticClass:"panel-block"},[s("div",{staticClass:"field control"},[s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],staticClass:"input",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}})]),s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newEmail,expression:"newEmail"}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.newEmail},on:{input:function(e){e.target.composing||(t.newEmail=e.target.value)}}})]),s("p",{staticClass:"control"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.canCreate},on:{click:t.tryToCreate}},[t._v("Create")])])])])]),s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v("Schools")]),s("div",{staticClass:"panel-block is-paddingless"},[null===t.schools?s("div",{staticClass:"container"},[s("loading")],1):t.schools.length?s("table",{staticClass:"table"},[t._m(0),s("tbody",t._l(t.schools,function(e){return s("tr",[s("td",[t._v(t._s(e.name))]),s("td",[t._v(t._s(t._f("count")(e.teachers)))]),s("td",[t._v(t._s(t._f("count")(e.students)))])])}))]):s("div",{staticClass:"container"},[s("i",[t._v("No school exists yet")])])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Name")]),s("th",[t._v("Teachers")]),s("th",[t._v("Students")])])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section",attrs:{id:"students"}},[s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])]),s("temporal-notification",{attrs:{type:"success",show:t.showSuccess}},[s("span",[t._v(t._s(t.successMessage))])]),s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v("Add student")]),s("div",{staticClass:"panel-block"},[s("div",{staticClass:"field control"},[s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],staticClass:"input",attrs:{type:"text",placeholder:"Name"},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}})]),s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newEmail,expression:"newEmail"}],staticClass:"input",attrs:{type:"email",placeholder:"Email or ID"},domProps:{value:t.newEmail},on:{input:function(e){e.target.composing||(t.newEmail=e.target.value)}}})]),s("p",{directives:[{name:"show",rawName:"v-show",value:!t.isRealEmail,expression:"!isRealEmail"}],staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword,expression:"newPassword"}],staticClass:"input",attrs:{type:"text",placeholder:"Password"},domProps:{value:t.newPassword},on:{input:function(e){e.target.composing||(t.newPassword=e.target.value)}}})]),s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newGrade,expression:"newGrade"}],staticClass:"input",attrs:{type:"text",placeholder:"Grade"},domProps:{value:t.newGrade},on:{input:function(e){e.target.composing||(t.newGrade=e.target.value)}}})]),t.isAdmin?s("p",{staticClass:"control"},[s("span",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.newSchool,expression:"newSchool"}],attrs:{required:"required"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.newSchool=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"disabled",selected:"selected",hidden:"hidden"}},[t._v("School")]),t._l(t.schoolItems,function(e){return s("option",{domProps:{value:e.value}},[t._v(t._s(e.text))])})],2)])]):t._e(),s("p",{staticClass:"control"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.canCreateStudent},on:{click:t.tryToCreateStudent}},[t._v("Create")])])])])]),s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v("Students")]),s("div",{staticClass:"panel-block is-paddingless"},[null===t.students?s("div",{staticClass:"container"},[s("loading")],1):t.students.length?s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",[t._v("Name")]),t.isAdmin?s("th",[t._v("School")]):t._e(),s("th",[t._v("Grade")]),t.isAdmin?t._e():s("th",[t._v("Classes")]),t.isAdmin?s("th",[s("div",{staticClass:"is-pulled-right"},[t._v("Action")])]):t._e()])]),s("tbody",t._l(t.students,function(e){return e.deleted?t._e():s("tr",[s("td",[t._v(t._s(e.name))]),t.isAdmin?s("td",[s("span",{staticClass:"select"},[s("select",{domProps:{value:e.school},on:{input:function(s){t.moveStudent(e,s)}}},t._l(t.schools,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))])]):t._e(),s("td",[t._v(t._s(e.grade))]),t.isAdmin?t._e():s("td",[s("span",{staticClass:"ellipsis"},[t._v(t._s(t.getListOfStudentClasses(e)))])]),t.isAdmin?s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button is-danger",on:{click:function(s){t.remove(e)}}},[s("i",{staticClass:"far fa-trash-alt"})])]):t._e()])}))]):s("div",{staticClass:"container"},[s("i",[t._v("No students exists yet")])])])]),t.toDelete?s("remove-warning",{attrs:{object:"student",name:t.toDeleteName},on:{close:t.removeWarningClosed}}):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"task-editor-questionnaire"}},[s("nav",{staticClass:"panel"},[s("div",{staticClass:"panel-block"},[s("div",{staticClass:"field control"},[s("p",{staticClass:"control"}),s("div",{staticClass:"columns is-inlined"},[s("div",{staticClass:"column is-narrow"},[s("div",{staticClass:"control-line"},[t._v("For")]),s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.type=e.target.multiple?s:s[0]}}},t._l(t.types,function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e.text))])}))])]),s("div",{staticClass:"column"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.word,expression:"word"},{name:"show",rawName:"v-show",value:t.type===t.types.word,expression:"type === types.word"}],staticClass:"input",attrs:{type:"text",placeholder:"Word"},domProps:{value:t.word},on:{input:function(e){e.target.composing||(t.word=e.target.value)}}})])]),s("p"),s("p",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.question,expression:"question"}],staticClass:"input",attrs:{type:"text",placeholder:"Question"},domProps:{value:t.question},on:{input:function(e){e.target.composing||(t.question=e.target.value)}}})]),s("p",{staticClass:"control"}),s("div",{staticClass:"columns is-inlined"},t._l(t.answers,function(e){return s("div",{staticClass:"column"},[s("p",{staticClass:"control has-icon"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"answer.text"}],staticClass:"input",attrs:{type:"text",placeholder:"answer"},domProps:{value:e.text},on:{input:function(s){s.target.composing||t.$set(e,"text",s.target.value)}}}),e.text?[e.isCorrect?s("span",{staticClass:"icon is-small is-left checkbox is-success"},[s("i",{staticClass:"fa fa-check-circle",on:{click:function(s){t.selectCorrect(e)}}})]):s("span",{staticClass:"icon is-small is-left checkbox"},[s("i",{staticClass:"fa fa-check",on:{click:function(s){t.selectCorrect(e)}}})])]:t._e()],2)])})),s("p"),s("p",{staticClass:"control"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.canAdd},on:{click:t.add}},[t._v("Add")])])])]),s("div",{staticClass:"panel-block questions is-paddingless"},[s("table",{staticClass:"table"},[s("tbody",t._l(t.questions,function(e){return s("tr",{key:e.question},[s("td",{staticClass:"is-narrow"},["word"===e.type?[s("p",{staticClass:"word is-inline-block"},[t._v(t._s(e.word))])]:[s("div",{staticClass:"heading is-inline-block"},[t._v(t._s(e.type))])]],2),s("td",[s("span",{staticClass:"is-inline-block"},[t._v(t._s(e.question))]),s("i",{staticClass:"is-inline-block is-pulled-right answers"},t._l(e.answers,function(e){return s("span",{staticClass:"answer",class:{"is-correct":e.isCorrect}},[t._v(t._s(e.text))])}))]),s("td",{staticClass:"is-narrow"},[s("button",{staticClass:"button is-danger",on:{click:function(s){t.remove(e)}}},[s("i",{staticClass:"far fa-trash-alt"})])])])}))])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"word-replay"}},[s("div",{ref:"root",staticClass:"list"},[s("table",{ref:"table"},[s("thead",[s("tr",[s("th"),t._l(t.data.records,function(e){return s("th",[t._v(t._s(e.student.name))])})],2)]),s("tbody",t._l(t.words,function(e){return s("tr",{key:e.key},[s("td",{staticClass:"word"},[t._v(t._s(e.text))]),t._l(e.durations,function(e,n){return s("td",{staticClass:"duration",class:{"is-danger":t.hasNoData(n)}})})],2)})),s("tfoot",[s("tr",[s("td"),t._l(t.tracks,function(e){return s("td",[s("span",{class:{hidden:e.pointer}},[t._v(t._s(e.doneMessage))])])})],2)])])]),s("control-panel",{attrs:{title:t.title,feedback:null,"text-length":t.textLength,"initial-page-index":t.initialPageIndex,options:t.options,"show-player":!0,"is-player-paused":t.isPlayerPaused},on:{"page-changed":t.setPage,"show-options":t.showOptions,"restart-player":t.restartPlayer,"toggle-player":t.togglePlayer,close:t.close}}),s("options",{directives:[{name:"show",rawName:"v-show",value:t.isOptionsDisplayed,expression:"isOptionsDisplayed"}],attrs:{values:t.options},on:{close:t.closeOptions,apply:t.applyOptions}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"vis-durations"}},[s("div",{staticClass:"list"},t._l(t.words,function(e){return s("div",{staticClass:"record"},[s("div",{staticClass:"word"},[t._v(t._s(e.text))]),s("div",{staticClass:"duration"},[t._v(t._s(e.value))])])})),s("control-panel",{attrs:{title:t.title,feedback:t.feedback,"text-length":t.textLength,"initial-page-index":t.initialPageIndex,options:t.options},on:{"page-changed":t.setPage,"show-options":t.showOptions,close:t.close}}),s("options",{directives:[{name:"show",rawName:"v-show",value:t.isOptionsDisplayed,expression:"isOptionsDisplayed"}],attrs:{values:t.options},on:{close:t.closeOptions,apply:t.applyOptions}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"temporal-notification"}},[s("transition",{attrs:{name:"slide-fade"}},[t.showState?s("div",{staticClass:"modal on-top is-active"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"notification has-text-centered is-rounded",class:t.notificationClass},[t._t("default")],2)])]):t._e()])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("navbar",{directives:[{name:"show",rawName:"v-show",value:t.isLoggedIn,expression:"isLoggedIn"}]}),s("section",{staticClass:"section is-paddingless"},[s("div",{staticClass:"container is-fluid is-marginless"},[s("router-view")],1)])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"task-images"}},t._l(t.imageProps,function(e){return s("img",{directives:[{name:"show",rawName:"v-show",value:t.hasImageAt(e),expression:"hasImageAt( props )"}],staticClass:"image",class:t.getClass(e),style:t.getStyle(e),attrs:{src:t.getSource(e)}})}))},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"questionnaire-results"}},[t.questionnaire?s("div",{staticClass:"list"},[s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",[t._v("Student")]),s("th",{staticClass:"is-narrow"},[t._v("Date")]),t._l(t.questionnaire.questions,function(e){return s("th",[t._v(t._s(e))])}),s("th",{staticClass:"is-narrow"},[t._v("Total")])],2)]),s("tbody",t._l(t.questionnaire.sessions,function(e,n){return s("tr",[s("td",[t._v(t._s(t._f("name")(n)))]),s("td",{staticClass:"is-narrow"},[t._v(t._s(t._f("date")(n)))]),t._l(t.questionnaire.questions,function(n){return s("td",{staticClass:"is-paddingless"},[s("div",{staticClass:"answer",class:t.getAnswerClass(e,n)},[t._v(t._s(t.getAnswerText(e,n)))])])}),s("td",{staticClass:"is-narrow"},[s("div",{staticClass:"total"},[t._v(t._s(t.getTotal(e)))])])],2)}))])]):t._e(),s("control-panel",{attrs:{title:t.title},on:{close:t.close}})],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"task-editor"}},[s("div",{staticClass:"tabs is-centered"},[s("ul",t._l(t.tabs,function(e,n){return s("li",{key:n,class:{"is-active":t.isCurrentTab(e)}},[s("a",{on:{click:function(s){t.selectTab(e)}}},[t._v(t._s(e.name))])])}))]),s("div",{staticClass:"field expand"},[s("task-editor-text",{directives:[{name:"show",rawName:"v-show",value:t.currentTab===t.tabs.text,expression:"currentTab === tabs.text"}],attrs:{task:t.ref,intros:t.intros,"is-name-editable":t.isTaskNameEditable,"is-cloning":t.isCloningTask},on:{input:t.setTextInput}}),s("task-editor-feedback",{directives:[{name:"show",rawName:"v-show",value:t.currentTab===t.tabs.feedback,expression:"currentTab === tabs.feedback"}],attrs:{task:t.ref},on:{input:t.setFeedbackInput}}),s("task-editor-images",{directives:[{name:"show",rawName:"v-show",value:t.currentTab===t.tabs.images,expression:"currentTab === tabs.images"}],attrs:{task:t.ref,"current-text":t.text},on:{input:t.setImagesInput,editing:function(e){t.onImageEditing(e)}}}),s("task-editor-questionnaire",{directives:[{name:"show",rawName:"v-show",value:t.currentTab===t.tabs.questionnaire,expression:"currentTab === tabs.questionnaire"}],attrs:{task:t.ref},on:{input:t.setQuestionnaireInput}})],1),s("p",{staticClass:"control bottom-panel"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.canSave},on:{click:t.save}},[t._v(t._s(t.action))]),s("button",{directives:[{name:"show",rawName:"v-show",value:t.currentTab===t.tabs.feedback,expression:"currentTab === tabs.feedback"}],staticClass:"button is-primary",on:{click:t.setDefaultFeedback}},[t._v("Set as default")]),s("button",{staticClass:"button is-primary",attrs:{disabled:!t.canPreview},on:{click:t.preview}},[t._v("Preview")])]),s("div",{ref:"fullscreen",staticClass:"fullscreen"},[t.inPreview?s("task-preview",{attrs:{task:t.getCurrentTask()},on:{close:t.closePreview}}):t._e()],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"finished-page"}},[s("section",{staticClass:"section"},[s("div",{staticClass:"container"},[s("button",{staticClass:"button is-large is-primary",class:{"is-loading":t.saving},attrs:{disabled:t.saving},on:{click:t.back}},[t._v(t._s(t.titleFinished))])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"session-edit-box"}},[s("table",{staticClass:"table"},[s("tbody",t._l(t.student.sessions,function(e){return s("tr",[s("td",[s("div",{staticClass:"name is-inline-block"},[t._v(t._s(t.sessionToString(e)))])]),s("td",[s("button",{staticClass:"button is-danger",on:{click:function(s){t.showDeleteWarning(e)}}},[s("i",{staticClass:"fa fa-times"})])])])}))]),t.sessionToDelete?s("remove-warning",{attrs:{object:"session",name:t.toDeleteName},on:{close:t.removeWarningClosed}}):t._e(),s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"item-select-box"}},[t.items.length>0?s("header",{staticClass:"tabs is-centered is-boxed"},[s("ul",{staticClass:"ul"},t._l(t.items,function(e){return s("li",{key:e.id,class:{"is-active":t.isItemSelected(e)}},[s("a",{on:{click:function(s){t.selectItem(e)}}},[t._v(t._s(e.text))])])}))]):t._e(),s("main",{staticClass:"subitems"},[t.isItemSelected()?t._e():s("div",{staticClass:"has-text-centered"},[s("i",[t._v("Select a "+t._s(t.itemName))])]),t.currentItem?s("div",[t._l(t.groups,function(e,n){return e.items.length?s("article",{key:n,staticClass:"message is-primary group"},["_"!==n?s("div",{staticClass:"message-header",on:{click:function(s){t.toggleItemsVisibility(e)}}},[s("p",[t._v(t._s(n))])]):t._e(),s("div",{staticClass:"message-body is-paddingless"},t._l(e.items,function(n,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isGroupVisible(e),expression:"isGroupVisible( group )"}],key:n.id,staticClass:"card subitem",class:{"is-selected":n.selected}},[s("div",{staticClass:"card-content",on:{click:function(e){t.selectSubitem(n,i,e)}}},[t._v(t._s(n.text))])])}))]):t._e()}),t.hasSubitems(t.currentItem)?t._e():s("div",{staticClass:"has-text-centered"},[s("i",[t._v("No available "+t._s(t.subitemName))])])],2):t._e()]),s("footer",{staticClass:"field"},[s("p",{staticClass:"control"}),s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[s("button",{staticClass:"button is-primary",attrs:{disabled:!t.hasItemsSelected},on:{click:t.accept}},[t._v("Select")])]),s("div",{staticClass:"level-item"})]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[t.multiple&&!t.singleGroup?s("button",{staticClass:"button",attrs:{disabled:!t.hasSubitems()},on:{click:t.selectAllSubitems}},[t._v("Select all")]):t._e()]),s("div",{staticClass:"level-item"},[t.multiple?s("button",{staticClass:"button",attrs:{disabled:!t.hasSubitems()},on:{click:t.removeAllSubitems}},[t._v("Remove all selections")]):t._e()])])]),s("p")])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section",attrs:{id:"assignments"}},[t.student&&t.student.deleted?s("article",{staticClass:"message is-danger"},[s("div",{staticClass:"message-body"},[t._v(t._s(t.tokens.message_removed_account))])]):s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v(t._s(t.tokens.assignments_title))]),s("div",{staticClass:"panel-block"},[null===t.assignments?s("div",{staticClass:"container"},[s("loading")],1):t.assignments.length?s("div",{staticClass:"tile is-ancestor"},t._l(t.assignments,function(e){return s("div",{staticClass:"tile is-parent"},[s("div",{staticClass:"tile is-child"},[s("div",{staticClass:"card"},[s("header",{staticClass:"card-header notification is-info is-paddingless"},[s("div",{staticClass:"card-header-title"},[t._v(t._s(e.cls.name))]),s("div",{staticClass:"card-header-icon"},[e.task.syllab.language?s("span",{staticClass:"icon",attrs:{title:"Syllabification"}},[s("i",{staticClass:"fa fa-ellipsis-h"})]):t._e(),e.task.speech.language?s("span",{staticClass:"icon",attrs:{title:"Voice"}},[s("i",{staticClass:"fa fa-headphones"})]):t._e()])]),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[t._v(t._s(e.task.name))])]),s("div",{staticClass:"card-footer"},[s("a",{staticClass:"card-footer-item",on:{click:function(s){t.start(e)}}},[t._v(t._s(t.tokens.assignments_start))])])])])])})):s("div",{staticClass:"container"},[s("i",[t._v(t._s(t.tokens.assignments_0))])])])]),s("nav",{staticClass:"panel"},[s("p",{staticClass:"panel-heading"},[t._v(t._s(t.tokens.completed_title))]),s("div",{staticClass:"panel-block"},[null===t.sessions?s("div",{staticClass:"container"},[s("loading")],1):t.sessions.length?s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.tokens.completed_col_class))]),s("th",[t._v(t._s(t.tokens.completed_col_task))]),s("th",[t._v(t._s(t.tokens.completed_col_wpm))]),s("th",[t._v(t._s(t.tokens.completed_col_date))])])]),s("tbody",t._l(t.sessions,function(e){return s("tr",[s("td",[t._v(t._s(e.cls.name))]),s("td",[t._v(t._s(e.task.name))]),s("td",[t._v(t._s(t.getWPM(e.data)))]),s("td",[t._v(t._s(t._f("prettifyDate")(e.session.date)))])])}))]):s("div",{staticClass:"container"},[s("i",[t._v(t._s(t.tokens.completed_0)+" ")])])])]),s("temporal-notification",{attrs:{type:"danger",show:t.showError}},[s("span",[t._v(t._s(t.errorMessage))])])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"feedback-editor"}},[s("p",{staticClass:"control"},[s("label",{staticClass:"label"},[t._v(t._s(t.header))])]),s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.language,expression:"language"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.language=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",selected:"selected"}},[t._v("none")]),t._l(t.languages,function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._t("first")],2),s("div",{staticClass:"field is-horizontal"},[s("div",{staticClass:"select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.thresholdIsSmart,expression:"thresholdIsSmart"}],attrs:{disabled:!t.isLanguageSelected},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.thresholdIsSmart=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:!1}},[t._v("fixed")]),s("option",{domProps:{value:!0}},[t._v("calibrated")])])]),t.thresholdIsSmart?[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.thresholdMin,expression:"thresholdMin",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",step:"100",disabled:!t.canEditCalibThresholdParams,min:"1000",max:t.thresholdMax},domProps:{value:t.thresholdMin},on:{input:function(e){e.target.composing||(t.thresholdMin=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),s("div",{staticClass:"control-line"},[t._v("-")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.thresholdMax,expression:"thresholdMax",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",step:"100",disabled:!t.canEditCalibThresholdParams,max:"5000",min:t.thresholdMin},domProps:{value:t.thresholdMax},on:{input:function(e){e.target.composing||(t.thresholdMax=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),s("div",{staticClass:"control-line"},[t._v("ms")])]:[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.thresholdValue,expression:"thresholdValue",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",step:"100",disabled:!t.language},domProps:{value:t.thresholdValue},on:{input:function(e){e.target.composing||(t.thresholdValue=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),s("div",{staticClass:"control-line"},[t._v("ms")])],t._t("second")],2),s("div",{staticClass:"field is-horizontal"},[t._t("default")],2),s("p")])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"remove-warning"}},[s("div",{staticClass:"modal is-active"},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-content"},[s("article",{staticClass:"message is-danger"},[s("div",{staticClass:"message-header"},[s("p",[t._v("Deleting "+t._s(t.object)+".")]),s("button",{staticClass:"delete",on:{click:t.reject}})]),s("div",{staticClass:"message-body"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-item"},[s("span",[s("span",[t._v("The "+t._s(t.object)+' "'+t._s(t.name)+'" will be deleted permanently. ')]),t._t("default"),s("span",[t._v("Continue?")])],2)])]),s("div",{staticClass:"level"},[s("div",{staticClass:"level-item"},[s("button",{staticClass:"button is-danger",on:{click:t.confirm}},[t._v("OK")]),s("button",{staticClass:"button",on:{click:t.reject}},[t._v("Cancel")])])])])])])])])},staticRenderFns:[]}}],[217]);
//# sourceMappingURL=app.4cf9c398c817609894d4.js.map